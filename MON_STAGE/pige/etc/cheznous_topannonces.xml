<?xml version="1.0" encoding="iso-8859-15"?>
<spool nom="cheznous_topannonces">
  <initialisation>
    <url>http://www.topannonces.fr/annonces-location-immobilier-u19p:parametre1:.html?PageSize=90&amp;type=1&amp;FlatDvals=4294872271</url>
    <parametres>
      <parametre>
        <valeur>1</valeur>
        <valeur>2</valeur>
        <valeur>3</valeur>
        <valeur>4</valeur>
        <valeur>5</valeur>
        <valeur>6</valeur>
        <valeur>7</valeur>
        <valeur>8</valeur>
        <valeur>9</valeur>
        <valeur>10</valeur>
        <valeur>11</valeur>
        <valeur>12</valeur>
        <valeur>13</valeur>
        <valeur>14</valeur>
        <valeur>15</valeur>
        <valeur>16</valeur>
        <valeur>17</valeur>
        <valeur>18</valeur>
        <valeur>19</valeur>
        <valeur>20</valeur>
      </parametre>
    </parametres>
  </initialisation>
  <navigation>
     <profondeur>100</profondeur>
     <pause>0</pause>
     <timeout>60</timeout>
     <thread>5</thread>
     <utf8>0</utf8>
    <rang>
      <a_suivre>
        <expression>&lt;h3 class=&quot;classifiedTitre marginbtm5&quot;&gt;&lt;a class=&quot;boldblue&quot; href=&quot;([^&quot;]+)&quot;</expression>
         <remplacement>http://www.topannonces.fr$1</remplacement>
         <limite>90</limite>
         <suivant>1</suivant>
       </a_suivre>
    </rang>
    <rang>
      <a_capturer>
         <expression>(.+)</expression>
         <remplacement>$1</remplacement>
         <option>s</option>
         <limite>1</limite>
       </a_capturer>
    </rang>
  </navigation>
  <capture>
     <destination>cheznous_topannonces.csv</destination>
     <echappement>\</echappement>
     <separateur>;</separateur>
     <encapsulateur>"</encapsulateur>
     <ligne>CRLF</ligne>
     <enlever_balise>1</enlever_balise>
     <enlever_entite>1</enlever_entite>
    <exclusion>
      <fichier>exclusionTA.csv</fichier>
      <expression>cherch</expression>
    </exclusion>
    <parent>
       <expression>(.+)</expression>
	   <remplacement>$1</remplacement>
	   <option>s</option>
     </parent>
    <enfant>
       <expression>(.+)</expression>
	   <remplacement>$1</remplacement>
	   <limite>1</limite>
	   <option>s</option>
     </enfant>
    <colonnes>
      <colonne mode="expression" nom="Date">
        <expression>publi.+e le ([^&lt;]+)&lt;\/span&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>[^0-9]+$</expression>
            <remplacement />
          </filtre>
          <filtre>
            <expression>([0-9]{2}) janvier ([0-9]{4})</expression>
            <remplacement>$1/01/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) f.+vrier ([0-9]{4})</expression>
            <remplacement>$1/02/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) mars ([0-9]{4})</expression>
            <remplacement>$1/03/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) avril ([0-9]{4})</expression>
            <remplacement>$1/04/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) mai ([0-9]{4})</expression>
            <remplacement>$1/05/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) juin ([0-9]{4})</expression>
            <remplacement>$1/06/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) juillet ([0-9]{4})</expression>
            <remplacement>$1/07/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) ao.+t ([0-9]{4})</expression>
            <remplacement>$1/08/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) septembre ([0-9]{4})</expression>
            <remplacement>$1/09/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) octobre ([0-9]{4})</expression>
            <remplacement>$1/10/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) novembre ([0-9]{4})</expression>
            <remplacement>$1/11/$2</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2}) d.+cembre ([0-9]{4})</expression>
            <remplacement>$1/12/$2</remplacement>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Dpt">
        <expression>class=&quot;detailVille&quot;&gt;[^(]+\(([0-9]{2})[0-9]{3}\)</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>s</option>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Ville">
        <expression>class=&quot;detailVille&quot;&gt;[^a-zA-Z]+([^(]+) \([0-9]{5}\)</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>s</option>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>'</expression>
            <remplacement>'</remplacement>
            <option>i</option>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Type">
        <expression>&lt;title&gt;([^&lt;]+)&lt;\/title&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>is</option>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>¤</expression>
            <remplacement>euro</remplacement>
          </filtre>
          <filtre>
            <expression>(.+)</expression>
            <remplacement>utf8_decode('$1')</remplacement>
            <option>se</option>
          </filtre>
          <filtre>
            <expression>[\r\n]+</expression>
            <remplacement> </remplacement>
          </filtre>
          <filtre>
            <expression>&amp;euro;</expression>
            <remplacement>chr(128)</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>&amp;#39;</expression>
            <remplacement>'</remplacement>
          </filtre>
          <filtre>
            <expression>^Location</expression>
            <remplacement />
            <option>is</option>
          </filtre>
          <filtre>
            <expression>^Annonce</expression>
            <remplacement />
            <option>is</option>
          </filtre>
          <filtre>
            <expression>.*(studio|maison|parking|box|chambre).*</expression>
            <remplacement>$1</remplacement>
            <option>is</option>
          </filtre>
          <filtre>
            <expression>.*(collocation).*</expression>
            <remplacement>chambre</remplacement>
            <option>is</option>
          </filtre>
          <filtre>
            <expression>.*Appartement ([0-9]) .*$</expression>
            <remplacement>T$1</remplacement>
            <option>is</option>
          </filtre>
          <filtre>
            <expression>^.*F([0-9]).*$</expression>
            <remplacement>T$1</remplacement>
            <option>is</option>
          </filtre>
          <filtre>
            <expression>^.*P([0-9]).*$</expression>
            <remplacement>T$1</remplacement>
            <option>is</option>
          </filtre>
          <filtre>
            <expression>^.*T([0-9]).*$</expression>
            <remplacement>T$1</remplacement>
            <option>is</option>
          </filtre>
          <filtre>
            <expression>^Appartement$</expression>
            <remplacement />
            <option>is</option>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Meublé">
        <expression>&lt;p class=&quot;detailAnnonce&quot;&gt;[^&lt;]+[^a-z](meubl..?|meubl..?e|meuble|meublee|mbl|mble|mble)[^a-z][^&lt;]+&lt;</expression>
        <remplacement>MBLE</remplacement>
        <recherche>ENFANT</recherche>
	    <option>si</option>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Loyer">
        <expression>&lt;span class=&quot;detailPrice&quot;&gt;([0-9]&amp;#160;)?([0-9]{2,3})</expression>
        <remplacement>$1$2</remplacement>
        <recherche>ENFANT</recherche>
	    <option>i</option>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>([0-9])&amp;#160;([0-9]{3})</expression>
            <remplacement>$1$2</remplacement>
            <option>i</option>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Téléphone">
        <expression>(&lt;span[^&gt;]+&gt;(([0-9]{2} ){5}) ?&lt;\/span&gt;)</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>s</option>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>([^0-9]+)</expression>
            <remplacement />
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Description">
        <expression>&lt;p class=&quot;detailAnnonce&quot;&gt;\r\n\t([^&lt;]+)&lt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>s</option>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>¤</expression>
            <remplacement>euro</remplacement>
          </filtre>
          <filtre>
            <expression>(.+)</expression>
            <remplacement>utf8_decode('$1')</remplacement>
            <option>se</option>
          </filtre>
          <filtre>
            <expression>[\r\n]+</expression>
            <remplacement> </remplacement>
          </filtre>
          <filtre>
            <expression>&amp;euro;</expression>
            <remplacement>chr(128)</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>&amp;#39;</expression>
            <remplacement>'</remplacement>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Part/Pro">
        <expression>http:\/\/www.topannonces.fr\/(.+)</expression>
        <remplacement>$1</remplacement>
        <recherche>LOCATION</recherche>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>^pro.+</expression>
            <remplacement>A</remplacement>
          </filtre>
          <filtre>
            <expression>^annonce.+</expression>
            <remplacement>P</remplacement>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Image">
        <expression>&lt;img id=&quot;mainImage&quot; src=&quot;([^&quot;]+)&quot;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
    </colonnes>
  </capture>
</spool>
