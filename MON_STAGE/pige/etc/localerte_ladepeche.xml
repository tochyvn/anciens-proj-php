<?xml version="1.0" encoding="iso-8859-15"?>
<spool nom="localerte_ladepeche">
  <initialisation>
    <url>http://www.publi.fr/annonce/liste.html?from=0&amp;rub=IMO001&amp;trie=date&amp;nb_ann=32</url>
  </initialisation>
  <navigation>
    <profondeur>110</profondeur>
    <pause>0</pause>
    <timeout>60</timeout>
    <thread>5</thread>
    <rang>
      <a_suivre>
        <expression>&lt;a href=&quot;([^&quot;]+)&quot; class=&quot;next&quot;&gt;Suivant&lt;\/a&gt;</expression>
        <remplacement>http://www.publi.fr/annonce/liste.html$1</remplacement>
        <limite>1</limite>
        <suivant>0</suivant>
      </a_suivre>
      <a_suivre>
        <expression>&lt;span class=&quot;voir_detail&quot; href=&quot;([^&quot;]+)&quot;&gt;</expression>
        <remplacement>http://www.publi.fr$1</remplacement>
        <limite>32</limite>
        <suivant>1</suivant>
      </a_suivre>
    </rang>
    <rang>
      <a_capturer>
        <expression>(.+)</expression>
        <remplacement>$1</remplacement>
        <option>s</option>
        <limite>1</limite>
      </a_capturer>
    </rang>
  </navigation>
  <capture>
    <destination>localerte_ladepeche.csv</destination>
    <echappement>\</echappement>
    <separateur>;</separateur>
    <encapsulateur>"</encapsulateur>
    <ligne>CRLF</ligne>
    <enlever_balise>1</enlever_balise>
    <enlever_entite>1</enlever_entite>
    <exclusion>
      <fichier>exclusion.csv</fichier>
    </exclusion>
    <parent>
      <expression>(.+)</expression>
      <remplacement>$1</remplacement>
      <option>s</option>
    </parent>
    <enfant>
      <expression>(.+)</expression>
      <remplacement>$1</remplacement>
      <limite>1</limite>
      <option>s</option>
    </enfant>
    <colonnes>
      <colonne mode="valeur" nom="Id">
        <valeur>LaDepeche</valeur>
      </colonne>
      <colonne mode="valeur" nom="Actif">
        <valeur>1</valeur>
      </colonne>
      <colonne mode="expression" nom="Date">
        <expression>Annonce mise ..? jour le [^0-9]+ ([0-9]+ [^0-9]+) [0-9]+:[0-9]+</expression>
        <remplacement>'$1 '.date('Y')</remplacement>
        <recherche>ENFANT</recherche>
        <option>e</option>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>^([0-9][^0-9])</expression>
            <remplacement>0$1</remplacement>
          </filtre>
          <filtre>
            <expression>^([0-9]+) janvier ([0-9]+)$</expression>
            <remplacement>$1/01/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) f..?vrier ([0-9]+)$</expression>
            <remplacement>$1/02/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) mars ([0-9]+)$</expression>
            <remplacement>$1/03/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) avril ([0-9]+)$</expression>
            <remplacement>$1/04/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) mai ([0-9]+)$</expression>
            <remplacement>$1/05/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) juin ([0-9]+)$</expression>
            <remplacement>$1/06/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) juillet ([0-9]+)$</expression>
            <remplacement>$1/07/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) ao..?t ([0-9]+)$</expression>
            <remplacement>$1/08/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) septembre ([0-9]+)$</expression>
            <remplacement>$1/09/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) octobre ([0-9]+)$</expression>
            <remplacement>$1/10/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) novembre ([0-9]+)$</expression>
            <remplacement>$1/11/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) d..?cembre ([0-9]+)$</expression>
            <remplacement>$1/12/$2</remplacement>
            <option>i</option>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Ref">
        <expression>f\. ([A-Z]{2,3}-[a-z0-9]+(-[a-z0-9]+)?)</expression>
        <remplacement>$1</remplacement>
        <option>i</option>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Ville">
        <expression>&lt;span&gt;Situ..? ..? :&lt;\/span&gt; (.+) \([0-9]+\)&lt;\/li&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="CP">
        <expression>&lt;span&gt;Situ..? ..? :&lt;\/span&gt; .+ \(([0-9]+)\)&lt;\/li&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Type">
        <expression>&lt;h1[^&gt;]*&gt;.+Location ([^ ]+)</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <option>s</option>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>s$</expression>
            <remplacement></remplacement>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Loyer">
        <expression>&lt;span&gt;Prix :&lt;\/span&gt; (([0-9]+ )?[0-9]+) &amp;euro;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>[^0-9]+</expression>
            <remplacement></remplacement>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Descriptif">
        <expression>&lt;span&gt;Description : &lt;\/span&gt;(.+)&lt;p class=&quot;warning_annonce&quot;&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <option>s</option>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Titre">
        <expression>&lt;title&gt;(.+) - Publi.fr&lt;\/title&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Pro/Part">
        <expression>(&lt;h2&gt;Contacter ce (professionnel)&lt;\/h2&gt;|&lt;div class=&quot;annoncePart&quot;&gt;Annonce de (particulier)&lt;\/div&gt;)</expression>
        <remplacement>$2$3</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="valeur" nom="Meublé">
        <valeur></valeur>
      </colonne>
      <colonne mode="expression" nom="Photo">
        <expression>&lt;div id=&quot;photo&quot;&gt;.+&lt;a href=&quot;([^&quot;]+)&quot; onclick=&quot;return hs</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <option>s</option>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="URL">
        <expression>(.+)</expression>
        <remplacement>$1</remplacement>
        <recherche>LOCATION</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Email">
        <expression>([a-zA-Z0-9]+([_.-][a-zA-Z0-9]+)*@[a-zA-Z0-9]+([.-][a-zA-Z0-9]+)*\.[a-zA-Z]{2,4})</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Tel">
        <expression>((33|0)[ \.\/-]?[1-9]([ \.\/-]?[0-9]){8})</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>[^0-9]+</expression>
            <remplacement></remplacement>
          </filtre>
          <filtre>
            <expression>^33</expression>
            <remplacement>0</remplacement>
          </filtre>
        </filtres>
      </colonne>
    </colonnes>
  </capture>
</spool>
