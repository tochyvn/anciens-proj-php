<?xml version="1.0" encoding="iso-8859-15"?>
<spool nom="localerte_jannonce">
  <initialisation>
    <url>http://jannonce.com/annonces/immobilier/logements?gp%5B0%5D=par&amp;gp%5B1%5D=pro&amp;gp%5B2%5D=0&amp;ow%5B0%5D=1&amp;ss%5B0%5D=2&amp;sc=all</url>
  </initialisation>
  <navigation>
     <profondeur>100</profondeur>
     <pause>0</pause>
     <timeout>60</timeout>
     <thread>5</thread>
    <rang>
      <a_suivre>
         <expression>&lt;li class=&quot;pagelinks-next&quot;&gt;&lt;a href=&quot;([^&quot;]+)&quot;&gt;&gt;&lt;\/a&gt;</expression>
         <remplacement>http://www.jannonce.fr$1</remplacement>
         <limite>1</limite>
         <suivant>0</suivant>
       </a_suivre>
      <a_suivre>
         <expression>&lt;a class=&quot;vert&quot; href=&quot;([^&quot;]+)&quot;&gt;&gt; voir</expression>
         <remplacement>http://jannonce.fr$1</remplacement>
         <limite>50</limite>
         <suivant>1</suivant>
       </a_suivre>
    </rang>
    <rang>
      <a_capturer>
         <expression>(.+)</expression>
         <remplacement>$1</remplacement>
         <option>s</option>
         <limite>1</limite>
       </a_capturer>
    </rang>
  </navigation>
  <capture>
     <destination>localerte_jannonce.csv</destination>
     <echappement>\</echappement>
     <separateur>;</separateur>
     <encapsulateur>"</encapsulateur>
     <ligne>CRLF</ligne>
     <enlever_balise>1</enlever_balise>
     <enlever_entite>1</enlever_entite>
    <exclusion>
      <fichier>exclusion.csv</fichier>
    </exclusion>
    <parent>
       <expression>(.+)</expression>
	   <remplacement>$1</remplacement>
	   <option>s</option>
     </parent>
    <enfant>
       <expression>(.+)</expression>
	   <remplacement>$1</remplacement>
	   <limite>1</limite>
	   <option>s</option>
     </enfant>
    <colonnes>
      <colonne mode="valeur" nom="Site">
        <valeur>JAnnonce</valeur>
      </colonne>
      <colonne mode="valeur" nom="Actif">
        <valeur>1</valeur>
      </colonne>
      <colonne mode="expression" nom="Date">
        <expression>&lt;p class=&quot;date textg&quot;&gt;([^,]+),</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>i</option>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>^([0-9][^0-9])</expression>
            <remplacement>0$1</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9][^0-9])</expression>
            <remplacement>0$4</remplacement>
          </filtre>
          <filtre>
            <expression>\/([0-9][^0-9])</expression>
            <remplacement>/0$1</remplacement>
          </filtre>
          <filtre>
            <expression>([0-9]{2})$</expression>
            <remplacement>20$1</remplacement>
          </filtre>
          <filtre>
            <expression>\/([0-9]{2})$</expression>
            <remplacement>/20$1</remplacement>
          </filtre>
          <filtre>
            <expression>^([0-9]+) janvier ([0-9]+)$</expression>
            <remplacement>$1/01/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) f..?vrier ([0-9]+)$</expression>
            <remplacement>$1/02/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) mars ([0-9]+)$</expression>
            <remplacement>$1/03/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) avril ([0-9]+)$</expression>
            <remplacement>$1/04/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) mai ([0-9]+)$</expression>
            <remplacement>$1/05/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) juin ([0-9]+)$</expression>
            <remplacement>$1/06/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) juillet ([0-9]+)$</expression>
            <remplacement>$1/07/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) ao..?t ([0-9]+)$</expression>
            <remplacement>$1/08/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) septembre ([0-9]+)$</expression>
            <remplacement>$1/09/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) octobre ([0-9]+)$</expression>
            <remplacement>$1/10/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) novembre ([0-9]+)$</expression>
            <remplacement>$1/11/$2</remplacement>
            <option>i</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) d..?cembre ([0-9]+)$</expression>
            <remplacement>$1/12/$2</remplacement>
            <option>i</option>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Id">
        <expression>&lt;p class=&quot;ref textg&quot;&gt;R&amp;eacute;f : ([^&lt;]+)&lt;\/p&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Ville">
        <expression>[0-9]{5} - (.+) - FRANCE</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="CP">
        <expression>([0-9]{5}) - .+ - FRANCE</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Type">
        <expression>([0-9]) pi.+ces? [0-9]+ m</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>s</option>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Loyer">
        <expression>&lt;span style=&quot;font-size:13px;&quot;&gt;[^0-9]+([0-9]+) &amp;euro;[^&lt;]+&lt;\/span&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>s</option>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>([0-9]) ([0-9]+)</expression>
            <remplacement>$1$2</remplacement>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Description">
        <expression>&lt;p class=&quot;option&quot;&gt;(.+)&lt;!--fin annonce</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>s</option>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Titre">
        <expression>&lt;h1 class=&quot;titre.+&gt;(.+)&lt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Part/Pro">
        <expression>&lt;p class='typeannonce textjaune'&gt;&lt;big&gt;ANNONCE DE (PARTICULIER|PROFESSIONNEL)&lt;\/big&gt;&lt;\/p&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="valeur" nom="Meublé">
        <valeur />
      </colonne>
      <colonne mode="expression" nom="Photo">
        <expression>&lt;img src='([^']+)' name='principal'</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="URL">
        <expression>(.+)</expression>
        <remplacement>$1</remplacement>
        <recherche>LOCATION</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="valeur" nom="Email">
        <valeur />
      </colonne>
      <colonne mode="expression" nom="Téléphone">
        <expression>([0-9]{2}\.[0-9]{2}\.[0-9]{2}\.[0-9]{2}\.[0-9]{2})</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>\.</expression>
            <remplacement />
          </filtre>
        </filtres>
      </colonne>
    </colonnes>
  </capture>
</spool>
