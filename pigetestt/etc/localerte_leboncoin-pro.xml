<?xml version="1.0" encoding="iso-8859-15"?>
<spool nom="localerte_leboncoin-pro">
  <initialisation>
    <url>http://www.leboncoin.fr/li?ca=21_s&amp;c=10&amp;th=1&amp;f=c&amp;w=3</url>
  </initialisation>
  <navigation>
     <profondeur>1</profondeur><!-- 90 -->
     <pause>0</pause>
     <timeout>60</timeout>
     <thread>10</thread>
    <rang>
      <a_suivre>
         <expression>&lt;a href=&quot;([^&quot;]+)&quot;&gt;Page suivante&lt;\/a&gt;</expression>
         <remplacement>$1</remplacement>
         <limite>1</limite>
         <suivant>0</suivant>
       </a_suivre>
      <a_suivre>
         <expression>&lt;a href=&quot;([^&quot;]+)&quot;[^&gt;]+&gt;[^&lt;]+&lt;div class=&quot;lbc&quot;&gt;</expression>
         <remplacement>$1</remplacement>
         <limite>50</limite>
         <suivant>1</suivant>
       </a_suivre>
    </rang>
    <rang>
      <a_capturer>
         <expression>(.+)</expression>
         <remplacement>$1</remplacement>
         <option>s</option>
         <limite>1</limite>
       </a_capturer>
    </rang>
  </navigation>
  <capture>
     <destination>localerte_leboncoin-pro.csv</destination>
     <echappement>\</echappement>
     <separateur>;</separateur>
     <encapsulateur>"</encapsulateur>
     <ligne>CRLF</ligne>
     <enlever_balise>1</enlever_balise>
     <enlever_entite>1</enlever_entite>
    <exclusion>
      <fichier>exclusion.csv</fichier>
    </exclusion>
    <parent>
       <expression>(.+)</expression>
	   <remplacement>$1</remplacement>
	   <option>s</option>
     </parent>
    <enfant>
       <expression>(.+)</expression>
	   <remplacement>$1</remplacement>
	   <limite>1</limite>
	   <option>s</option>
     </enfant>
    <colonnes>
      <colonne mode="valeur" nom="Site">
        <valeur>LeBonCoin</valeur>
      </colonne>
      <colonne mode="valeur" nom="Actif">
        <valeur>1</valeur>
      </colonne>
      <colonne mode="expression" nom="Date">
        <expression>Mise en ligne par.+&lt;\/a&gt; le ([0-9]+ [^ ]+|Aujourd'hui|Hier)</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>s</option>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>^([1-9])( .+)$</expression>
            <remplacement>0$1$2</remplacement>
            <option>s</option>
          </filtre>
          <filtre>
            <expression>^Aujourd'hui$</expression>
            <remplacement>date('d/m/Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^Hier$</expression>
            <remplacement>date('d/m/Y', time()-3600*24)</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) janvier$</expression>
            <remplacement>'$1/01/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) f.+vrier$</expression>
            <remplacement>'$1/02/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) mars$</expression>
            <remplacement>'$1/03/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) avril$</expression>
            <remplacement>'$1/04/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) mai$</expression>
            <remplacement>'$1/05/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) juin$</expression>
            <remplacement>'$1/06/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) juillet$</expression>
            <remplacement>'$1/07/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) ao.+t$</expression>
            <remplacement>'$1/08/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) septembre$</expression>
            <remplacement>'$1/09/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) octobre$</expression>
            <remplacement>'$1/10/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) novembre$</expression>
            <remplacement>'$1/11/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
          <filtre>
            <expression>^([0-9]+) d.+cembre$</expression>
            <remplacement>'$1/12/'.date('Y', time())</remplacement>
            <option>e</option>
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Id">
        <expression>([0-9]+)</expression>
        <remplacement>$1</remplacement>
        <recherche>LOCATION</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Ville">
        <expression>Ville :&lt;\/th&gt;\n.+&lt;td&gt;([^&lt;]+)&lt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Code Postal">
        <expression>&lt;th&gt;(Code postal|Ville) :&lt;\/th&gt;[^&lt;]+&lt;td&gt;([0-9]{5})[^&lt;]*&lt;\/td&gt;</expression>
        <remplacement>$2</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Type">
        <expression>Type de bien : &lt;\/th&gt;[^&lt;]+&lt;td&gt;(Maison)&lt;\/td&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
	    <option>s</option>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Loyer">
        <expression>&lt;span class=&quot;price&quot;&gt;([^&lt;]+)&lt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>[^0-9]+</expression>
            <remplacement />
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="expression" nom="Description">
        <expression>&lt;meta name=&quot;description&quot; content=&quot;([^&quot;]+)&quot;&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="Titre">
        <expression>&lt;meta name=&quot;title&quot; content=&quot;([^&quot;]+)&quot;&gt;</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
        <filtres>
          <filtre>
            <expression>- leboncoin.fr$</expression>
            <remplacement />
          </filtre>
        </filtres>
      </colonne>
      <colonne mode="valeur" nom="Part/Pro">
        <valeur>PROFESSIONNEL</valeur>
      </colonne>
      <colonne mode="valeur" nom="Meublé">
        <valeur />
      </colonne>
      <colonne mode="expression" nom="Photo">
        <expression>id=&quot;image&quot; onclick=&quot;[^&quot;]+&quot; class=&quot;[^&quot;]+&quot; style=&quot;background\-image: url\('([^']+)'</expression>
        <remplacement>$1</remplacement>
        <recherche>ENFANT</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="expression" nom="URL">
        <expression>(.+)</expression>
        <remplacement>$1</remplacement>
        <recherche>LOCATION</recherche>
        <limite>1</limite>
      </colonne>
      <colonne mode="valeur" nom="Email">
        <valeur />
      </colonne>
      <colonne mode="valeur" nom="Téléphone">
        <valeur />
      </colonne>
    </colonnes>
  </capture>
</spool>
