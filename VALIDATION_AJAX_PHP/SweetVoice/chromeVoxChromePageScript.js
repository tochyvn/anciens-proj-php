var goog=goog||{};goog.global=this;goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.provide=function(a){goog.exportPath_(a)};goog.setTestOnly=function(a){if(!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};
goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};goog.addDependency=function(){};goog.useStrictRequires=!1;goog.ENABLE_DEBUG_LOADER=!0;goog.require=function(){};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a){return a};
goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){goog.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
goog.getMsg=function(a,b){var c=b||{},d;for(d in c){var e=(""+c[d]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e)}return a};goog.getMsgWithFallback=function(a){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(a){a.call(goog.global)};goog.MODIFY_FUNCTION_PROTOTYPES=!0;
goog.MODIFY_FUNCTION_PROTOTYPES&&(Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return goog.bind.apply(null,c)}return goog.bind(this,a)},Function.prototype.partial=function(a){var b=Array.prototype.slice.call(arguments);b.unshift(this,null);return goog.bind.apply(null,b)},Function.prototype.inherits=function(a){goog.inherits(this,a)},Function.prototype.mixin=function(a){goog.mixin(this.prototype,
a)});var cvox={VERBOSITY_VERBOSE:0,VERBOSITY_BRIEF:1,ChromeVox:function(){}};cvox.ChromeVox.host=null;cvox.ChromeVox.msgs=null;cvox.ChromeVox.lens=null;cvox.ChromeVox.isActive=!0;cvox.ChromeVox.version=null;cvox.ChromeVox.earcons=null;cvox.ChromeVox.navigationManager=null;cvox.ChromeVox.serializer=null;cvox.ChromeVox.isStickyOn=!1;cvox.ChromeVox.keyPrefixOn=!1;cvox.ChromeVox.verbosity=cvox.VERBOSITY_VERBOSE;cvox.ChromeVox.isChromeOS=-1!=navigator.userAgent.indexOf("CrOS");cvox.ChromeVox.isMac=-1!=navigator.platform.indexOf("Mac");
cvox.ChromeVox.modKeyStr=cvox.ChromeVox.isChromeOS?"Shift+Search":cvox.ChromeVox.isMac?"Ctrl+Cmd":"Ctrl+Alt";cvox.ChromeVox.sequenceSwitchKeyCodes=[];cvox.ChromeVox.markInUserCommand=function(){};cvox.ChromeVox.syncToNode=function(){};cvox.ChromeVox.executeUserCommand=function(){};cvox.ChromeVox.entireDocumentIsHidden=!1;cvox.ChromeVox.storeOn=function(a){a.isStickyOn=cvox.ChromeVox.isStickyOn;cvox.ChromeVox.navigationManager.storeOn(a)};
cvox.ChromeVox.readFrom=function(a){cvox.ChromeVox.isStickyOn=a.isStickyOn;cvox.ChromeVox.navigationManager.readFrom(a)};cvox.Cursor=function(a,b,c){this.node=a;this.index=b;this.text=c};cvox.Cursor.prototype.clone=function(){return new cvox.Cursor(this.node,this.index,this.text)};cvox.Cursor.prototype.copyFrom=function(a){this.node=a.node;this.index=a.index;this.text=a.text};cvox.Cursor.prototype.equals=function(a){return this.node==a.node&&this.index==a.index&&this.text==a.text};cvox.TtsInterface=function(){};cvox.TtsInterface.prototype.speak=function(){};cvox.TtsInterface.prototype.isSpeaking=function(){};cvox.TtsInterface.prototype.stop=function(){};cvox.TtsInterface.prototype.increaseOrDecreaseProperty=function(){};cvox.AbstractTts=function(){this.ttsProperties={};if(void 0==cvox.AbstractTts.pronunciationDictionaryRegexp_){var a=[],b;for(b in cvox.AbstractTts.PRONUNCIATION_DICTIONARY)a.push(b);a="\\b("+a.join("|")+")\\b";cvox.AbstractTts.pronunciationDictionaryRegexp_=RegExp(a,"ig")}if(void 0==cvox.AbstractTts.substitutionDictionaryRegexp_){var a=[],c;for(c in cvox.AbstractTts.SUBSTITUTION_DICTIONARY)a.push(c);a="("+a.join("|")+")";cvox.AbstractTts.substitutionDictionaryRegexp_=RegExp(a,"ig")}};
cvox.AbstractTts.prototype.propertyMin={rate:0,pitch:0,volume:0};cvox.AbstractTts.prototype.propertyMax={rate:1,pitch:1,volume:1};cvox.AbstractTts.prototype.propertyStep={rate:0.1,pitch:0.1,volume:0.1};cvox.AbstractTts.prototype.speak=function(){return this};cvox.AbstractTts.prototype.isSpeaking=function(){return!1};cvox.AbstractTts.prototype.stop=function(){};
cvox.AbstractTts.prototype.increaseOrDecreaseProperty=function(a,b){var c=this.propertyMin[a],d=this.propertyMax[a],e=this.propertyStep[a],f=this.ttsProperties[a],f=b?f+e:f-e;this.ttsProperties[a]=Math.max(Math.min(f,d),c)};cvox.AbstractTts.cyclePunctuationLevel=function(){cvox.AbstractTts.currentPunctuationLevel_=(cvox.AbstractTts.currentPunctuationLevel_+1)%cvox.AbstractTts.punctuationLevels_.length;return cvox.AbstractTts.punctuationLevels_[cvox.AbstractTts.currentPunctuationLevel_].msg};
cvox.AbstractTts.preprocess_=function(a){a=a.replace(cvox.AbstractTts.substitutionDictionaryRegexp_,function(a){return" "+cvox.AbstractTts.SUBSTITUTION_DICTIONARY[a]+" "});if(1==a.length)return cvox.AbstractTts.CHARACTER_DICTIONARY[a]||a.toUpperCase()+".";a=a.replace(cvox.AbstractTts.pronunciationDictionaryRegexp_,function(a){return cvox.AbstractTts.PRONUNCIATION_DICTIONARY[a.toLowerCase()]});a=a.replace(/google\+/ig,"google plus");a=a.replace(cvox.AbstractTts.repetitionRegexp_,cvox.AbstractTts.repetitionReplace_);
var b=cvox.AbstractTts.punctuationLevels_[cvox.AbstractTts.currentPunctuationLevel_];a=a.replace(b.regexp,cvox.AbstractTts.createPunctuationReplace_(b.clear));var c=!1;!a.match(/[a-z]+/)&&a.indexOf(" ")!=a.lastIndexOf(" ")&&(c=!0);a=a.replace(/[A-Z]+/g,function(a){return 3<a.length&&a.match(/([AEIOUY])/g)?a.toLowerCase():c?a:" "+a.split("").join(" ")});return a=a.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")};
cvox.AbstractTts.preprocessWithProperties=function(a,b){if(1==a.length&&"A"<=a&&"Z">=a)for(var c in cvox.AbstractTts.PERSONALITY_CAPITAL)b[c]=cvox.AbstractTts.PERSONALITY_CAPITAL[c];if(b&&b[cvox.AbstractTts.PUNCTUATION_LEVEL]){c=0;for(var d;d=cvox.AbstractTts.punctuationLevels_[c];c++)if(b[cvox.AbstractTts.PUNCTUATION_LEVEL]==d.name){cvox.AbstractTts.currentPunctuationLevel_=c;break}}return cvox.AbstractTts.preprocess_(a)};cvox.AbstractTts.RATE="rate";cvox.AbstractTts.PITCH="pitch";
cvox.AbstractTts.VOLUME="volume";cvox.AbstractTts.LANG="lang";cvox.AbstractTts.RELATIVE_RATE="relativeRate";cvox.AbstractTts.RELATIVE_PITCH="relativePitch";cvox.AbstractTts.RELATIVE_VOLUME="relativeVolume";cvox.AbstractTts.COLOR="color";cvox.AbstractTts.FONT_WEIGHT="fontWeight";cvox.AbstractTts.PUNCTUATION_LEVEL="punctuationLevel";cvox.AbstractTts.PERSONALITY_ANNOTATION={relativePitch:-0.1,color:"yellow"};cvox.AbstractTts.PERSONALITY_ASIDE={relativePitch:-0.1,color:"#669"};
cvox.AbstractTts.PERSONALITY_CAPITAL={relativePitch:0.6};cvox.AbstractTts.PERSONALITY_QUOTE={relativePitch:0.1,color:"#b6b",fontWeight:"bold"};cvox.AbstractTts.PERSONALITY_STRONG={relativePitch:0.1,color:"#b66",fontWeight:"bold"};cvox.AbstractTts.PERSONALITY_EMPHASIS={relativeVolume:0.1,relativeRate:-0.1,color:"#6bb",fontWeight:"bold"};cvox.AbstractTts.DEBUG=!0;cvox.AbstractTts.QUEUE_MODE_FLUSH=0;cvox.AbstractTts.QUEUE_MODE_QUEUE=1;
cvox.AbstractTts.CHARACTER_DICTIONARY={" ":"space","`":"backtick","~":"tilde","!":"exclamation point","@":"at","#":"pound",$:"dollar","%":"percent","^":"caret","&":"ampersand","*":"asterisk","(":"open paren",")":"close paren","-":"hyphen",_:"underscore","=":"equals","+":"plus","[":"left bracket","]":"right bracket","{":"left brace","}":"right brace","|":"pipe",";":"semicolon",":":"colon",",":"comma",".":"period","<":"less than",">":"greater than","/":"slash","?":"question mark",'"':"quote","'":"single quote",
"\t":"tab","\r":"return","\n":"new line","\\":"backslash"};cvox.AbstractTts.PRONUNCIATION_DICTIONARY={admob:"ad-mob",adsense:"ad-sense",adwords:"ad-words",angularjs:"angular j s",bcc:"B C C",cc:"C C",chromevox:"chrome vox",cr48:"C R 48",ctrl:"control",doubleclick:"double-click",gmail:"gee mail",gtalk:"gee talk",http:"H T T P",https:"H T T P S",igoogle:"eye google",pagerank:"page-rank",username:"user-name",www:"W W W",youtube:"you tube"};
cvox.AbstractTts.SUBSTITUTION_DICTIONARY={"://":"colon slash slash","\u00bc":"one fourth","\u00bd":"one half","\u200e":"left to right mark","\u2190":"left arrow","\u2191":"up arrow","\u2192":"right arrow","\u2193":"down arrow","\u21d0":"left double arrow","\u21d1":"up double arrow","\u21d2":"right double  arrow","\u21d3":"down double arrow","\u21e6":"left arrow","\u21e7":"up arrow","\u21e8":"right arrow","\u21e9":"down arrow","\u2303":"control","\u2318":"command","\u2325":"option","\u25b2":"up triangle",
"\u25b3":"up triangle","\u25b4":"up triangle","\u25b5":"up triangle","\u25b6":"right triangle","\u25b7":"right triangle","\u25b8":"right triangle","\u25b9":"right triangle","\u25ba":"right pointer","\u25bb":"right pointer","\u25bc":"down triangle","\u25bd":"down triangle","\u25be":"down triangle","\u25bf":"down triangle","\u25c0":"left triangle","\u25c1":"left triangle","\u25c2":"left triangle","\u25c3":"left triangle","\u25c4":"left pointer","\u25c5":"left pointer","\uf8ff":"apple"};
cvox.AbstractTts.repetitionRegexp_=/([-\/\\|!@#$%^&*\(\)=_+\[\]\{\}.?;'":<>])\1{2,}/g;cvox.AbstractTts.repetitionReplace_=function(a){var b=a.length;return b+" "+cvox.AbstractTts.CHARACTER_DICTIONARY[a[0]]};cvox.AbstractTts.createPunctuationReplace_=function(a){return function(b){var c=-1!=cvox.AbstractTts.retainPunctuation_.indexOf(b)?b:" ";return a?c:" "+cvox.AbstractTts.CHARACTER_DICTIONARY[b]+c+" "}};
cvox.AbstractTts.punctuationLevels_=[{name:"none",msg:"no_punctuation",regexp:/[-$#"()*;:<>\n\\\/+='~`@_]/g,clear:!0},{name:"some",msg:"some_punctuation",regexp:/[-$#"()*:<>\\\/+=~`%]/g,clear:!1},{name:"all",msg:"all_punctuation",regexp:/[-$#"()*;:<>\n\\\/+='~`!@_.,?%]/g,clear:!1}];cvox.AbstractTts.retainPunctuation_=".,;?!'".split("");cvox.AbstractTts.currentPunctuationLevel_=1;cvox.AbstractEarcons=function(){};cvox.AbstractEarcons.prototype.playEarcon=function(a){window.console&&window.console.log("Earcon "+this.getEarconName(a))};cvox.AbstractEarcons.prototype.playEarconByName=function(a){this.playEarcon(this.getEarconId(a))};
cvox.AbstractEarcons.prototype.getEarconName=function(a){this.earconNames||(this.earconNames=[],this.earconNames.push("ALERT_MODAL"),this.earconNames.push("ALERT_NONMODAL"),this.earconNames.push("BULLET"),this.earconNames.push("BUSY_PROGRESS_LOOP"),this.earconNames.push("BUSY_WORKING_LOOP"),this.earconNames.push("BUTTON"),this.earconNames.push("CHECK_OFF"),this.earconNames.push("CHECK_ON"),this.earconNames.push("COLLAPSED"),this.earconNames.push("EDITABLE_TEXT"),this.earconNames.push("ELLIPSIS"),
this.earconNames.push("EXPANDED"),this.earconNames.push("FONT_CHANGE"),this.earconNames.push("INVALID_KEYPRESS"),this.earconNames.push("LINK"),this.earconNames.push("LISTBOX"),this.earconNames.push("LIST_ITEM"),this.earconNames.push("NEW_MAIL"),this.earconNames.push("OBJECT_CLOSE"),this.earconNames.push("OBJECT_DELETE"),this.earconNames.push("OBJECT_DESELECT"),this.earconNames.push("OBJECT_ENTER"),this.earconNames.push("OBJECT_EXIT"),this.earconNames.push("OBJECT_OPEN"),this.earconNames.push("OBJECT_SELECT"),
this.earconNames.push("PARAGRAPH_BREAK"),this.earconNames.push("SEARCH_HIT"),this.earconNames.push("SEARCH_MISS"),this.earconNames.push("SECTION"),this.earconNames.push("SELECTION"),this.earconNames.push("SELECTION_REVERSE"),this.earconNames.push("TASK_SUCCESS"),this.earconNames.push("WRAP"),this.earconNames.push("WRAP_EDGE"));return this.earconNames[a]};
cvox.AbstractEarcons.prototype.getEarconId=function(a){this.earconNamesToIds||(this.earconNamesToIds={},this.earconNamesToIds.ALERT_MODAL=cvox.AbstractEarcons.ALERT_MODAL,this.earconNamesToIds.ALERT_NONMODAL=cvox.AbstractEarcons.ALERT_NONMODAL,this.earconNamesToIds.BULLET=cvox.AbstractEarcons.BULLET,this.earconNamesToIds.BUSY_PROGRESS_LOOP=cvox.AbstractEarcons.BUSY_PROGRESS_LOOP,this.earconNamesToIds.BUSY_WORKING_LOOP=cvox.AbstractEarcons.BUSY_WORKING_LOOP,this.earconNamesToIds.BUTTON=cvox.AbstractEarcons.BUTTON,
this.earconNamesToIds.CHECK_OFF=cvox.AbstractEarcons.CHECK_OFF,this.earconNamesToIds.CHECK_ON=cvox.AbstractEarcons.CHECK_ON,this.earconNamesToIds.COLLAPSED=cvox.AbstractEarcons.COLLAPSED,this.earconNamesToIds.EDITABLE_TEXT=cvox.AbstractEarcons.EDITABLE_TEXT,this.earconNamesToIds.ELLIPSIS=cvox.AbstractEarcons.ELLIPSIS,this.earconNamesToIds.EXPANDED=cvox.AbstractEarcons.EXPANDED,this.earconNamesToIds.FONT_CHANGE=cvox.AbstractEarcons.FONT_CHANGE,this.earconNamesToIds.INVALID_KEYPRESS=cvox.AbstractEarcons.INVALID_KEYPRESS,
this.earconNamesToIds.LINK=cvox.AbstractEarcons.LINK,this.earconNamesToIds.LISTBOX=cvox.AbstractEarcons.LISTBOX,this.earconNamesToIds.LIST_ITEM=cvox.AbstractEarcons.LIST_ITEM,this.earconNamesToIds.NEW_MAIL=cvox.AbstractEarcons.NEW_MAIL,this.earconNamesToIds.OBJECT_CLOSE=cvox.AbstractEarcons.OBJECT_CLOSE,this.earconNamesToIds.OBJECT_DELETE=cvox.AbstractEarcons.OBJECT_DELETE,this.earconNamesToIds.OBJECT_DESELECT=cvox.AbstractEarcons.OBJECT_DESELECT,this.earconNamesToIds.OBJECT_ENTER=cvox.AbstractEarcons.OBJECT_ENTER,
this.earconNamesToIds.OBJECT_EXIT=cvox.AbstractEarcons.OBJECT_EXIT,this.earconNamesToIds.OBJECT_OPEN=cvox.AbstractEarcons.OBJECT_OPEN,this.earconNamesToIds.OBJECT_SELECT=cvox.AbstractEarcons.OBJECT_SELECT,this.earconNamesToIds.PARAGRAPH_BREAK=cvox.AbstractEarcons.PARAGRAPH_BREAK,this.earconNamesToIds.SEARCH_HIT=cvox.AbstractEarcons.SEARCH_HIT,this.earconNamesToIds.SEARCH_MISS=cvox.AbstractEarcons.SEARCH_MISS,this.earconNamesToIds.SECTION=cvox.AbstractEarcons.SECTION,this.earconNamesToIds.SELECTION=
cvox.AbstractEarcons.SELECTION,this.earconNamesToIds.SELECTION_REVERSE=cvox.AbstractEarcons.SELECTION_REVERSE,this.earconNamesToIds.TASK_SUCCESS=cvox.AbstractEarcons.TASK_SUCCESS,this.earconNamesToIds.WRAP=cvox.AbstractEarcons.WRAP,this.earconNamesToIds.WRAP_EDGE=cvox.AbstractEarcons.WRAP_EDGE);return this.earconNamesToIds[a]};cvox.AbstractEarcons.ALERT_MODAL=0;cvox.AbstractEarcons.ALERT_NONMODAL=1;cvox.AbstractEarcons.BULLET=2;cvox.AbstractEarcons.BUSY_PROGRESS_LOOP=3;
cvox.AbstractEarcons.BUSY_WORKING_LOOP=4;cvox.AbstractEarcons.BUTTON=5;cvox.AbstractEarcons.CHECK_OFF=6;cvox.AbstractEarcons.CHECK_ON=7;cvox.AbstractEarcons.COLLAPSED=8;cvox.AbstractEarcons.EDITABLE_TEXT=9;cvox.AbstractEarcons.ELLIPSIS=10;cvox.AbstractEarcons.EXPANDED=11;cvox.AbstractEarcons.FONT_CHANGE=12;cvox.AbstractEarcons.INVALID_KEYPRESS=13;cvox.AbstractEarcons.LINK=14;cvox.AbstractEarcons.LISTBOX=15;cvox.AbstractEarcons.LIST_ITEM=16;cvox.AbstractEarcons.NEW_MAIL=17;
cvox.AbstractEarcons.OBJECT_CLOSE=18;cvox.AbstractEarcons.OBJECT_DELETE=19;cvox.AbstractEarcons.OBJECT_DESELECT=20;cvox.AbstractEarcons.OBJECT_ENTER=21;cvox.AbstractEarcons.OBJECT_EXIT=22;cvox.AbstractEarcons.OBJECT_OPEN=23;cvox.AbstractEarcons.OBJECT_SELECT=24;cvox.AbstractEarcons.PARAGRAPH_BREAK=25;cvox.AbstractEarcons.SEARCH_HIT=26;cvox.AbstractEarcons.SEARCH_MISS=27;cvox.AbstractEarcons.SECTION=28;cvox.AbstractEarcons.SELECTION=29;cvox.AbstractEarcons.SELECTION_REVERSE=30;
cvox.AbstractEarcons.TASK_SUCCESS=31;cvox.AbstractEarcons.WRAP=32;cvox.AbstractEarcons.WRAP_EDGE=33;cvox.AbstractEarcons.earconMap={};cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.ALERT_MODAL]="alert_modal.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.ALERT_NONMODAL]="alert_nonmodal.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.BULLET]="bullet.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.BUSY_PROGRESS_LOOP]="busy_progress_loop.ogg";
cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.BUSY_WORKING_LOOP]="busy_working_loop.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.BUTTON]="button.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.CHECK_OFF]="check_off.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.CHECK_ON]="check_on.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.COLLAPSED]="collapsed.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.EDITABLE_TEXT]="editable_text.ogg";
cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.ELLIPSIS]="ellipsis.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.EXPANDED]="expanded.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.FONT_CHANGE]="font_change.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.INVALID_KEYPRESS]="invalid_keypress.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.LINK]="link.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.LISTBOX]="listbox.ogg";
cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.LIST_ITEM]="bullet.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.NEW_MAIL]="new_mail.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.OBJECT_CLOSE]="object_close.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.OBJECT_DELETE]="object_delete.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.OBJECT_DESELECT]="object_deselect.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.OBJECT_ENTER]="object_enter.ogg";
cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.OBJECT_EXIT]="object_exit.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.OBJECT_OPEN]="object_open.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.OBJECT_SELECT]="object_select.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.PARAGRAPH_BREAK]="paragraph_break.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.SEARCH_HIT]="search_hit.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.SEARCH_MISS]="search_miss.ogg";
cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.SECTION]="section.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.SELECTION]="selection.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.SELECTION_REVERSE]="selection_reverse.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.TASK_SUCCESS]="task_success.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.WRAP]="wrap.ogg";cvox.AbstractEarcons.earconMap[cvox.AbstractEarcons.WRAP_EDGE]="wrap_edge.ogg";cvox.NodeStateUtil={};cvox.NodeStateUtil.expand=function(a){try{return a.map(function(a){if(1>a.length)throw Error("cvox.NodeState must have at least one entry");var b=a.slice(1).map(function(a){return"number"==typeof a?cvox.ChromeVox.msgs.getNumber(a):a});return cvox.ChromeVox.msgs.getMsg(a[0],b)}).join(" ")}catch(b){throw Error("error: "+b+" state: "+a);}};cvox.AriaUtil=function(){};cvox.AriaUtil.NO_ROLE_NAME=" ";
cvox.AriaUtil.WIDGET_ROLE_TO_NAME={alert:"aria_role_alert",alertdialog:"aria_role_alertdialog",button:"aria_role_button",checkbox:"aria_role_checkbox",columnheader:"aria_role_columnheader",combobox:"aria_role_combobox",dialog:"aria_role_dialog",grid:"aria_role_grid",gridcell:"aria_role_gridcell",link:"aria_role_link",listbox:"aria_role_listbox",log:"aria_role_log",marquee:"aria_role_marquee",menu:"aria_role_menu",menubar:"aria_role_menubar",menuitem:"aria_role_menuitem",menuitemcheckbox:"aria_role_menuitemcheckbox",
menuitemradio:"aria_role_menuitemradio",option:cvox.AriaUtil.NO_ROLE_NAME,progressbar:"aria_role_progressbar",radio:"aria_role_radio",radiogroup:"aria_role_radiogroup",rowheader:"aria_role_rowheader",scrollbar:"aria_role_scrollbar",slider:"aria_role_slider",spinbutton:"aria_role_spinbutton",status:"aria_role_status",tab:"aria_role_tab",tabpanel:"aria_role_tabpanel",textbox:"aria_role_textbox",timer:"aria_role_timer",toolbar:"aria_role_toolbar",tooltip:"aria_role_tooltip",treeitem:"aria_role_treeitem"};
cvox.AriaUtil.STRUCTURE_ROLE_TO_NAME={article:"aria_role_article",application:"aria_role_application",banner:"aria_role_banner",columnheader:"aria_role_columnheader",complementary:"aria_role_complementary",contentinfo:"aria_role_contentinfo",definition:"aria_role_definition",directory:"aria_role_directory",document:"aria_role_document",form:"aria_role_form",group:"aria_role_group",heading:"aria_role_heading",img:"aria_role_img",list:"aria_role_list",listitem:"aria_role_listitem",main:"aria_role_main",
math:"aria_role_math",navigation:"aria_role_navigation",note:"aria_role_note",region:"aria_role_region",rowheader:"aria_role_rowheader",search:"aria_role_search",separator:"aria_role_separator"};
cvox.AriaUtil.ATTRIBUTE_VALUE_TO_STATUS=[{name:"aria-autocomplete",values:{inline:"aria_autocomplete_inline",list:"aria_autocomplete_list",both:"aria_autocomplete_both"}},{name:"aria-checked",values:{"true":"aria_checked_true","false":"aria_checked_false",mixed:"aria_checked_mixed"}},{name:"aria-disabled",values:{"true":"aria_disabled_true"}},{name:"aria-expanded",values:{"true":"aria_expanded_true","false":"aria_expanded_false"}},{name:"aria-invalid",values:{"true":"aria_invalid_true",grammar:"aria_invalid_grammar",
spelling:"aria_invalid_spelling"}},{name:"aria-multiline",values:{"true":"aria_multiline_true"}},{name:"aria-multiselectable",values:{"true":"aria_multiselectable_true"}},{name:"aria-pressed",values:{"true":"aria_pressed_true","false":"aria_pressed_false",mixed:"aria_pressed_mixed"}},{name:"aria-readonly",values:{"true":"aria_readonly_true"}},{name:"aria-required",values:{"true":"aria_required_true"}},{name:"aria-selected",values:{"true":"aria_selected_true","false":"aria_selected_false"}}];
cvox.AriaUtil.isHiddenRecursive=function(a){if(cvox.AriaUtil.isHidden(a))return!0;for(a=a.parentElement;a;){if("true"==a.getAttribute("aria-hidden")&&"true"!=a.getAttribute("chromevoxignoreariahidden"))return!0;a=a.parentElement}return!1};cvox.AriaUtil.isHidden=function(a){return a.getAttribute&&"true"==a.getAttribute("aria-hidden")&&"true"!=a.getAttribute("chromevoxignoreariahidden")?!0:!1};
cvox.AriaUtil.isForcedVisibleRecursive=function(a){for(;a;){if(a.getAttribute&&a.hasAttribute("aria-hidden")&&"true"!=a.getAttribute("chromevoxignoreariahidden"))return"false"==a.getAttribute("aria-hidden");a=a.parentElement}return!1};cvox.AriaUtil.isLeafElement=function(a){a=a.getAttribute("role");return"img"==a||"progressbar"==a};cvox.AriaUtil.isDescendantOfRole=function(a,b){for(;a;){if(b&&a&&a.getAttribute("role")==b)return!0;a=a.parentNode}return!1};
cvox.AriaUtil.getRoleNameMsgForRole_=function(a){a=cvox.AriaUtil.WIDGET_ROLE_TO_NAME[a];return!a?null:a==cvox.AriaUtil.NO_ROLE_NAME?" ":a};cvox.AriaUtil.isButton=function(a){var b=cvox.AriaUtil.getRoleAttribute(a);return"button"==b||"BUTTON"==a.tagName?!0:"INPUT"==a.tagName?"submit"==a.type||"reset"==a.type||"button"==a.type:!1};
cvox.AriaUtil.getRoleNameMsg=function(a){var b;if(a&&a.getAttribute){var c=cvox.AriaUtil.getRoleAttribute(a);if("true"==a.getAttribute("aria-haspopup")&&cvox.AriaUtil.isButton(a))return"aria_role_popup_button";c&&((b=cvox.AriaUtil.getRoleNameMsgForRole_(c))||(b=cvox.AriaUtil.STRUCTURE_ROLE_TO_NAME[c]));if("menuitem"==c){for(a=a.parentElement;a&&(!a.getAttribute||!("menu"==cvox.AriaUtil.getRoleAttribute(a)||"menubar"==cvox.AriaUtil.getRoleAttribute(a)));)a=a.parentElement;a&&"menubar"==cvox.AriaUtil.getRoleAttribute(a)&&
(b=cvox.AriaUtil.getRoleNameMsgForRole_("menu"))}}b||(b="");return b};cvox.AriaUtil.getRoleName=function(a){var b=cvox.AriaUtil.getRoleNameMsg(a),b=cvox.ChromeVox.msgs.getMsg(b),c=cvox.AriaUtil.getRoleAttribute(a);"heading"==c&&a.hasAttribute("aria-level")&&(b+=" "+a.getAttribute("aria-level"));return b?b:""};
cvox.AriaUtil.getStateMsgs=function(a,b){var c=[];if(!a||!a.getAttribute)return c;for(var d=0,e;e=cvox.AriaUtil.ATTRIBUTE_VALUE_TO_STATUS[d];d++){var f=a.getAttribute(e.name);(e=e.values[f])&&c.push([e])}if("grid"==a.getAttribute("role"))return cvox.AriaUtil.getGridState_(a,a);e=cvox.AriaUtil.getRoleAttribute(a);"true"==a.getAttribute("aria-haspopup")&&("menuitem"==e?c.push(["has_submenu"]):cvox.AriaUtil.isButton(a)||c.push(["has_popup"]));if(d=a.getAttribute("aria-valuetext"))return c.push([d]),
c;var d=a.getAttribute("aria-valuenow"),f=a.getAttribute("aria-valuemin"),g=a.getAttribute("aria-valuemax");if(null!=d&&(null!=f&&null!=g)&&("scrollbar"==e||"progressbar"==e)){var h=Math.round(100*(d/(g-f)));c.push(["state_percent",h]);return c}null!=d&&c.push(["aria_value_now",d]);null!=f&&c.push(["aria_value_min",f]);null!=g&&c.push(["aria_value_max",g]);f=a;d=null;if(cvox.AriaUtil.isCompositeControl(f)&&b)d=cvox.AriaUtil.getActiveDescendant(f);else if(e=cvox.AriaUtil.getRoleAttribute(a),"option"==
e||"menuitem"==e||"menuitemcheckbox"==e||"menuitemradio"==e||"radio"==e||"tab"==e||"treeitem"==e){d=a;for(f=a.parentElement;f&&!cvox.AriaUtil.isCompositeControl(f)&&!((f=f.parentElement)&&"treeitem"==cvox.AriaUtil.getRoleAttribute(f)););}if(f&&(cvox.AriaUtil.isCompositeControl(f)||"treeitem"==cvox.AriaUtil.getRoleAttribute(f))&&d){e=cvox.AriaUtil.getRoleAttribute(f);var i;switch(e){case "combobox":case "listbox":i=["option"];break;case "menu":i=["menuitem","menuitemcheck","menuitemradio"];break;case "radiogroup":i=
["radio"];break;case "tablist":i=["tab"];break;case "tree":case "treegrid":case "treeitem":i=["treeitem"]}if(i){var j;e=parseInt(d.getAttribute("aria-setsize"),10);isNaN(e)||(h=e);e=parseInt(d.getAttribute("aria-posinset"),10);isNaN(e)||(j=e);if(void 0==h||void 0==j)if(i=cvox.AriaUtil.getNextLevel(f,i),void 0==h&&(h=i.length),void 0==j)for(e=0;e<i.length;e++)i[e]==d&&(j=e+1);j&&h&&c.push(["list_position",j,h])}}return c};
cvox.AriaUtil.getGridState_=function(a,b){var c=cvox.AriaUtil.getActiveDescendant(b);if(c)for(var d='*[role~="row"]',d=b.querySelectorAll(d),e=0;e<d.length;e++)for(var f=d[e].querySelectorAll('*[role~="gridcell"]'),g=0;g<f.length;g++)if(f[g]==c)return[["aria_role_gridcell_pos",e+1,g+1]];return[]};cvox.AriaUtil.getActiveDescendantId_=function(a){if(!a.getAttribute)return null;a=a.getAttribute("aria-activedescendant");return!a?null:a};
cvox.AriaUtil.getNextLevel=function(a,b){for(var c=[],d=a.childNodes,e=0;e<d.length;e++){var f=cvox.AriaUtil.getNextLevelItems(d[e],b);0<f.length&&(c=c.concat(f))}return c};cvox.AriaUtil.getNextLevelItems=function(a,b){if(1!=a.nodeType)return[];if(-1!=b.indexOf(cvox.AriaUtil.getRoleAttribute(a)))return[a];var c=a.childNodes,d=c.length;if(0==d)return[];for(var e=[],f=0;f<d;f++){var g=cvox.AriaUtil.getNextLevelItems(c[f],b);0<g.length&&(e=e.concat(g))}return e};
cvox.AriaUtil.getActiveDescendant=function(a){for(var b={},c=a;c;){var d=cvox.AriaUtil.getActiveDescendantId_(c);if(!d)break;if(d in b)return null;b[d]=!0;c=document.getElementById(d)}return c==a?null:c};cvox.AriaUtil.isControlWidget=function(a){if(a&&a.getAttribute)switch(a=cvox.AriaUtil.getRoleAttribute(a),a){case "button":case "checkbox":case "combobox":case "listbox":case "menu":case "menuitemcheckbox":case "menuitemradio":case "radio":case "slider":case "progressbar":case "scrollbar":case "spinbutton":case "tab":case "tablist":case "textbox":return!0}return!1};
cvox.AriaUtil.isCompositeControl=function(a){if(a&&a.getAttribute)switch(a=cvox.AriaUtil.getRoleAttribute(a),a){case "combobox":case "grid":case "listbox":case "menu":case "menubar":case "radiogroup":case "tablist":case "tree":case "treegrid":return!0}return!1};
cvox.AriaUtil.getAriaLive=function(a){if(!a.hasAttribute)return null;var b=a.getAttribute("aria-live");if("off"==b)return null;if(b)return b;a=cvox.AriaUtil.getRoleAttribute(a);switch(a){case "alert":return"assertive";case "log":case "status":return"polite";default:return null}};cvox.AriaUtil.getAriaAtomic=function(a){if(!a.hasAttribute)return!1;var b=a.getAttribute("aria-atomic");if(b)return"true"===b;a=cvox.AriaUtil.getRoleAttribute(a);return"alert"==a?!0:!1};
cvox.AriaUtil.getAriaBusy=function(a){return!a.hasAttribute?!1:(a=a.getAttribute("aria-busy"))?"true"===a:!1};cvox.AriaUtil.getAriaRelevant=function(a,b){if(!a.hasAttribute)return!1;var c;c=a.hasAttribute("aria-relevant")?a.getAttribute("aria-relevant"):"additions text";"all"==c&&(c="additions removals text");c=c.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").split(" ");return"all"==b?0<=c.indexOf("additions")&&0<=c.indexOf("text")&&0<=c.indexOf("removals"):0<=c.indexOf(b)};
cvox.AriaUtil.getLiveRegions=function(a){var b=[];if(a.querySelectorAll){var c=a.querySelectorAll('[role="alert"], [role="log"],  [role="marquee"], [role="status"], [role="timer"],  [aria-live]');if(c)for(var d=0;d<c.length;d++)b.push(c[d])}for(;a;){if(cvox.AriaUtil.getAriaLive(a)){b.push(a);break}a=a.parentElement}return b};cvox.AriaUtil.isLandmark=function(a){if(!a||!a.getAttribute)return!1;a=cvox.AriaUtil.getRoleAttribute(a);switch(a){case "application":case "banner":case "complementary":case "contentinfo":case "form":case "main":case "navigation":case "search":return!0}return!1};
cvox.AriaUtil.isGrid=function(a){if(!a||!a.getAttribute)return!1;a=cvox.AriaUtil.getRoleAttribute(a);switch(a){case "grid":case "treegrid":return!0}return!1};
cvox.AriaUtil.getEarcon=function(a){if(!a||!a.getAttribute)return null;var b=cvox.AriaUtil.getRoleAttribute(a);switch(b){case "button":return cvox.AbstractEarcons.BUTTON;case "checkbox":case "radio":case "menuitemcheckbox":case "menuitemradio":return a=a.getAttribute("aria-checked"),"true"==a?cvox.AbstractEarcons.CHECK_ON:cvox.AbstractEarcons.CHECK_OFF;case "combobox":case "listbox":return cvox.AbstractEarcons.LISTBOX;case "textbox":return cvox.AbstractEarcons.EDITABLE_TEXT;case "listitem":return cvox.AbstractEarcons.BULLET;
case "link":return cvox.AbstractEarcons.LINK}return null};cvox.AriaUtil.getRoleAttribute=function(a){if(!a.getAttribute)return"";var b=a.getAttribute("role");a.hasAttribute("chromevoxoriginalrole")&&(b=a.getAttribute("chromevoxoriginalrole"));return b};cvox.AriaUtil.isMath=function(a){if(!a||!a.getAttribute)return!1;a=cvox.AriaUtil.getRoleAttribute(a);return"math"==a};cvox.XpathUtil=function(){};cvox.XpathUtil.evalXPath=function(a,b){try{var c=b.ownerDocument.evaluate(a,b,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null)}catch(d){return[]}for(var e=[],f=c.iterateNext();f;f=c.iterateNext())e.push(f);return e};cvox.XpathUtil.getLeafNodes=function(a){try{var b=a.ownerDocument.evaluate(".//*[count(*)=0]",a,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null)}catch(c){return[]}a=[];for(var d=b.iterateNext();d;d=b.iterateNext())a.push(d);return a};
cvox.XpathUtil.xpathSupported=function(){return"undefined"==typeof XPathResult?!1:!0};cvox.DomUtil=function(){};
cvox.DomUtil.INPUT_TYPE_TO_INFORMATION_TABLE_MSG={button:"input_type_button",checkbox:"input_type_checkbox",color:"input_type_color",datetime:"input_type_datetime","datetime-local":"input_type_datetime_local",date:"input_type_date",email:"input_type_email",file:"input_type_file",image:"input_type_image",month:"input_type_month",number:"input_type_number",password:"input_type_password",radio:"input_type_radio",range:"input_type_range",reset:"input_type_reset",search:"input_type_search",submit:"input_type_submit",
tel:"input_type_tel",text:"input_type_text",url:"input_type_url",week:"input_type_week"};
cvox.DomUtil.TAG_TO_INFORMATION_TABLE_VERBOSE_MSG={A:"tag_link",BUTTON:"tag_button",H1:"tag_h1",H2:"tag_h2",H3:"tag_h3",H4:"tag_h4",H5:"tag_h5",H6:"tag_h6",LI:"tag_li",OL:"tag_ol",SELECT:"tag_select",TEXTAREA:"tag_textarea",UL:"tag_ul",SECTION:"tag_section",NAV:"tag_nav",ARTICLE:"tag_article",ASIDE:"tag_aside",HGROUP:"tag_hgroup",HEADER:"tag_header",FOOTER:"tag_footer",TIME:"tag_time",MARK:"tag_mark",AUDIO:"tag_audio",VIDEO:"tag_video"};
cvox.DomUtil.TAG_TO_INFORMATION_TABLE_BRIEF_MSG={BUTTON:"tag_button",SELECT:"tag_select",TEXTAREA:"tag_textarea",AUDIO:"tag_audio",VIDEO:"tag_video"};
cvox.DomUtil.isVisible=function(a,b){b=b||{};"undefined"===typeof b.checkAncestors&&(b.checkAncestors=!0);"undefined"===typeof b.checkDescendants&&(b.checkDescendants=!0);if(cvox.AriaUtil.isForcedVisibleRecursive(a))return!0;if(b.checkAncestors&&cvox.DomUtil.hasInvisibleAncestor_(a))return!1;var c=b.checkDescendants;return cvox.DomUtil.hasVisibleNodeSubtree_(a,c)?!0:!1};
cvox.DomUtil.hasInvisibleAncestor_=function(a){for(;a=a.parentElement;){var b=document.defaultView.getComputedStyle(a,null);if(cvox.DomUtil.isInvisibleStyle(b,!0))return!0}return!1};
cvox.DomUtil.hasVisibleNodeSubtree_=function(a,b){if(!(a instanceof Element)){var c=document.defaultView.getComputedStyle(a.parentElement,null);return c=!cvox.DomUtil.isInvisibleStyle(c)}var c=document.defaultView.getComputedStyle(a,null),d=!cvox.DomUtil.isInvisibleStyle(c);if(d)return!0;c=cvox.DomUtil.isInvisibleStyle(c,!0);if(!b||c)return!1;c=a.childNodes;for(d=0;d<c.length;d++){var e=c[d];if(cvox.DomUtil.hasVisibleNodeSubtree_(e,b))return!0}return!1};
cvox.DomUtil.isInvisibleStyle=function(a,b){return!a?!1:"none"==a.display||0==parseFloat(a.opacity)||!b&&("hidden"==a.visibility||"collapse"==a.visibility)?!0:!1};cvox.DomUtil.isDisabled=function(a){if(a.disabled)return!0;for(;a=a.parentElement;)if("FIELDSET"==a.tagName&&a.disabled)return!0;return!1};cvox.DomUtil.isSemanticElt=function(a){return a.tagName&&(a=a.tagName,"SECTION"==a||"NAV"==a||"ARTICLE"==a||"ASIDE"==a||"HGROUP"==a||"HEADER"==a||"FOOTER"==a||"TIME"==a||"MARK"==a)?!0:!1};
cvox.DomUtil.isLeafNode=function(a){if(!(a instanceof Element))return null==a.firstChild;if(!cvox.DomUtil.isVisible(a,{checkAncestors:!1})||cvox.AriaUtil.isHidden(a)||cvox.AriaUtil.isLeafElement(a))return!0;switch(a.tagName){case "OBJECT":case "EMBED":case "VIDEO":case "AUDIO":case "IFRAME":case "FRAME":return!0}return"A"==a.tagName&&a.getAttribute("href")||cvox.DomUtil.isLeafLevelControl(a)||!a.firstChild?!0:!1};
cvox.DomUtil.isDescendantOf=function(a,b,c){for(;a;){if(b&&c&&a.tagName&&a.tagName==b&&a.className&&a.className==c||b&&!c&&a.tagName&&a.tagName==b||!b&&c&&a.className&&a.className==c)return!0;a=a.parentNode}return!1};cvox.DomUtil.isDescendantOfNode=function(a,b){for(;a&&b;){if(a.isSameNode(b))return!0;a=a.parentNode}return!1};cvox.DomUtil.collapseWhitespace=function(a){return a.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")};
cvox.DomUtil.getBaseLabel_=function(a,b,c){var d="";if(a.hasAttribute){if(a.hasAttribute("aria-labelledby"))for(var e=a.getAttribute("aria-labelledby").split(" "),f,g=0;f=e[g];g++)(f=document.getElementById(f))&&(d+=" "+cvox.DomUtil.getName(f,!0,c));else if(a.hasAttribute("aria-label"))d=a.getAttribute("aria-label");else if(a.constructor==HTMLImageElement)d=cvox.DomUtil.getImageTitle(a);else if(a.hasAttribute("title"))d=a.getAttribute("title");else if("FIELDSET"==a.tagName){e=a.getElementsByTagName("LEGEND");
d="";for(g=0;f=e[g];g++)d+=" "+cvox.DomUtil.getName(f,!0,c)}0==d.length&&a&&a.id&&(a=document.querySelector('label[for="'+a.id+'"]'))&&(d=cvox.DomUtil.getName(a,b,c))}return cvox.DomUtil.collapseWhitespace(d)};cvox.DomUtil.getNearestAncestorLabel_=function(a){for(var b="";a&&"LABEL"!=a.tagName;)a=a.parentElement;a&&!a.hasAttribute("for")&&(b=cvox.DomUtil.getName(a,!0,!1));return b};
cvox.DomUtil.getInputName_=function(a){var b="";"image"==a.type?b=cvox.DomUtil.getImageTitle(a):"submit"==a.type?b=a.hasAttribute("value")?a.getAttribute("value"):"Submit":"reset"==a.type&&(b=a.hasAttribute("value")?a.getAttribute("value"):"Reset");return b};cvox.DomUtil.getName=function(a,b,c){if(!0==a.cvoxGetNameMarked)return"";a.cvoxGetNameMarked=!0;b=cvox.DomUtil.getName_(a,b,c);a.cvoxGetNameMarked=!1;return b};
cvox.DomUtil.hasChildrenBasedName_=function(a){return"A"==a.tagName||"BUTTON"==a.tagName||cvox.AriaUtil.isControlWidget(a)||!cvox.DomUtil.isLeafNode(a)?!0:!1};
cvox.DomUtil.getName_=function(a,b,c){"undefined"===typeof b&&(b=!0);"undefined"===typeof c&&(c=!0);if(a.constructor==Text)return a.data;var d=cvox.DomUtil.getBaseLabel_(a,b,c);0==d.length&&cvox.DomUtil.isControl(a)&&(d=cvox.DomUtil.getNearestAncestorLabel_(a));0==d.length&&a.constructor==HTMLInputElement&&(d=cvox.DomUtil.getInputName_(a));return cvox.DomUtil.isInputTypeText(a)&&a.hasAttribute("placeholder")?(a=a.getAttribute("placeholder"),0<d.length?d+" with hint "+a:a):0<d.length?d:!b||cvox.AriaUtil.isCompositeControl(a)?
"":cvox.DomUtil.hasChildrenBasedName_(a)?cvox.DomUtil.getNameFromChildren(a,c):""};cvox.DomUtil.getNameFromChildren=function(a,b){void 0==b&&(b=!0);for(var c="",d="",e=0;e<a.childNodes.length;e++){var f=a.childNodes[e],d=a.childNodes[e-1]||f;if(b||!cvox.DomUtil.isControl(f)){var g=cvox.DomUtil.isVisible(f,{checkAncestors:!1});g&&!cvox.AriaUtil.isHidden(f)&&(d="SPAN"==d.tagName||"SPAN"==f.tagName||"SPAN"==f.parentNode.tagName?"":" ",c+=d+cvox.DomUtil.getName(f,!0,b))}}return c};
cvox.DomUtil.getControlLabelHeuristics=function(a){if(a.hasAttribute&&(a.hasAttribute("aria-label")&&""==a.getAttribute("aria-label")||a.hasAttribute("aria-title")&&""==a.getAttribute("aria-title")))return"";for(var b=cvox.DomUtil.previousLeafNode(a),c=0;b&&(!cvox.DomUtil.hasContent(b)||cvox.DomUtil.isControl(b));)b=cvox.DomUtil.previousLeafNode(b),c++;for(var c=cvox.DomUtil.directedNextLeafNode(a),d=0;c&&(!cvox.DomUtil.hasContent(c)||cvox.DomUtil.isControl(c));)c=cvox.DomUtil.directedNextLeafNode(c),
d++;if(b&&c){for(var d=a,e=0;d&&!cvox.DomUtil.isDescendantOfNode(b,d);)d=d.parentNode,e++;d=a;for(a=0;d&&!cvox.DomUtil.isDescendantOfNode(c,d);)d=d.parentNode,a++;b=a<e?c:b}else b=b||c;return b?cvox.DomUtil.collapseWhitespace(cvox.DomUtil.getValue(b)+" "+cvox.DomUtil.getName(b)):""};
cvox.DomUtil.getValue=function(a){var b=cvox.AriaUtil.getActiveDescendant(a);if(b)return cvox.DomUtil.collapseWhitespace(cvox.DomUtil.getValue(b)+" "+cvox.DomUtil.getName(b));if(a.constructor==HTMLSelectElement)return 0<=a.selectedIndex&&a.selectedIndex<a.options.length?a.options[a.selectedIndex].text+"":"";if(a.constructor==HTMLTextAreaElement)return a.value;if(a.constructor==HTMLInputElement)switch(a.type){case "hidden":case "image":case "submit":case "reset":case "checkbox":case "radio":return"";
case "password":return a.value.replace(/./g,"dot ");default:return a.value}return a.isContentEditable?cvox.DomUtil.getNameFromChildren(a,!0):""};cvox.DomUtil.getImageTitle=function(a){a.hasAttribute("alt")?a=a.alt:a.hasAttribute("title")?a=a.title:(a=a.src,"data"!=a.substring(0,4)?(a=a.substring(a.lastIndexOf("/")+1,a.lastIndexOf(".")),a=1<=a.length&&16>=a.length?a+" Image":"Image"):a="Image");return a};
cvox.DomUtil.hasContent=function(a){if(8==a.nodeType||cvox.DomUtil.isDescendantOf(a,"HEAD")||cvox.DomUtil.isDescendantOf(a,"SCRIPT")||cvox.DomUtil.isDescendantOf(a,"NOSCRIPT")||cvox.DomUtil.isDescendantOf(a,"NOEMBED")||cvox.DomUtil.isDescendantOf(a,"STYLE")||!cvox.DomUtil.isVisible(a)||cvox.AriaUtil.isHidden(a))return!1;if(cvox.DomUtil.isControl(a)||cvox.DomUtil.isDescendantOf(a,"VIDEO")||cvox.DomUtil.isDescendantOf(a,"AUDIO")||"IFRAME"==a.tagName&&a.src&&0!=a.src.indexOf("javascript:"))return!0;
for(var b="button,input,select,textarea",c=a.parentElement;c&&"LABEL"!=c.tagName;)c=c.parentElement;if(c){var d=c.querySelector(b);if(c.hasAttribute("for")){if(c=c.getAttribute("for"),(c=document.getElementById(c))&&cvox.DomUtil.isControl(c)&&!d)return!1}else if(d)return!1}for(d=a.parentElement;d&&"LEGEND"!=d.tagName;)d=d.parentElement;if(d){for(c=d.parentElement;c&&"FIELDSET"!=c.tagName;)c=c.parentElement;d=c&&c.querySelector(b);if(c&&!d)return!1}if("A"==a.tagName&&a.getAttribute("href")&&""!=a.getAttribute("href"))return!0;
b=cvox.DomUtil.getValue(a)+" "+cvox.DomUtil.getName(a);a=cvox.DomUtil.getState(a,!0);return b.match(/^\s+$/)&&""===a?!1:!0};cvox.DomUtil.getAncestors=function(a){for(var b=[];a;)b.push(a),a=a.parentNode;for(b.reverse();b.length&&!b[0].tagName&&!b[0].nodeValue;)b.shift();return b};cvox.DomUtil.compareAncestors=function(a,b){for(var c=0;a[c]&&b[c]&&a[c]==b[c];)c++;!a[c]&&!b[c]&&(c=-1);return c};
cvox.DomUtil.getUniqueAncestors=function(a,b){var c=cvox.DomUtil.getAncestors(a),d=cvox.DomUtil.getAncestors(b),c=cvox.DomUtil.compareAncestors(c,d);return d.slice(c)};
cvox.DomUtil.getRoleMsg=function(a,b){var c;c=cvox.AriaUtil.getRoleNameMsg(a);c||("INPUT"==a.tagName?c=cvox.DomUtil.INPUT_TYPE_TO_INFORMATION_TABLE_MSG[a.type]:"A"==a.tagName&&cvox.DomUtil.isInternalLink(a)?c="internal_link":"A"==a.tagName&&a.getAttribute("name")?c="":a.isContentEditable?c="input_type_text":b==cvox.VERBOSITY_BRIEF?c=cvox.DomUtil.TAG_TO_INFORMATION_TABLE_BRIEF_MSG[a.tagName]:(c=cvox.DomUtil.TAG_TO_INFORMATION_TABLE_VERBOSE_MSG[a.tagName],!c&&a.onclick&&(c="clickable")));return c};
cvox.DomUtil.getRole=function(a,b){var c=cvox.DomUtil.getRoleMsg(a,b)||"",d=c&&" "!=c?cvox.ChromeVox.msgs.getMsg(c):"";return d?d:c};cvox.DomUtil.getListLength=function(a){var b=0;for(a=a.firstChild;a;a=a.nextSibling)if("LI"==a.tagName||a.getAttribute&&"listitem"==a.getAttribute("role")){if(a.hasAttribute("aria-setsize")){var c=parseInt(a.getAttribute("aria-setsize"),10);if(!isNaN(c))return c}b++}return b};
cvox.DomUtil.getStateMsgs=function(a,b){var c=cvox.AriaUtil.getActiveDescendant(a);if(c)return cvox.DomUtil.getStateMsgs(c,b);var c=[],d=a.getAttribute?a.getAttribute("role"):"";(c=cvox.AriaUtil.getStateMsgs(a,b))||(c=[]);"INPUT"==a.tagName?(d={"checkbox-true":"checkbox_checked_state","checkbox-false":"checkbox_unchecked_state","radio-true":"radio_selected_state","radio-false":"radio_unselected_state"},(d=d[a.type+"-"+!!a.checked])&&c.push([d])):"SELECT"==a.tagName?c.push(["list_position",cvox.ChromeVox.msgs.getNumber(a.selectedIndex+
1),cvox.ChromeVox.msgs.getNumber(a.options.length)]):"UL"==a.tagName||"OL"==a.tagName||"list"==d?c.push(["list_with_items",cvox.ChromeVox.msgs.getNumber(cvox.DomUtil.getListLength(a))]):"MATH"==a.tagName&&c.push(["math_expr"]);cvox.DomUtil.isDisabled(a)&&c.push(["aria_disabled_true"]);return c};cvox.DomUtil.getState=function(a,b){return cvox.NodeStateUtil.expand(cvox.DomUtil.getStateMsgs(a,b))};
cvox.DomUtil.isFocusable=function(a){return!a||"number"!=typeof a.tabIndex||"A"==a.tagName&&!a.hasAttribute("href")&&!a.hasAttribute("tabindex")?!1:0<=a.tabIndex||a.hasAttribute&&a.hasAttribute("tabindex")&&"-1"==a.getAttribute("tabindex")?!0:!1};cvox.DomUtil.findFocusableDescendant=function(a){return a&&(a=cvox.DomUtil.findNode(a,cvox.DomUtil.isFocusable))?a:null};cvox.DomUtil.countFocusableDescendants=function(a){return a?cvox.DomUtil.countNodes(a,cvox.DomUtil.isFocusable):0};
cvox.DomUtil.isAttachedToDocument=function(a){for(;a;){if(a.tagName&&"HTML"==a.tagName)return!0;a=a.parentNode}return!1};
cvox.DomUtil.clickElem=function(a,b){if("A"!=a.tagName&&1==a.nodeType){var c=a.getElementsByTagName("A");0<c.length&&(a=c[0])}c=document.createEvent("MouseEvents");c.initMouseEvent("mousedown",!0,!0,document.defaultView,1,0,0,0,0,!1,!1,b,!1,0,null);try{a.dispatchEvent(c)}catch(d){}c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,document.defaultView,1,0,0,0,0,!1,!1,b,!1,0,null);try{a.dispatchEvent(c)}catch(e){}c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,
!0,document.defaultView,1,0,0,0,0,!1,!1,b,!1,0,null);c.fromCvox=!0;try{a.dispatchEvent(c)}catch(f){}cvox.DomUtil.isInternalLink(a)&&cvox.DomUtil.skipLinkSync(a)};cvox.DomUtil.skipLinkSync=function(a){a=a.getAttribute("href").substring(1);var b=cvox.XpathUtil.evalXPath('//a[@name="'+a+'"]',document.body)[0];if(a=void 0!=b?b:document.getElementById(a)){cvox.ChromeVox.syncToNode(a,!0);var b=a.parentNode,c=document.createElement("div");c.setAttribute("tabindex","-1");b.insertBefore(c,a);c.focus()}};
cvox.DomUtil.isInputTypeText=function(a){if(!a||a.constructor!=HTMLInputElement)return!1;switch(a.type){case "email":case "number":case "password":case "search":case "text":case "tel":case "url":case "":return!0;default:return!1}};cvox.DomUtil.isControl=function(a){if(cvox.AriaUtil.isControlWidget(a)&&cvox.DomUtil.isFocusable(a))return!0;if(a.tagName)switch(a.tagName){case "BUTTON":case "TEXTAREA":case "SELECT":return!0;case "INPUT":return"hidden"!=a.type}return a.isContentEditable?!0:!1};
cvox.DomUtil.isLeafLevelControl=function(a){return cvox.DomUtil.isControl(a)?!(cvox.AriaUtil.isCompositeControl(a)&&cvox.DomUtil.findFocusableDescendant(a)):!1};cvox.DomUtil.getSurroundingControl=function(a){var b=null;if(!cvox.DomUtil.isControl(a)&&a.hasAttribute&&a.hasAttribute("role"))for(b=a.parentElement;b&&!cvox.AriaUtil.isCompositeControl(b);)b=b.parentElement;return b};
cvox.DomUtil.directedNextLeafLikeNode=function(a,b,c){if(a!=document.body){for(;!cvox.DomUtil.directedNextSibling(a,b);){if(!a)return null;a=a.parentNode;if(a==document.body)return null}cvox.DomUtil.directedNextSibling(a,b)&&(a=cvox.DomUtil.directedNextSibling(a,b))}for(;cvox.DomUtil.directedFirstChild(a,b)&&!c(a);)a=cvox.DomUtil.directedFirstChild(a,b);return a==document.body?null:a};cvox.DomUtil.directedNextLeafNode=function(a,b){b=!!b;return cvox.DomUtil.directedNextLeafLikeNode(a,b,cvox.DomUtil.isLeafNode)};
cvox.DomUtil.previousLeafNode=function(a){return cvox.DomUtil.directedNextLeafNode(a,!0)};cvox.DomUtil.directedFindFirstNode=function(a,b,c){for(a=cvox.DomUtil.directedFirstChild(a,b);a;){if(c(a))return a;var d=cvox.DomUtil.directedFindFirstNode(a,b,c);if(d)return d;a=cvox.DomUtil.directedNextSibling(a,b)}return null};cvox.DomUtil.directedFindDeepestNode=function(a,b,c){var d=cvox.DomUtil.directedFindFirstNode(a,b,c);return d?cvox.DomUtil.directedFindDeepestNode(d,b,c):c(a)?a:null};
cvox.DomUtil.directedFindNextNode=function(a,b,c,d,e,f){e=!!e;f=!!f;if(!cvox.DomUtil.isDescendantOfNode(a,b)||a==b)return null;for(var g=cvox.DomUtil.directedNextSibling(a,c);g;){if(!f&&d(g))return g;var h=(f?cvox.DomUtil.directedFindDeepestNode:cvox.DomUtil.directedFindFirstNode)(g,c,d);if(h)return h;if(f&&d(g))return g;g=cvox.DomUtil.directedNextSibling(g,c)}a=a.parentNode;return e&&d(a)?a:cvox.DomUtil.directedFindNextNode(a,b,c,d,e,f)};
cvox.DomUtil.getControlValueAndStateString=function(a){var b=cvox.DomUtil.getSurroundingControl(a);return b?cvox.DomUtil.collapseWhitespace(cvox.DomUtil.getValue(a)+" "+cvox.DomUtil.getName(a)+" "+cvox.DomUtil.getState(a,!0)):cvox.DomUtil.collapseWhitespace(cvox.DomUtil.getValue(a)+" "+cvox.DomUtil.getState(a,!0))};cvox.DomUtil.isInternalLink=function(a){if(1==a.nodeType){var b=a.getAttribute("href");if(b)return 0==a.getAttribute("href").indexOf("#")}return!1};
cvox.DomUtil.getLinkURL=function(a){if("A"==a.tagName){if(a.getAttribute("href"))return cvox.DomUtil.isInternalLink(a)?cvox.ChromeVox.msgs.getMsg("internal_link"):a.getAttribute("href")}else if(cvox.AriaUtil.getRoleName(a)==cvox.ChromeVox.msgs.getMsg("aria_role_link"))return cvox.ChromeVox.msgs.getMsg("unknown_link");return""};cvox.DomUtil.getContainingTable=function(a,b){var c=cvox.DomUtil.getAncestors(a);return cvox.DomUtil.findTableNodeInList(c,b)};
cvox.DomUtil.findTableNodeInList=function(a,b){b=b||{allowCaptions:!1};for(var c=a.length-1,d;d=a[c];c--)if(d.constructor!=Text){if(!b.allowCaptions&&"CAPTION"==d.tagName)break;if("TABLE"==d.tagName||cvox.AriaUtil.isGrid(d))return d}return null};
cvox.DomUtil.isLayoutTable=function(a){if(a.rows&&(1==a.rows.length||1==a.rows[0].childElementCount))return!0;if(cvox.AriaUtil.isGrid(a)||cvox.AriaUtil.isLandmark(a)||(a.caption||a.summary)||0<cvox.XpathUtil.evalXPath("tbody/tr/th",a).length&&0<cvox.XpathUtil.evalXPath("tbody/tr/td",a).length||0<cvox.XpathUtil.evalXPath("colgroup",a).length||0<cvox.XpathUtil.evalXPath("thead",a).length||0<cvox.XpathUtil.evalXPath("tfoot",a).length)return!1;if(0<cvox.XpathUtil.evalXPath("tbody/tr/td/embed",a).length||
0<cvox.XpathUtil.evalXPath("tbody/tr/td/object",a).length||0<cvox.XpathUtil.evalXPath("tbody/tr/td/iframe",a).length||0<cvox.XpathUtil.evalXPath("tbody/tr/td/applet",a).length)return!0;var b=0;cvox.DomUtil.hasBorder(a)||b++;6>=a.rows.length&&b++;12>=cvox.DomUtil.countPreviousTags(a)&&b++;0<cvox.XpathUtil.evalXPath("tbody/tr/td/table",a).length&&b++;return 3<=b};cvox.DomUtil.countPreviousTags=function(a){var b=cvox.DomUtil.getAncestors(a);return b.length+cvox.DomUtil.countPreviousSiblings(a)};
cvox.DomUtil.countPreviousSiblings=function(a){var b=0;for(a=a.previousSibling;null!=a;)a.constructor!=Text&&b++,a=a.previousSibling;return b};cvox.DomUtil.hasBorder=function(a){return a.frame?-1==a.frame.indexOf("void"):a.border?1==a.border.length?"0"!=a.border:0!=a.border.slice(0,-2):a.style.borderStyle&&"none"==a.style.borderStyle?!1:a.style.borderWidth?0!=a.style.borderWidth.slice(0,-2):a.style.borderColor?!0:!1};
cvox.DomUtil.getFirstLeafNode=function(){for(var a=document.body;a&&a.firstChild;)a=a.firstChild;for(;a&&!cvox.DomUtil.hasContent(a);)a=cvox.DomUtil.directedNextLeafNode(a);return a};cvox.DomUtil.findNode=function(a,b){var c=[],d=cvox.DomUtil.findNodes_(a,b,c,!0,1E4);return d?c[0]:void 0};cvox.DomUtil.countNodes=function(a,b){var c=[];cvox.DomUtil.findNodes_(a,b,c,!1,1E4);return c.length};
cvox.DomUtil.findNodes_=function(a,b,c,d,e){if(null!=a||0==e)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d))return!0;e-=1;if(cvox.DomUtil.findNodes_(a,b,c,d,e))return!0;a=a.nextSibling}return!1};cvox.DomUtil.toArray=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b};
cvox.DomUtil.shallowChildlessClone=function(a,b){if("#text"==a.nodeName)return document.createTextNode(a.nodeValue);if("#comment"==a.nodeName)return document.createComment(a.nodeValue);for(var c=document.createElement(a.nodeName),d=0;d<a.attributes.length;++d){var e=a.attributes[d];(!b||!b[e.nodeName])&&c.setAttribute(e.nodeName,e.nodeValue)}return c};
cvox.DomUtil.deepClone=function(a,b){for(var c=cvox.DomUtil.shallowChildlessClone(a,b),d=0;d<a.childNodes.length;++d)c.appendChild(cvox.DomUtil.deepClone(a.childNodes[d],b));return c};cvox.DomUtil.directedFirstChild=function(a,b){return b?a.lastChild:a.firstChild};cvox.DomUtil.directedNextSibling=function(a,b){return!a?null:b?a.previousSibling:a.nextSibling};cvox.DomUtil.createSimpleClickFunction=function(a){var b=a.cloneNode(!0);return function(){cvox.DomUtil.clickElem(b,!1)}};
cvox.DomUtil.addNodeToHead=function(a,b){if(!b||!document.getElementById(b)){var c=document.head||document.body;c.appendChild(a)}};cvox.DomUtil.getContainingMath=function(a,b){var c=cvox.DomUtil.getAncestors(a);return cvox.DomUtil.findMathNodeInList(c,b)};cvox.DomUtil.findMathNodeInList=function(a){for(var b=0,c;c=a[b];b++)if(c.tagName&&("math"==c.tagName.toLowerCase()||cvox.AriaUtil.isMath(c)))return c;return null};cvox.SelectionUtil=function(){};cvox.SelectionUtil.cleanUpParagraphForward=function(a){for(;3==a.focusNode.nodeType;){var b=a.focusNode,c=a.focusOffset;a.modify("extend","forward","sentence");if(b==a.focusNode&&c==a.focusOffset)return!1}return!0};cvox.SelectionUtil.cleanUpParagraphBack=function(a){for(var b,c;3==a.focusNode.nodeType&&!(b=a.focusNode,c=a.focusOffset,a.modify("extend","backward","sentence"),b==a.focusNode&&c==a.focusOffset););return!0};
cvox.SelectionUtil.cleanUpSentence=function(a){for(var b=!0;b;)if(3==a.focusNode.nodeType){var c=a.focusNode,d=a.focusOffset;if(0<a.rangeCount&&0<a.getRangeAt(0).endOffset)if("."==c.substringData(a.getRangeAt(0).endOffset-1,1))break;else if(" "==c.substringData(a.getRangeAt(0).endOffset-1,1))break;else{if(a.modify("extend","forward","sentence"),c==a.focusNode&&d==a.focusOffset)return!1}else break}else break;return!0};
cvox.SelectionUtil.findSelPosition=function(a){if(0==a.rangeCount)return[0,0];var b=a.getRangeAt(0).getBoundingClientRect();if(!b)return[0,0];a=window.pageYOffset+b.top;b=window.pageXOffset+b.left;return[a,b]};cvox.SelectionUtil.findTopLeftPosition=function(a){var b=0,c=0;if(a.offsetParent){b=a.offsetLeft;c=a.offsetTop;for(a=a.offsetParent;null!==a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent}return[c,b]};
cvox.SelectionUtil.isSelectionValid=function(a){var b=RegExp(/^\s+$/);return!(b.test(a.toString())||""==a.toString())};cvox.SelectionUtil.isRangeValid=function(a){a=a.cloneContents().textContent;var b=RegExp(/^\s+$/);return!(b.test(a)||""==a)};cvox.SelectionUtil.findPos_=function(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return[b,c]};
cvox.SelectionUtil.scrollElementsToView=function(a){for(;a&&!a.getBoundingClientRect;)a=a.parentElement;if(a){for(var b=a,c=b.parentElement;b!=document.body&&c;)b.scrollTop=b.offsetTop,b.scrollLeft=b.offsetLeft,b=c,c=b.parentElement;a=cvox.SelectionUtil.findPos_(a);window.scrollTo(a[0]-window.innerWidth/2,a[1]-window.innerHeight/2)}};
cvox.SelectionUtil.scrollToSelection=function(a){if(0!=a.rangeCount){cvox.SelectionUtil.scrollElementsToView(a.focusNode);var b=cvox.SelectionUtil.findSelPosition(a);a=b[0];var b=b[1],c=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,d=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e=window.innerWidth||document.documentElement.innerWidth||document.body.clientWidth;b<e&&(b=0);c+d<a?(a-=d,window.scroll(b,a+100)):a<c&&window.scroll(b,
a-100)}};cvox.SelectionUtil.isAllWs=function(a){return!/[^\t\n\r ]/.test(a.data)};cvox.SelectionUtil.isIgnorable=function(a){return 8==a.nodeType||3==a.nodeType&&cvox.SelectionUtil.isAllWs(a)};cvox.SelectionUtil.nodeBefore=function(a){for(;a=a.previousSibling;)if(!cvox.SelectionUtil.isIgnorable(a))return a;return null};cvox.SelectionUtil.nodeAfter=function(a){for(;a=a.nextSibling;)if(!cvox.SelectionUtil.isIgnorable(a))return a;return null};
cvox.SelectionUtil.lastChildNode=function(a){for(a=a.lastChild;a;){if(!cvox.SelectionUtil.isIgnorable(a))return a;a=a.previousSibling}return null};cvox.SelectionUtil.firstChildNode=function(a){for(a=a.firstChild;a;){if(!cvox.SelectionUtil.isIgnorable(a))return a;a=a.nextSibling}return null};cvox.SelectionUtil.dataOf=function(a){a=a.data;a=a.replace(/[\t\n\r ]+/g," ");" "==a.charAt(0)&&(a=a.substring(1,a.length));" "==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));return a};
cvox.SelectionUtil.hasContentWithTag=function(a,b){if(!a||!a.anchorNode||!a.focusNode)return!1;if(a.anchorNode.tagName&&a.anchorNode.tagName==b||a.focusNode.tagName&&a.focusNode.tagName==b||a.anchorNode.parentNode.tagName&&a.anchorNode.parentNode.tagName==b||a.focusNode.parentNode.tagName&&a.focusNode.parentNode.tagName==b)return!0;var c=a.getRangeAt(0).cloneContents(),d=document.createElement("span");d.appendChild(c);return 0<d.getElementsByTagName(b).length};
cvox.SelectionUtil.selectText=function(a,b,c){var d=document.createRange();d.setStart(a,b);d.setEnd(a,c);a=window.getSelection();a.removeAllRanges();a.addRange(d)};cvox.SelectionUtil.selectAllTextInNode=function(a){var b=document.createRange();b.setStart(a,0);b.setEndAfter(a);a=window.getSelection();a.removeAllRanges();a.addRange(b)};
cvox.SelectionUtil.collapseToStart=function(a){var b=window.getSelection(),c=b.anchorNode,d=b.anchorOffset;null==c&&(c=a,d=0);a=document.createRange();a.setStart(c,d);a.setEnd(c,d);b.removeAllRanges();b.addRange(a)};cvox.SelectionUtil.collapseToEnd=function(a){var b=window.getSelection(),c=b.focusNode,d=b.focusOffset;null==c&&(c=a,d=0);a=document.createRange();a.setStart(c,d);a.setEnd(c,d);b.removeAllRanges();b.addRange(a)};
cvox.SelectionUtil.getText=function(){var a=window.getSelection();if(cvox.SelectionUtil.hasContentWithTag(a,"IMG")){var b="",a=a.getRangeAt(0).cloneContents(),c=document.createElement("span");c.appendChild(a);for(var a=cvox.XpathUtil.getLeafNodes(c),c=0,d;d=a[c];c++)b=b+" "+cvox.DomUtil.getName(d);return b}return this.getSelectionText_()};cvox.SelectionUtil.getSelectionText_=function(){return""+window.getSelection()};
cvox.SelectionUtil.getRangeText=function(a){return a?a.cloneContents().textContent.replace(/\s+/g," "):""};cvox.DomPredicates={};cvox.DomPredicates.checkboxPredicate=function(a){for(var b=0;b<a.length;b++)if(a[b].getAttribute&&"checkbox"==a[b].getAttribute("role")||"INPUT"==a[b].tagName&&"checkbox"==a[b].type)return a[b];return null};cvox.DomPredicates.radioPredicate=function(a){for(var b=0;b<a.length;b++)if(a[b].getAttribute&&"radio"==a[b].getAttribute("role")||"INPUT"==a[b].tagName&&"radio"==a[b].type)return a[b];return null};
cvox.DomPredicates.sliderPredicate=function(a){for(var b=0;b<a.length;b++)if(a[b].getAttribute&&"slider"==a[b].getAttribute("role")||"INPUT"==a[b].tagName&&"range"==a[b].type)return a[b];return null};cvox.DomPredicates.graphicPredicate=function(a){for(var b=0;b<a.length;b++)if("IMG"==a[b].tagName||"INPUT"==a[b].tagName&&"img"==a[b].type)return a[b];return null};
cvox.DomPredicates.buttonPredicate=function(a){for(var b=0;b<a.length;b++)if(a[b].getAttribute&&"button"==a[b].getAttribute("role")||"BUTTON"==a[b].tagName||"INPUT"==a[b].tagName&&"submit"==a[b].type||"INPUT"==a[b].tagName&&"button"==a[b].type||"INPUT"==a[b].tagName&&"reset"==a[b].type)return a[b];return null};cvox.DomPredicates.comboBoxPredicate=function(a){for(var b=0;b<a.length;b++)if(a[b].getAttribute&&"combobox"==a[b].getAttribute("role")||"SELECT"==a[b].tagName)return a[b];return null};
cvox.DomPredicates.editTextPredicate=function(a){for(var b=0;b<a.length;b++)if(a[b].getAttribute&&"textbox"==a[b].getAttribute("role")||"TEXTAREA"==a[b].tagName||"INPUT"==a[b].tagName&&cvox.DomUtil.isInputTypeText(a[b]))return a[b];return null};cvox.DomPredicates.headingPredicate=function(a){for(var b=0;b<a.length;b++){if(a[b].getAttribute&&"heading"==a[b].getAttribute("role"))return a[b];switch(a[b].tagName){case "H1":case "H2":case "H3":case "H4":case "H5":case "H6":return a[b]}}return null};
cvox.DomPredicates.heading1Predicate=function(a){return cvox.DomPredicates.containsTagName_(a,"H1")};cvox.DomPredicates.heading2Predicate=function(a){return cvox.DomPredicates.containsTagName_(a,"H2")};cvox.DomPredicates.heading3Predicate=function(a){return cvox.DomPredicates.containsTagName_(a,"H3")};cvox.DomPredicates.heading4Predicate=function(a){return cvox.DomPredicates.containsTagName_(a,"H4")};cvox.DomPredicates.heading5Predicate=function(a){return cvox.DomPredicates.containsTagName_(a,"H5")};
cvox.DomPredicates.heading6Predicate=function(a){return cvox.DomPredicates.containsTagName_(a,"H6")};cvox.DomPredicates.linkPredicate=function(a){for(var b=0;b<a.length;b++)if(a[b].getAttribute&&"link"==a[b].getAttribute("role")||"A"==a[b].tagName&&a[b].href)return a[b];return null};cvox.DomPredicates.tablePredicate=function(a){return(a=cvox.DomUtil.findTableNodeInList(a,{allowCaptions:!0}))&&!cvox.DomUtil.isLayoutTable(a)?a:null};
cvox.DomPredicates.cellPredicate=function(a){for(var b=a.length-1;0<=b;--b){var c=a[b];if("TD"==c.tagName||"TH"==c.tagName||c.getAttribute&&"gridcell"==c.getAttribute("role"))return c}return null};cvox.DomPredicates.listPredicate=function(a){for(var b=0;b<a.length;b++)if(a[b].getAttribute&&"list"==a[b].getAttribute("role")||"UL"==a[b].tagName||"OL"==a[b].tagName)return a[b];return null};
cvox.DomPredicates.listItemPredicate=function(a){for(var b=0;b<a.length;b++)if(a[b].getAttribute&&"listitem"==a[b].getAttribute("role")||"LI"==a[b].tagName)return a[b];return null};cvox.DomPredicates.blockquotePredicate=function(a){return cvox.DomPredicates.containsTagName_(a,"BLOCKQUOTE")};
cvox.DomPredicates.formFieldPredicate=function(a){for(var b=0;b<a.length;b++){var c="";a[b].getAttribute&&(c=a[b].getAttribute("role"));if("button"==c||"checkbox"==c||"combobox"==c||"radio"==c||"slider"==c||"spinbutton"==c||"textbox"==c||"INPUT"==a[b].tagName||"SELECT"==a[b].tagName||"BUTTON"==a[b].tagName)return a[b]}return null};cvox.DomPredicates.landmarkPredicate=function(a){for(var b=0;b<a.length;b++)if(cvox.AriaUtil.isLandmark(a[b]))return a[b];return null};
cvox.DomPredicates.containsTagName_=function(a,b){for(var c=a.length;c--;)if(a[c].tagName==b)return a[c];return null};cvox.DomPredicates.mathPredicate=function(a){return cvox.DomUtil.findMathNodeInList(a,{allowMathJax:!1})};cvox.TraverseUtil=function(){};cvox.TraverseUtil.getNodeText=function(a){return a.constructor==Text?a.data:""};cvox.TraverseUtil.treatAsLeafNode=function(a){return 0==a.childNodes.length||"SELECT"==a.nodeName||"OBJECT"==a.nodeName};cvox.TraverseUtil.isWhitespace=function(a){return" "==a||"\n"==a||"\r"==a||"\t"==a};
cvox.TraverseUtil.setSelection=function(a,b){var c=window.getSelection();c.removeAllRanges();var d=document.createRange();d.setStart(a.node,a.index);d.setEnd(b.node,b.index);c.addRange(d);return c};cvox.TraverseUtil.isHidden=function(a){return a instanceof HTMLElement&&"true"==a.getAttribute("aria-hidden")?!0:!1};
cvox.TraverseUtil.forwardsChar=function(a,b,c){for(;;){var d=null;if(!cvox.TraverseUtil.treatAsLeafNode(a.node))for(var e=a.index;e<a.node.childNodes.length;e++){var f=a.node.childNodes[e];if(cvox.TraverseUtil.isHidden(f))f instanceof HTMLElement&&b.push(f);else if(cvox.DomUtil.isVisible(f,{checkAncestors:!1})){d=f;break}}if(d)a.node=d,a.index=0,a.text=cvox.TraverseUtil.getNodeText(a.node),a.node instanceof HTMLElement&&b.push(a.node);else{if(a.index<a.text.length)return a.text[a.index++];for(;null!=
a.node;){d=null;for(f=a.node.nextSibling;null!=f;f=f.nextSibling)if(cvox.TraverseUtil.isHidden(f))f instanceof HTMLElement&&b.push(f);else if(cvox.DomUtil.isVisible(f,{checkAncestors:!1})){d=f;break}if(d){a.node instanceof HTMLElement&&c.push(a.node);a.node=d;a.text=cvox.TraverseUtil.getNodeText(d);a.index=0;a.node instanceof HTMLElement&&b.push(a.node);break}if(a.node.parentNode&&a.node.parentNode.constructor!=HTMLBodyElement)a.node instanceof HTMLElement&&c.push(a.node),a.node=a.node.parentNode,
a.text=null,a.index=0;else return null}}}};
cvox.TraverseUtil.backwardsChar=function(a,b,c){for(;;){var d=null;if(!cvox.TraverseUtil.treatAsLeafNode(a.node))for(var e=a.index-1;0<=e;e--){var f=a.node.childNodes[e];if(cvox.TraverseUtil.isHidden(f))f instanceof HTMLElement&&b.push(f);else if(cvox.DomUtil.isVisible(f,{checkAncestors:!1})){d=f;break}}if(d)a.node=d,a.text=cvox.TraverseUtil.getNodeText(a.node),a.index=a.text.length?a.text.length:a.node.childNodes.length,a.node instanceof HTMLElement&&b.push(a.node);else{if(0<a.text.length&&0<a.index)return a.text[--a.index];
for(;;){d=null;for(f=a.node.previousSibling;null!=f;f=f.previousSibling)if(cvox.TraverseUtil.isHidden(f))f instanceof HTMLElement&&b.push(f);else if(cvox.DomUtil.isVisible(f,{checkAncestors:!1})){d=f;break}if(d){a.node instanceof HTMLElement&&c.push(a.node);a.node=d;a.text=cvox.TraverseUtil.getNodeText(d);a.index=a.text.length?a.text.length:a.node.childNodes.length;a.node instanceof HTMLElement&&b.push(a.node);break}if(a.node.parentNode&&a.node.parentNode.constructor!=HTMLBodyElement)a.node instanceof
HTMLElement&&c.push(a.node),a.node=a.node.parentNode,a.text=null,a.index=0;else return null}}}};
cvox.TraverseUtil.getNextChar=function(a,b,c,d,e){a.copyFrom(b);var f=cvox.TraverseUtil.forwardsChar(b,c,d);if(null==f)return null;for(var g=cvox.TraverseUtil.isWhitespace(f);cvox.TraverseUtil.isWhitespace(f)||cvox.TraverseUtil.isHidden(b.node);)if(f=cvox.TraverseUtil.forwardsChar(b,c,d),null==f)return null;if(e||!g)return a.copyFrom(b),a.index--,f;for(d=0;d<c.length;d++)if(cvox.TraverseUtil.isHidden(c[d]))return b.index--,a.copyFrom(b),a.index--," ";b.index--;return" "};
cvox.TraverseUtil.getPreviousChar=function(a,b,c,d,e){b.copyFrom(a);var f=cvox.TraverseUtil.backwardsChar(a,c,d);if(null==f)return null;for(var g=cvox.TraverseUtil.isWhitespace(f);cvox.TraverseUtil.isWhitespace(f)||cvox.TraverseUtil.isHidden(a.node);)if(f=cvox.TraverseUtil.backwardsChar(a,c,d),null==f)return null;if(e||!g)return b.copyFrom(a),b.index++,f;for(d=0;d<c.length;d++)if(cvox.TraverseUtil.isHidden(c[d]))return a.index++,b.copyFrom(a),b.index++," ";a.index++;return" "};
cvox.TraverseUtil.getNextWord=function(a,b,c,d){var e=b.clone(),f=cvox.TraverseUtil.forwardsChar(e,c,d);if(null==f)return null;for(;cvox.TraverseUtil.isWhitespace(f)||cvox.TraverseUtil.isHidden(e.node);)if(f=cvox.TraverseUtil.forwardsChar(e,c,d),null==f)return null;a.copyFrom(e);a.index--;b.copyFrom(e);a=f;c=[];d=[];f=cvox.TraverseUtil.forwardsChar(e,c,d);if(null==f)return a;for(;!cvox.TraverseUtil.isWhitespace(f)&&(0==c.length&&0==d)&&!(a+=f,b.copyFrom(e),f=cvox.TraverseUtil.forwardsChar(e,c,d),
null==f););return a};
cvox.TraverseUtil.getPreviousWord=function(a,b,c,d){var e=a.clone(),f=cvox.TraverseUtil.backwardsChar(e,c,d);if(null==f)return null;for(;cvox.TraverseUtil.isWhitespace(f)||cvox.TraverseUtil.isHidden(e.node);)if(f=cvox.TraverseUtil.backwardsChar(e,c,d),null==f)return null;b.copyFrom(e);b.index++;a.copyFrom(e);b=f;c=[];d=[];f=cvox.TraverseUtil.backwardsChar(e,c,d);if(null==f)return b;for(;!cvox.TraverseUtil.isWhitespace(f)&&(0==c.length&&0==d.length)&&!(b=f+b,a.copyFrom(e),f=cvox.TraverseUtil.backwardsChar(e,c,
d),null==f););return b};cvox.TraverseUtil.includesBreakTagOrSkippedNode=function(a,b,c){for(var d=0;d<a.length;d++){if(cvox.TraverseUtil.isHidden(a[d]))return!0;var e=window.getComputedStyle(a[d],null);if(e&&"inline"!=e.display||c[a[d].tagName])return!0}for(d=0;d<b.length;d++)if((e=window.getComputedStyle(b[d],null))&&"inline"!=e.display||c[b[d].tagName])return!0;return!1};
cvox.TraverseUtil.getNextSentence=function(a,b,c,d,e){return cvox.TraverseUtil.getNextString(a,b,c,d,function(a,b,c,d){return"."==a.substr(-1)?!0:cvox.TraverseUtil.includesBreakTagOrSkippedNode(c,d,e)})};cvox.TraverseUtil.getPreviousSentence=function(a,b,c,d,e){return cvox.TraverseUtil.getPreviousString(a,b,c,d,function(a,b,c,d){return"."==b.substr(-1)?!0:cvox.TraverseUtil.includesBreakTagOrSkippedNode(c,d,e)})};
cvox.TraverseUtil.getNextLine=function(a,b,c,d,e){var f=document.createRange(),g=null,h=b.clone();return cvox.TraverseUtil.getNextString(a,b,c,d,function(c,d,l,n){f.setStart(a.node,a.index);f.setEnd(b.node,b.index);c=f.getBoundingClientRect();g||(g=c);if(c.bottom!=g.bottom&&!cvox.DomPredicates.linkPredicate(cvox.DomUtil.getAncestors(b.node)))return b.copyFrom(h),!0;g=c;h.copyFrom(b);return cvox.TraverseUtil.includesBreakTagOrSkippedNode(l,n,e)})};
cvox.TraverseUtil.getPreviousLine=function(a,b,c,d,e){var f=document.createRange(),g=null,h=a.clone();return cvox.TraverseUtil.getPreviousString(a,b,c,d,function(c,d,l,n){f.setStart(a.node,a.index);f.setEnd(b.node,b.index);c=f.getBoundingClientRect();g||(g=c);if(c.top!=g.top&&!cvox.DomPredicates.linkPredicate(cvox.DomUtil.getAncestors(a.node)))return a.copyFrom(h),!0;g=c;h.copyFrom(a);return cvox.TraverseUtil.includesBreakTagOrSkippedNode(l,n,e)})};
cvox.TraverseUtil.getNextParagraph=function(a,b,c,d){return cvox.TraverseUtil.getNextString(a,b,c,d,function(a,b,c,d){for(a=0;a<c.length;a++)if(cvox.TraverseUtil.isHidden(c[a])||(b=window.getComputedStyle(c[a],null))&&"inline"!=b.display)return!0;for(a=0;a<d.length;a++)if((b=window.getComputedStyle(d[a],null))&&"inline"!=b.display)return!0;return!1})};
cvox.TraverseUtil.getPreviousParagraph=function(a,b,c,d){return cvox.TraverseUtil.getPreviousString(a,b,c,d,function(a,b,c,d){for(a=0;a<c.length;a++)if(cvox.TraverseUtil.isHidden(c[a])||(b=window.getComputedStyle(c[a],null))&&"inline"!=b.display)return!0;for(a=0;a<d.length;a++)if((b=window.getComputedStyle(d[a],null))&&"inline"!=b.display)return!0;return!1})};
cvox.TraverseUtil.getNextString=function(a,b,c,d,e){c=b.clone();d=b.clone();var f=[],g=[],h="",i=cvox.TraverseUtil.getNextWord(c,d,f,g);if(null==i)return null;for(a.copyFrom(c);(!h||!e(h,i,f,g))&&!(h&&(h+=" "),h+=i,b.copyFrom(d),f=[],g=[],i=cvox.TraverseUtil.getNextWord(c,d,f,g),null==i););return h};
cvox.TraverseUtil.getPreviousString=function(a,b,c,d,e){c=a.clone();d=a.clone();var f=[],g=[],h="",i=cvox.TraverseUtil.getPreviousWord(c,d,f,g);if(null==i)return null;for(b.copyFrom(d);(!h||!e(h,i,f,g))&&!(h&&(h=" "+h),h=i+h,a.copyFrom(c),f=[],g=[],i=cvox.TraverseUtil.getPreviousWord(c,d,f,g),null==i););return h};cvox.CursorSelection=function(a,b,c){this.start=a.clone();this.end=b.clone();void 0==c&&(c=!1);if((this.isReversed_=c)&&this.start.node.compareDocumentPosition(this.end.node)==cvox.CursorSelection.BEFORE||!this.isReversed_&&this.end.node.compareDocumentPosition(this.start.node)==cvox.CursorSelection.BEFORE)a=this.start,this.start=this.end,this.end=a};cvox.CursorSelection.BEFORE=4;
cvox.CursorSelection.prototype.setReversed=function(a){if(a==this.isReversed_)return this;var b=this.start;this.start=this.end;this.end=b;this.isReversed_=a;return this};cvox.CursorSelection.prototype.isReversed=function(){return this.isReversed_};cvox.CursorSelection.prototype.absStart=function(){return this.isReversed_?this.end:this.start};cvox.CursorSelection.prototype.absEnd=function(){return this.isReversed_?this.start:this.end};
cvox.CursorSelection.prototype.clone=function(){return new cvox.CursorSelection(this.start,this.end,this.isReversed_)};cvox.CursorSelection.prototype.select=function(){var a=window.getSelection();a.removeAllRanges();this.normalize();a.addRange(this.getRange_())};cvox.CursorSelection.fromNode=function(a){if(!a)return null;var b=cvox.TraverseUtil.getNodeText(a);return new cvox.CursorSelection(new cvox.Cursor(a,0,b),new cvox.Cursor(a,0,b))};cvox.CursorSelection.fromBody=function(){return cvox.CursorSelection.fromNode(document.body)};
cvox.CursorSelection.prototype.getText=function(){return this.start.equals(this.end)?cvox.TraverseUtil.getNodeText(this.start.node):cvox.SelectionUtil.getRangeText(this.getRange_())};cvox.CursorSelection.prototype.getRange_=function(){var a=document.createRange();this.isReversed_?(a.setStart(this.end.node,this.end.index),a.setEnd(this.start.node,this.start.index)):(a.setStart(this.start.node,this.start.index),a.setEnd(this.end.node,this.end.index));return a};
cvox.CursorSelection.prototype.equals=function(a){return this.start.equals(a.start)&&this.end.equals(a.end)};cvox.CursorSelection.prototype.absEquals=function(a){return this.start.equals(a.start)&&this.end.equals(a.end)||this.end.equals(a.start)&&this.start.equals(a.end)};cvox.CursorSelection.prototype.directedBefore=function(a){var b=this.start.node.compareDocumentPosition(a.start.node)==cvox.CursorSelection.BEFORE;return this.start.node==a.start.node||(this.isReversed()?!b:b)};
cvox.CursorSelection.prototype.normalize=function(){if(0==this.absEnd().index&&this.absEnd().node){var a=this.absEnd().node,b=document.createRange();b.selectNodeContents(a);this.absEnd().index=b.endOffset}return this};cvox.CursorSelection.prototype.collapse=function(){this.end.copyFrom(this.start);0==this.start.text.length||0==this.end.text.length||(this.isReversed()?0<this.end.index&&this.end.index--:(this.start.index=0,this.end.index=1))};cvox.NavBraille=function(a){this.text=a.text?a.text:"";this.startIndex=a.startIndex?a.startIndex:0;this.endIndex=a.endIndex?a.endIndex:0};cvox.NavBraille.prototype.isEmpty=function(){return""==this.text};cvox.NavBraille.prototype.toString=function(){return'NavBraille(text="'+this.text+'"  startIndex="'+this.startIndex+'"  endIndex="'+this.endIndex+'")'};cvox.NavBraille.prototype.write=function(){"1.0"==cvox.ChromeVox.version&&cvox.ChromeVox.braille.write(this)};cvox.BrailleInterface=function(){};cvox.BrailleInterface.prototype.write=function(){};cvox.AbstractBraille=function(){};cvox.AbstractBraille.PAN_OUT_LEFT=0;cvox.AbstractBraille.PAN_OUT_RIGHT=1;cvox.AbstractHost=function(){};cvox.AbstractHost.prototype.init=function(){};cvox.AbstractHost.prototype.reinit=function(){};cvox.AbstractHost.prototype.onPageLoad=function(){};cvox.AbstractHost.prototype.sendToBackgroundPage=function(){};cvox.AbstractHost.prototype.getApiSrc=function(){return""};cvox.AbstractHost.prototype.getFileSrc=function(){return""};cvox.AbstractHost.prototype.hasTtsCallback=function(){return!0};cvox.AbstractHost.prototype.canShowLens=function(){return!1};
cvox.AbstractHost.prototype.ttsLoaded=function(){return!0};cvox.AbstractHost.prototype.mustRedispatchClickEvent=function(){return!1};cvox.AbstractMsgs=function(){};cvox.AbstractMsgs.prototype.getLocale=function(){};cvox.AbstractMsgs.prototype.getMsg=function(){};cvox.AbstractMsgs.prototype.getNumber=function(){};cvox.HostFactory=function(){};cvox.HostFactory.getHost=function(){return new cvox.HostFactory.hostConstructor};cvox.HostFactory.getTts=function(){return new cvox.HostFactory.ttsConstructor};cvox.HostFactory.getBraille=function(){return new cvox.HostFactory.brailleConstructor};cvox.HostFactory.getMsgs=function(){return new cvox.HostFactory.msgsConstructor};cvox.HostFactory.getEarcons=function(){return new cvox.HostFactory.earconsConstructor};cvox.ChromeBraille=function(){};goog.inherits(cvox.ChromeBraille,cvox.AbstractBraille);cvox.ChromeBraille.prototype.write=function(a){a.text=a.text.replace(/[\"\'&]/g,"");a={target:"BRAILLE",action:"write",params:JSON.stringify(a)};cvox.ExtensionBridge.send(a)};cvox.HostFactory.brailleConstructor=cvox.ChromeBraille;cvox.ChromeVoxJSON||(cvox.ChromeVoxJSON={});
window.JSON&&"[object JSON]"==window.JSON.toString()?cvox.ChromeVoxJSON=window.JSON:function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=h[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,h,k,q,s=f,r,p=d[a];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(a));"function"===typeof i&&(p=i.call(d,a,p));switch(typeof p){case "string":return b(p);
case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";f+=g;r=[];if("[object Array]"===Object.prototype.toString.apply(p)){q=p.length;for(e=0;e<q;e+=1)r[e]=c(e,p)||"null";k=0===r.length?"[]":f?"[\n"+f+r.join(",\n"+f)+"\n"+s+"]":"["+r.join(",")+"]";f=s;return k}if(i&&"object"===typeof i){q=i.length;for(e=0;e<q;e+=1)h=i[e],"string"===typeof h&&(k=c(h,p))&&r.push(b(h)+(f?": ":":")+k)}else for(h in p)Object.hasOwnProperty.call(p,
h)&&(k=c(h,p))&&r.push(b(h)+(f?": ":":")+k);k=0===r.length?"{}":f?"{\n"+f+r.join(",\n"+f)+"\n"+s+"}":"{"+r.join(",")+"}";f=s;return k}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":"null"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});
var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;"function"!==typeof cvox.ChromeVoxJSON.stringify&&(cvox.ChromeVoxJSON.stringify=function(a,b,d){var e;g=f="";if("number"===typeof d)for(e=0;e<d;e+=1)g+=" ";else"string"===typeof d&&
(g=d);if((i=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",{"":a})});"function"!==typeof cvox.ChromeVoxJSON.parse&&(cvox.ChromeVoxJSON.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,d,g)}var e;a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));
if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})}();cvox.ExtensionBridge=function(){};cvox.ExtensionBridge.init=function(){var a=cvox.ExtensionBridge;a.messageListeners=[];a.disconnectListeners=[];try{if(chrome&&chrome.windows&&0==window.location.toString().indexOf("chrome-extension://")&&0<window.location.toString().indexOf("background")){a.context=a.BACKGROUND;a.initBackground();return}}catch(b){}chrome&&chrome.extension&&(a.context=a.CONTENT_SCRIPT,a.initContentScript())};cvox.ExtensionBridge.BACKGROUND=0;cvox.ExtensionBridge.CONTENT_SCRIPT=1;
cvox.ExtensionBridge.PORT_NAME="cvox.ExtensionBridge.Port";cvox.ExtensionBridge.PING_MSG="cvox.ExtensionBridge.Ping";cvox.ExtensionBridge.PONG_MSG="cvox.ExtensionBridge.Pong";cvox.ExtensionBridge.send=function(a){var b=cvox.ExtensionBridge;switch(b.context){case b.BACKGROUND:b.sendBackgroundToContentScript(a);break;case b.CONTENT_SCRIPT:b.sendContentScriptToBackground(a)}};cvox.ExtensionBridge.addMessageListener=function(a){cvox.ExtensionBridge.messageListeners.push(a)};
cvox.ExtensionBridge.addDisconnectListener=function(a){cvox.ExtensionBridge.disconnectListeners.push(a)};cvox.ExtensionBridge.initBackground=function(){var a=cvox.ExtensionBridge,b=function(b){b.name==a.PORT_NAME&&b.onMessage.addListener(function(d){if(d[cvox.ExtensionBridge.PING_MSG])d={},d[cvox.ExtensionBridge.PONG_MSG]=1,b.postMessage(d);else for(var e=0;e<a.messageListeners.length;e++)a.messageListeners[e](d,b)})};chrome.extension.onConnect.addListener(b);chrome.extension.onConnectExternal.addListener(b)};
cvox.ExtensionBridge.initContentScript=function(){var a=cvox.ExtensionBridge;a.connected=!1;a.pingAttempts=0;a.queuedMessages=[];var b=function(b,d,e){if(!b||!b.srcFile){if(b[cvox.ExtensionBridge.PONG_MSG])a.gotPongFromBackgroundPage();else for(d=0;d<a.messageListeners.length;d++)a.messageListeners[d](b,cvox.ExtensionBridge.backgroundPort);e({})}};chrome.extension.onMessage.addListener(b);a.setupBackgroundPort();a.tryToPingBackgroundPage()};
cvox.ExtensionBridge.setupBackgroundPort=function(){var a=cvox.ExtensionBridge;a.backgroundPort=chrome.extension.connect({name:a.PORT_NAME});a.backgroundPort.onMessage.addListener(function(b){if(b[cvox.ExtensionBridge.PONG_MSG])a.gotPongFromBackgroundPage();else for(var c=0;c<a.messageListeners.length;c++)a.messageListeners[c](b,a.backgroundPort)});a.backgroundPort.onDisconnect.addListener(function(){if(a.connected)for(var b=0;b<a.disconnectListeners.length;b++)a.disconnectListeners[b]();else a.backgroundPort=
null})};cvox.ExtensionBridge.tryToPingBackgroundPage=function(){var a=cvox.ExtensionBridge;if(!a.connected)if(a.pingAttempts++,5<a.pingAttempts)for(var b=0;b<a.disconnectListeners.length;b++)a.disconnectListeners[b]();else b={},b[cvox.ExtensionBridge.PING_MSG]=1,a.backgroundPort||a.setupBackgroundPort(),a.backgroundPort.postMessage(b),window.setTimeout(cvox.ExtensionBridge.tryToPingBackgroundPage,500)};
cvox.ExtensionBridge.gotPongFromBackgroundPage=function(){var a=cvox.ExtensionBridge;for(a.connected=!0;0<a.queuedMessages.length;)a.sendContentScriptToBackground(a.queuedMessages.shift())};cvox.ExtensionBridge.sendContentScriptToBackground=function(a){var b=cvox.ExtensionBridge;b.connected?cvox.ExtensionBridge.backgroundPort?cvox.ExtensionBridge.backgroundPort.postMessage(a):chrome.extension.sendMessage(a):b.queuedMessages.push(a)};
cvox.ExtensionBridge.sendBackgroundToContentScript=function(a){chrome.tabs.getSelected(null,function(b){chrome.tabs.sendMessage(b.id,a)})};cvox.ExtensionBridge.init();cvox.ChromeEarcons=function(){};goog.inherits(cvox.ChromeEarcons,cvox.AbstractEarcons);cvox.ChromeEarcons.prototype.playEarcon=function(a){cvox.ChromeEarcons.superClass_.playEarcon.call(this,a);cvox.ExtensionBridge.send({target:"EARCON",action:"play",earcon:a})};cvox.HostFactory.earconsConstructor=cvox.ChromeEarcons;cvox.BuildInfo={};cvox.BuildInfo.build="1357325169.893492";"undefined"!=typeof goog&&goog.provide&&(cvox.ApiUtil={});window.cvox||(window.cvox={});cvox.ApiUtils=function(){};cvox.ApiUtils.nextCvoxId_=1;
cvox.ApiUtils.makeNodeReference=function(a){if(a.id&&document.getElementById(a.id)==a)return{id:a.id};if(a instanceof HTMLElement){var b=cvox.ApiUtils.nextCvoxId_;a.setAttribute("cvoxid",b);cvox.ApiUtils.nextCvoxId_=(cvox.ApiUtils.nextCvoxId_+1)%100;return{cvoxid:b}}if(a.parentElement){for(var c=a.parentElement,d=-1,b=0;b<c.childNodes.length;b++)if(c.childNodes[b]==a){d=b;break}if(0<=d)return b=cvox.ApiUtils.nextCvoxId_,c.setAttribute("cvoxid",b),cvox.ApiUtils.nextCvoxId_=(cvox.ApiUtils.nextCvoxId_+
1)%100,{cvoxid:b,childIndex:d}}throw"Cannot reference node: "+a;};cvox.ApiUtils.getNodeFromRef=function(a){if(a.id)return document.getElementById(a.id);if(a.cvoxid){var b='*[cvoxid="'+a.cvoxid+'"]';(b=document.querySelector(b))&&b.removeAttribute&&b.removeAttribute("cvoxid");return null!=a.childIndex?b.childNodes[a.childIndex]:b}throw"Bad node reference: "+cvox.ChromeVoxJSON.stringify(a);};cvox.ScriptInstaller={};
cvox.ScriptInstaller.installScript=function(a,b,c,d){if(document.querySelector("script["+b+"]")||!a)return!1;for(var e=0,f;f=a[e];e++){var g=new XMLHttpRequest,h=f+"?"+(new Date).getTime();g.onreadystatechange=function(){if(4==g.readyState){var a=g.responseText,a=a+("\n//@ sourceURL="+f+"\n"),c=document.createElement("script");c.type="text/javascript";c.setAttribute(b,"1");c.textContent=a;d&&c.setAttribute("chromevoxScriptBase",d);cvox.DomUtil.addNodeToHead(c)}};try{g.open("GET",h,!1),g.send(null)}catch(i){return window.console.log("Warning: ChromeVox external script loading for "+
document.location+" stopped after failing to install "+f),!1}}c&&c();return!0};cvox.ApiImplementation=function(){};cvox.ApiImplementation.init=function(){window.addEventListener("message",cvox.ApiImplementation.portSetup,!0);var a=[];a.push(cvox.ChromeVox.host.getFileSrc("chromevox/injected/api_util.js"));a.push(cvox.ChromeVox.host.getApiSrc());a.push(cvox.ApiImplementation.siteSpecificScriptLoader);a=cvox.ScriptInstaller.installScript(a,"cvoxapi",null,cvox.ApiImplementation.siteSpecificScriptBase);a||(window.location.href="javascript:cvox.Api.internalEnable();")};
cvox.ApiImplementation.portSetup=function(a){return"cvox.PortSetup"==a.data?(cvox.ApiImplementation.port=a.ports[0],cvox.ApiImplementation.port.onmessage=function(a){cvox.ApiImplementation.dispatchApiMessage(cvox.ChromeVoxJSON.parse(a.data))},a.stopPropagation(),!1):!0};
cvox.ApiImplementation.dispatchApiMessage=function(a){var b;switch(a.cmd){case "speak":b=cvox.ApiImplementation.speak;break;case "speakNodeRef":b=cvox.ApiImplementation.speakNodeRef;break;case "stop":b=cvox.ApiImplementation.stop;break;case "playEarcon":b=cvox.ApiImplementation.playEarcon;break;case "syncToNodeRef":b=cvox.ApiImplementation.syncToNodeRef;break;case "clickNodeRef":b=cvox.ApiImplementation.clickNodeRef;break;case "getBuild":b=cvox.ApiImplementation.getBuild;break;case "getVersion":b=
cvox.ApiImplementation.getVersion;break;case "getCurrentNode":b=cvox.ApiImplementation.getCurrentNode}if(!b)throw"Unknown API call: "+a.cmd;b.apply(cvox.ApiImplementation,a.args)};cvox.ApiImplementation.speak=function(a,b,c){cvox.ChromeVox.isActive&&cvox.ChromeVox.tts.speak(a,b,c)};cvox.ApiImplementation.speakNodeRef=function(a,b,c){cvox.ChromeVox.isActive&&cvox.ApiImplementation.speak(cvox.DomUtil.getName(cvox.ApiUtils.getNodeFromRef(a)),b,c)};
cvox.ApiImplementation.stop=function(){cvox.ChromeVox.isActive&&cvox.ChromeVox.tts.stop()};cvox.ApiImplementation.playEarcon=function(a){cvox.ChromeVox.isActive&&cvox.ChromeVox.earcons.playEarconByName(a)};cvox.ApiImplementation.syncToNodeRef=function(a,b){var c=cvox.ApiUtils.getNodeFromRef(a);cvox.ApiImplementation.syncToNode(c,b)};
cvox.ApiImplementation.syncToNode=function(a,b,c){cvox.ChromeVox.isActive&&(void 0==c&&(c=cvox.AbstractTts.QUEUE_MODE_FLUSH),cvox.ChromeVox.navigationManager.updateSelToArbitraryNode(a,!0),cvox.ChromeVox.navigationManager.updateIndicator(),void 0==b&&(b=!1),cvox.AriaUtil.isHiddenRecursive(a)&&(b=!1),b&&(cvox.ChromeVox.navigationManager.speakDescriptionArray(cvox.ApiImplementation.getDesc_(a),c,null),cvox.ChromeVox.navigationManager.getBraille().write()))};
cvox.ApiImplementation.getCurrentNode=function(a){var b=cvox.ChromeVox.navigationManager.getCurrentNode();cvox.ApiImplementation.port.postMessage(cvox.ChromeVoxJSON.stringify({id:a,currentNode:cvox.ApiUtils.makeNodeReference(b)}))};
cvox.ApiImplementation.getDesc_=function(a){if(!a.hasAttribute("cvoxnodedesc"))return cvox.ChromeVox.navigationManager.getDescription();a=cvox.ChromeVoxJSON.parse(a.getAttribute("cvoxnodedesc"));for(var b=[],c=0;c<a.length;++c){var d=a[c];b.push(new cvox.NavDescription({context:d.context,text:d.text,userValue:d.userValue,annotation:d.annotation}))}return b};cvox.ApiImplementation.clickNodeRef=function(a,b){cvox.DomUtil.clickElem(cvox.ApiUtils.getNodeFromRef(a),b)};
cvox.ApiImplementation.getBuild=function(a){cvox.ApiImplementation.port.postMessage(cvox.ChromeVoxJSON.stringify({id:a,build:cvox.BuildInfo.build}))};cvox.ApiImplementation.getVersion=function(a){var b=cvox.ChromeVox.version;null==b?window.setTimeout(function(){cvox.ApiImplementation.getVersion(a)},1E3):cvox.ApiImplementation.port.postMessage(cvox.ChromeVoxJSON.stringify({id:a,version:b}))};cvox.ContentEditableExtractor=function(){this.text_="";this.end_=this.start_=0;this.lines_={};this.characterToLineMap_=[]};
cvox.ContentEditableExtractor.prototype.update=function(a){for(var b={"0":{startIndex:0,endIndex:0}},c=new cvox.Cursor(a,0,""),d=c.clone(),e=document.createRange(),f,g=0,h=null,i="",j=0,l=-1,n=-1,m=window.getSelection(),k=new cvox.Cursor(m.baseNode,m.baseOffset,""),m=new cvox.Cursor(m.extentNode,m.extentOffset,""),q=!1,s=!1;;){f=[];var r=[],p=cvox.TraverseUtil.forwardsChar(d,f,r),t=!1;p||(t=!0);for(f=0;f<r.length&&!t;f++)r[f]==a&&(t=!0);if(t)break;e.setStart(c.node,c.index);e.setEnd(d.node,d.index);
if((f=e.getBoundingClientRect())&&!(0==f.width||0==f.height)){null!==h&&(f.bottom!=h&&0<j&&i.substr(-1).match(/\S/)&&p.match(/\S/))&&(i+="\n",j++);if(c.node!=d.node&&0<d.index&&(e.setStart(d.node,d.index-1),f=e.getBoundingClientRect(),!f||0==f.width||0==f.height))continue;!q&&(-1==l&&d.node==k.node&&d.index>=k.index)&&(d.index>k.index?l=j:q=!0);!s&&(-1==n&&d.node==m.node&&d.index>=m.index)&&(d.index>m.index?n=j:s=!0);null===h?h=f.bottom:f.bottom!=h&&(b[g].endIndex=j,g++,b[g]={startIndex:j,endIndex:j},
h=f.bottom);i+=p;j++;c=d.clone();q&&(l=j,q=!1);s&&(n=j,s=!1)}}b[g].endIndex=j;a=[];for(f=0;f<=g;f++)for(c=b[f].startIndex;c<=b[f].endIndex;c++)a[c]=f;this.text_=i;this.characterToLineMap_=a;this.lines_=b;this.start_=0<=l?l:i.length;this.end_=0<=n?n:i.length};cvox.ContentEditableExtractor.prototype.getText=function(){return this.text_};cvox.ContentEditableExtractor.prototype.getStartIndex=function(){return this.start_};cvox.ContentEditableExtractor.prototype.getEndIndex=function(){return this.end_};
cvox.ContentEditableExtractor.prototype.getLineIndex=function(a){return this.characterToLineMap_[a]};cvox.ContentEditableExtractor.prototype.getLineStart=function(a){return this.lines_[a].startIndex};cvox.ContentEditableExtractor.prototype.getLineEnd=function(a){return this.lines_[a].endIndex};cvox.EditableTextAreaShadow=function(){this.shadowElement_=document.createElement("div");this.lines_={};this.characterToLineMap_=[]};
cvox.EditableTextAreaShadow.prototype.update=function(a){for(document.body.appendChild(this.shadowElement_);this.shadowElement_.childNodes.length;)this.shadowElement_.removeChild(this.shadowElement_.childNodes[0]);this.shadowElement_.style.cssText=window.getComputedStyle(a,null).cssText;this.shadowElement_.style.position="absolute";this.shadowElement_.style.top=-9999;this.shadowElement_.style.left=-9999;this.shadowElement_.setAttribute("aria-hidden","true");var b=a.value,c=document.createTextNode(b+
".");this.shadowElement_.appendChild(c);a={"0":{startIndex:0,endIndex:0}};for(var d=document.createRange(),e=0,f=0,g=0,h=null,i=!1,j;e<=b.length;){d.setStart(c,e);if(e+8>b.length||0<=b.substr(e,8).indexOf("\n"))i=!0;i?(e++,d.setEnd(c,e),j=d.getBoundingClientRect()):(d.setEnd(c,e+8),j=d.getBoundingClientRect(),j.bottom==h?e+=8:(j&&null!==h&&(i=!0),e++,d.setEnd(c,e),j=d.getBoundingClientRect()));0<e&&"\n"==b[e-1]?(a[g].endIndex=e-1,g++,a[g]={startIndex:e,endIndex:e},h=null,i=!1,f=e):j&&null===h?h=j.bottom:
j&&j.bottom!=h&&(a[g].endIndex=f,g++,a[g]={startIndex:f,endIndex:f},h=j?j.bottom:null,i=!1);j&&(f=e)}a[g].endIndex=b.length;b=[];for(c=0;c<=g;c++)for(d=a[c].startIndex;d<=a[c].endIndex;d++)b[d]=c;this.characterToLineMap_=b;this.lines_=a;document.body.removeChild(this.shadowElement_)};cvox.EditableTextAreaShadow.prototype.getLineIndex=function(a){return this.characterToLineMap_[a]};cvox.EditableTextAreaShadow.prototype.getLineStart=function(a){return this.lines_[a].startIndex};
cvox.EditableTextAreaShadow.prototype.getLineEnd=function(a){return this.lines_[a].endIndex};cvox.TextChangeEvent=function(a,b,c,d){this.value=a;this.start=b;this.end=c;this.triggeredByUser=d};cvox.ChromeVoxEditableTextBase=function(a,b,c,d,e){this.value=a;this.start=b;this.end=c;this.isPassword=d;this.tts=e};cvox.ChromeVoxEditableTextBase.prototype.multiline=!1;cvox.ChromeVoxEditableTextBase.useIBeamCursor=cvox.ChromeVox.isMac;cvox.ChromeVoxEditableTextBase.prototype.maxShortPhraseLen=60;cvox.ChromeVoxEditableTextBase.prototype.isPassword=!1;
cvox.ChromeVoxEditableTextBase.prototype.lastChangeDescribed=!1;cvox.ChromeVoxEditableTextBase.prototype.getValue=function(){var a="";if(this.multiline){if(a+="multiline editable text. ",this.start==this.end)var b=this.getLine(this.getLineIndex(this.start)),a=b?a+b:a+"blank."}else a=this.node?a+cvox.DomUtil.getValue(this.node):a+this.value,a=a<=this.maxShortPhraseLen?a+", editable text.":a.substring(0,this.maxShortPhraseLen)+", editable text.";return a};
cvox.ChromeVoxEditableTextBase.prototype.getLineIndex=function(){return 0};cvox.ChromeVoxEditableTextBase.prototype.getLineStart=function(){return 0};cvox.ChromeVoxEditableTextBase.prototype.getLineEnd=function(){return this.value.length};cvox.ChromeVoxEditableTextBase.prototype.getLine=function(a){var b=this.getLineStart(a);a=this.getLineEnd(a);b=this.value.substr(b,a-b);return b.replace(/^\s+|\s+$/g,"")};
cvox.ChromeVoxEditableTextBase.prototype.isWordBreakChar=function(a){return" "==a||"\n"==a||"\r"==a||"\t"==a||","==a||"."==a||"/"==a};cvox.ChromeVoxEditableTextBase.prototype.speak=function(a,b){if(!(this.node&&document.activeElement!=this.node)){var c=cvox.AbstractTts.QUEUE_MODE_QUEUE;!0===b&&(c=cvox.AbstractTts.QUEUE_MODE_FLUSH);this.tts.speak(a,c,{})}};cvox.ChromeVoxEditableTextBase.prototype.saveState=function(){return{value:this.value,start:this.start,end:this.end}};
cvox.ChromeVoxEditableTextBase.prototype.changed=function(a){a.value==this.value&&a.start==this.start&&a.end==this.end?this.lastChangeDescribed=!1:(a.value==this.value?this.describeSelectionChanged(a):this.describeTextChanged(a),this.lastChangeDescribed=!0,this.value=a.value,this.start=a.start,this.end=a.end)};
cvox.ChromeVoxEditableTextBase.prototype.describeSelectionChanged=function(a){if(this.isPassword)this.speak(cvox.ChromeVox.msgs.getMsg("dot"),a.triggeredByUser);else if(a.start==a.end)if(this.start!=this.end)this.speak(cvox.ChromeVox.msgs.getMsg("Unselected"),a.triggeredByUser);else if(this.getLineIndex(this.start)!=this.getLineIndex(a.start)){var b=this.getLine(this.getLineIndex(a.start));""==b&&(b=cvox.ChromeVox.msgs.getMsg("text_box_blank"));this.speak(b,a.triggeredByUser)}else this.start==a.start+
1||this.start==a.start-1?cvox.ChromeVoxEditableTextBase.useIBeamCursor?this.speak(this.value.substr(Math.min(this.start,a.start),1),a.triggeredByUser):a.start==this.value.length?this.speak(cvox.ChromeVox.msgs.getMsg("end"),a.triggeredByUser):this.speak(this.value.substr(a.start,1),a.triggeredByUser):this.speak(this.value.substr(Math.min(this.start,a.start),Math.abs(this.start-a.start)),a.triggeredByUser);else this.start+1==a.start&&this.end==this.value.length&&a.end==this.value.length?(this.speak(this.value.substr(this.start,
1),a.triggeredByUser),this.speak(this.value.substr(a.start))):this.start==this.end?(this.speak(this.value.substr(a.start,a.end-a.start),a.triggeredByUser),this.speak(cvox.ChromeVox.msgs.getMsg("selected"))):this.start==a.start&&this.end<a.end?(this.speak(this.value.substr(this.end,a.end-this.end),a.triggeredByUser),this.speak(cvox.ChromeVox.msgs.getMsg("added_to_selection"))):this.start==a.start&&this.end>a.end?(this.speak(this.value.substr(a.end,this.end-a.end),a.triggeredByUser),this.speak(cvox.ChromeVox.msgs.getMsg("removed_from_selection"))):
this.end==a.end&&this.start>a.start?(this.speak(this.value.substr(a.start,this.start-a.start),a.triggeredByUser),this.speak(cvox.ChromeVox.msgs.getMsg("added_to_selection"))):this.end==a.end&&this.start<a.start?(this.speak(this.value.substr(this.start,a.start-this.start),a.triggeredByUser),this.speak(cvox.ChromeVox.msgs.getMsg("removed_from_selection"))):(this.speak(this.value.substr(a.start,a.end-a.start),a.triggeredByUser),this.speak(cvox.ChromeVox.msgs.getMsg("selected")))};
cvox.ChromeVoxEditableTextBase.prototype.describeTextChanged=function(a){if(this.isPassword)this.speak(cvox.ChromeVox.msgs.getMsg("dot"),a.triggeredByUser);else{var b=this.value,c=b.length,d=a.value.length,e="",f=a.value,g=a.end;a.start<g&&g==d&&(e=f.substr(a.start),f=f.substr(0,a.start),g=a.start);var h=this.start,i=c-this.end;if(d>=h+i+(g-a.start)&&f.substr(0,h)==b.substr(0,h)&&f.substr(d-i)==b.substr(this.end))this.describeTextChangedHelper(a,h,i,e);else if(h=a.start,i=d-g,this.start==this.end&&
a.start==g&&f.substr(0,h)==b.substr(0,h)&&f.substr(d-i)==b.substr(c-i))this.describeTextChangedHelper(a,h,i,e);else{f+=e;if(f.length==b.length+1||f.length+1==b.length){if(f.length>b.length){if(0==f.indexOf(b)){this.speak(f[f.length-1],a.triggeredByUser);return}if(1==f.indexOf(b)){this.speak(f[0],a.triggeredByUser);return}}if(f.length<b.length){if(0==b.indexOf(f)){this.speak(b[b.length-1],a.triggeredByUser);return}if(1==b.indexOf(f)){this.speak(b[0],a.triggeredByUser);return}}}if(d<=this.maxShortPhraseLen)this.describeTextChangedHelper(a,
0,0,"");else{for(h=0;h<c&&h<d&&b[h]==f[h];)h++;for(;0<h&&!this.isWordBreakChar(b[h-1]);)h--;for(i=0;i<c-h&&i<d-h&&b[c-i-1]==f[d-i-1];)i++;for(;0<i&&!this.isWordBreakChar(b[c-i]);)i--;this.describeTextChangedHelper(a,h,i,"")}}}};
cvox.ChromeVoxEditableTextBase.prototype.describeTextChangedHelper=function(a,b,c,d){var e=this.value.length,f=a.value.length,e=e-b-c,g=this.value.substr(b,e),f=f-b-c;c=a.value.substr(b,f);var h="";if(1<f)h=c;else if(1==f)if(this.isWordBreakChar(c)&&0<b&&!this.isWordBreakChar(a.value.substr(b-1,1))){for(e=b;0<e&&!this.isWordBreakChar(a.value[e-1]);)e--;h=e<b?a.value.substr(e,b+1-e):c}else h=c;else 1<e&&!d?h=g+", deleted.":1==e&&(h=g);d&&h?h+=", "+d:d&&(h=d);this.speak(h,a.triggeredByUser)};
cvox.ChromeVoxEditableElement=function(){this.justSpokeDescription=!1};goog.inherits(cvox.ChromeVoxEditableElement,cvox.ChromeVoxEditableTextBase);cvox.ChromeVoxEditableElement.prototype.justSpokeDescription=!1;cvox.ChromeVoxEditableElement.prototype.changed=function(a){this.justSpokeDescription&&this.value==a.value&&(this.value=a.value,this.start=a.start,this.end=a.end,this.justSpokeDescription=!1);cvox.ChromeVoxEditableTextBase.prototype.changed.apply(this,[a])};
cvox.ChromeVoxEditableElement.prototype.getValue=function(){this.justSpokeDescription=!0;return cvox.ChromeVoxEditableTextBase.prototype.getValue.apply(this)};cvox.ChromeVoxEditableHTMLInput=function(a,b){this.node=a;this.value=a.value;this.start=a.selectionStart;this.end=a.selectionEnd;this.tts=b;this.isPassword="password"==this.node.type?!0:!1};goog.inherits(cvox.ChromeVoxEditableHTMLInput,cvox.ChromeVoxEditableElement);
cvox.ChromeVoxEditableHTMLInput.prototype.update=function(a){var b=this.node.value;a=new cvox.TextChangeEvent(b,this.node.selectionStart,this.node.selectionEnd,a);this.changed(a)};cvox.ChromeVoxEditableTextArea=function(a,b){this.node=a;this.value=a.value;this.start=a.selectionStart;this.end=a.selectionEnd;this.tts=b;this.multiline=!0;this.shadowIsCurrent=!1};goog.inherits(cvox.ChromeVoxEditableTextArea,cvox.ChromeVoxEditableElement);
cvox.ChromeVoxEditableTextArea.prototype.update=function(a){this.node.value!=this.value&&(this.shadowIsCurrent=!1);a=new cvox.TextChangeEvent(this.node.value,this.node.selectionStart,this.node.selectionEnd,a);this.changed(a)};cvox.ChromeVoxEditableTextArea.prototype.getLineIndex=function(a){return this.getShadow().getLineIndex(a)};cvox.ChromeVoxEditableTextArea.prototype.getLineStart=function(a){return this.getShadow().getLineStart(a)};cvox.ChromeVoxEditableTextArea.prototype.getLineEnd=function(a){return this.getShadow().getLineEnd(a)};
cvox.ChromeVoxEditableTextArea.prototype.getShadow=function(){var a=cvox.ChromeVoxEditableTextArea.shadow;this.shadowIsCurrent||(a||(a=cvox.ChromeVoxEditableTextArea.shadow=new cvox.EditableTextAreaShadow),a.update(this.node),this.shadowIsCurrent=!0);return a};
cvox.ChromeVoxEditableContentEditable=function(a,b){this.node=a;this.value=this.getExtractor().getText();this.start=this.getExtractor().getStartIndex();this.end=this.getExtractor().getEndIndex();this.tts=b;this.multiline=!0;this.extractorIsCurrent=!1};goog.inherits(cvox.ChromeVoxEditableContentEditable,cvox.ChromeVoxEditableElement);
cvox.ChromeVoxEditableContentEditable.prototype.update=function(a){this.extractorIsCurrent=!1;a=new cvox.TextChangeEvent(this.getExtractor().getText(),this.getExtractor().getStartIndex(),this.getExtractor().getEndIndex(),a);this.changed(a)};cvox.ChromeVoxEditableContentEditable.prototype.getLineIndex=function(a){return this.getExtractor().getLineIndex(a)};cvox.ChromeVoxEditableContentEditable.prototype.getLineStart=function(a){return this.getExtractor().getLineStart(a)};
cvox.ChromeVoxEditableContentEditable.prototype.getLineEnd=function(a){return this.getExtractor().getLineEnd(a)};cvox.ChromeVoxEditableContentEditable.prototype.getExtractor=function(){var a=cvox.ChromeVoxEditableContentEditable.extractor;this.extractorIsCurrent||(a||(a=cvox.ChromeVoxEditableContentEditable.extractor=new cvox.ContentEditableExtractor),a.update(this.node),this.extractorIsCurrent=!0);return a};cvox.ChromeVoxEventSuspender=function(){};cvox.ChromeVoxEventSuspender.suspendLevel_=0;cvox.ChromeVoxEventSuspender.enterSuspendEvents=function(){cvox.ChromeVoxEventSuspender.suspendLevel_+=1};cvox.ChromeVoxEventSuspender.exitSuspendEvents=function(){cvox.ChromeVoxEventSuspender.suspendLevel_-=1};cvox.ChromeVoxEventSuspender.areEventsSuspended=function(){return 0<cvox.ChromeVoxEventSuspender.suspendLevel_};
cvox.ChromeVoxEventSuspender.withSuspendedEvents=function(a){return function(){cvox.ChromeVoxEventSuspender.enterSuspendEvents();var b=a.apply(this,arguments);cvox.ChromeVoxEventSuspender.exitSuspendEvents();return b}};cvox.ChromeVoxEventSuspender.makeSuspendableHandler=function(a,b){return function(){return cvox.ChromeVoxEventSuspender.areEventsSuspended()?b:a()}};cvox.Focuser={};
cvox.Focuser.setFocus=function(a,b){var c=window.getSelection(),d;0<c.rangeCount&&(d=c.getRangeAt(0));document.activeElement&&!cvox.DomUtil.isDescendantOfNode(a,document.activeElement)&&document.activeElement.blur();a&&a.constructor==HTMLVideoElement&&(cvox.DomUtil.isFocusable(a)||a.setAttribute("tabIndex",0));if(b&&!cvox.DomUtil.isFocusable(a)){var e=cvox.DomUtil.findFocusableDescendant(a);e&&(a=e)}else for(;a&&!cvox.DomUtil.isFocusable(a);)a=a.parentNode;cvox.DomUtil.isFocusable(a)?"IFRAME"!=a.tagName&&
(cvox.ChromeVoxEventSuspender.areEventsSuspended()?(cvox.Focuser.shouldEnterSuspendEvents_(a)&&cvox.ChromeVoxEventSuspender.enterSuspendEvents(),window.setTimeout(function(){a.focus();cvox.ChromeVoxEventSuspender.exitSuspendEvents()},0)):window.setTimeout(function(){a.focus()},0)):document.activeElement&&"BODY"!=document.activeElement.tagName&&document.activeElement.blur();cvox.DomUtil.isInputTypeText(a)?a.select():d&&(c.removeAllRanges(),c.addRange(d))};
cvox.Focuser.shouldEnterSuspendEvents_=function(a){return a.constructor&&a.constructor==HTMLVideoElement||a.hasAttribute&&"time"==a.getAttribute("type")?!1:!0};cvox.ChromeVoxHTMLMediaWidget=function(a){var b=this;this.mediaElem_=a;this.keyListener_=function(a){b.eventHandler_(a)};this.blurListener_=function(){b.shutdown()};this.mediaElem_.addEventListener("keydown",this.keyListener_,!1);this.mediaElem_.addEventListener("keyup",this.keyListener_,!1);this.mediaElem_.addEventListener("blur",this.blurListener_,!1)};
cvox.ChromeVoxHTMLMediaWidget.prototype.shutdown=function(){this.mediaElem_.removeEventListener("blur",this.blurListener_,!1);this.mediaElem_.removeEventListener("keydown",this.keyListener_,!1);this.mediaElem_.removeEventListener("keyup",this.keyListener_,!1)};cvox.ChromeVoxHTMLMediaWidget.prototype.jumpToTime_=function(a){0>a&&(a=0);a>this.mediaElem_.duration&&(a=this.mediaElem_.duration);this.mediaElem_.currentTime=a};
cvox.ChromeVoxHTMLMediaWidget.prototype.setVolume_=function(a){0>a&&(a=0);1<a&&(a=1);this.mediaElem_.volume=a};
cvox.ChromeVoxHTMLMediaWidget.prototype.eventHandler_=function(a){"keydown"==a.type&&(13==a.keyCode||32==a.keyCode?this.mediaElem_.paused?this.mediaElem_.play():this.mediaElem_.pause():39==a.keyCode?this.jumpToTime_(this.mediaElem_.currentTime+this.mediaElem_.duration/10):37==a.keyCode?this.jumpToTime_(this.mediaElem_.currentTime-this.mediaElem_.duration/10):38==a.keyCode?this.setVolume_(this.mediaElem_.volume+0.1):40==a.keyCode&&this.setVolume_(this.mediaElem_.volume-0.1))};cvox.PlatformUtil={};cvox.PlatformFilter={NONE:0,WINDOWS:1,MAC:2,LINUX:4,WML:7,CHROMEOS:8,ANDROID:16};
cvox.PlatformUtil.matchesPlatform=function(a){return void 0==a?!0:-1!=navigator.userAgent.indexOf("Android")?0!=(a&cvox.PlatformFilter.ANDROID):-1!=navigator.userAgent.indexOf("Win")?0!=(a&cvox.PlatformFilter.WINDOWS):-1!=navigator.userAgent.indexOf("Mac")?0!=(a&cvox.PlatformFilter.MAC):-1!=navigator.userAgent.indexOf("Linux")?0!=(a&cvox.PlatformFilter.LINUX):-1!=navigator.userAgent.indexOf("CrOS")?0!=(a&cvox.PlatformFilter.CHROMEOS):!1};cvox.ChromeVoxHTMLTimeWidget=function(a,b){var c=this;this.timeElem_=a;this.timeTts_=b;this.pMinutes_=this.pHours_=-1;this.pMilliseconds_=this.pSeconds_=0;this.pAmpm_="";this.pos_=0;this.maxPos_=2;this.keyListener_=function(a){c.eventHandler_(a)};this.blurListener_=function(){c.shutdown()};if(this.timeElem_.hasAttribute("step")){var d=this.timeElem_.getAttribute("step");0<d&&(this.maxPos_=1<=d?3:4)}0==this.timeElem_.value.length&&this.forceInitTime_();for(d=0;d<this.maxPos_;d++){var e=document.createEvent("KeyboardEvent");
e.initKeyboardEvent("keydown",!0,!0,window,"Left",0,!1,!1,!1,!1);this.timeElem_.dispatchEvent(e);e=document.createEvent("KeyboardEvent");e.initKeyboardEvent("keyup",!0,!0,window,"Left",0,!1,!1,!1,!1);this.timeElem_.dispatchEvent(e)}this.timeElem_.addEventListener("keydown",this.keyListener_,!1);this.timeElem_.addEventListener("keyup",this.keyListener_,!1);this.timeElem_.addEventListener("blur",this.blurListener_,!1);this.update_(!0)};
cvox.ChromeVoxHTMLTimeWidget.prototype.shutdown=function(){this.timeElem_.removeEventListener("blur",this.blurListener_,!1);this.timeElem_.removeEventListener("keydown",this.keyListener_,!1);this.timeElem_.removeEventListener("keyup",this.keyListener_,!1)};cvox.ChromeVoxHTMLTimeWidget.prototype.forceInitTime_=function(){this.timeElem_.setAttribute("value","12:00")};
cvox.ChromeVoxHTMLTimeWidget.prototype.handlePosChange_=function(){0>this.pos_&&(this.pos_=0);this.pos_>this.maxPos_&&(this.pos_=this.maxPos_);if(this.pos_==this.maxPos_)this.pAmpm_="";else switch(this.pos_){case 0:this.pHours_=-1;break;case 1:this.pMinutes_=-1;break;case 2:this.pSeconds_=-1;break;case 3:this.pMilliseconds_=-1}};
cvox.ChromeVoxHTMLTimeWidget.prototype.update_=function(a){var b=this.timeElem_.value.split(":");if(1>b.length)this.forceInitTime_();else{var c=b[0],d=-1,e=0,f=0,g=cvox.ChromeVox.msgs.getMsg("timewidget_am");1<b.length&&(d=b[1]);2<b.length&&(b=b[2].split("."),e=b[0],1<b.length&&(f=b[1]));12<c&&(c-=12,g=cvox.ChromeVox.msgs.getMsg("timewidget_pm"));12==c&&(g=cvox.ChromeVox.msgs.getMsg("timewidget_pm"));0==c&&(c=12,g=cvox.ChromeVox.msgs.getMsg("timewidget_am"));b="";a&&(b=cvox.DomUtil.getName(this.timeElem_,
!0,!0)+"\n");c!=this.pHours_&&(b=b+c+" "+cvox.ChromeVox.msgs.getMsg("timewidget_hours")+"\n",this.pHours_=c);d!=this.pMinutes_&&(b=b+d+" "+cvox.ChromeVox.msgs.getMsg("timewidget_minutes")+"\n",this.pMinutes_=d);e!=this.pSeconds_&&(b=b+e+" "+cvox.ChromeVox.msgs.getMsg("timewidget_seconds")+"\n",this.pSeconds_=e);f!=this.pMilliseconds_&&(b=b+f+" "+cvox.ChromeVox.msgs.getMsg("timewidget_milliseconds")+"\n",this.pMilliseconds_=f);g!=this.pAmpm_&&(b+=g,this.pAmpm_=g);0<b.length&&this.timeTts_.speak(b,
0,null)}};cvox.ChromeVoxHTMLTimeWidget.prototype.eventHandler_=function(a){var b=!1;if("keydown"==a.type){if(9==a.keyCode&&!a.shiftKey||39==a.keyCode)this.pos_++,this.handlePosChange_(),b=!0;if(9==a.keyCode&&a.shiftKey||37==a.keyCode)this.pos_--,this.handlePosChange_(),b=!0}this.update_(b)};cvox.NodeBreadcrumb=function(){this.cvTagCounter_=0};goog.addSingletonGetter(cvox.NodeBreadcrumb);cvox.NodeBreadcrumb.TOUCHED_TAG="chromevoxtag";cvox.NodeBreadcrumb.NEEDED_TAG_="chromevoxneeded";
cvox.NodeBreadcrumb.prototype.tagCurrentNode=function(){for(var a,b=cvox.ChromeVox.navigationManager.getCurrentNode();b&&!b.hasAttribute;)b=b.parentNode;b?b.hasAttribute(cvox.NodeBreadcrumb.TOUCHED_TAG)?a=b.getAttribute(cvox.NodeBreadcrumb.TOUCHED_TAG):(a=this.cvTagCounter_,b.setAttribute(cvox.NodeBreadcrumb.TOUCHED_TAG,a),this.cvTagCounter_++):a=-1;return a};
cvox.NodeBreadcrumb.prototype.smartStart_=function(a){for(var b=0;b<a.children.length;++b){var c=a.children[b];this.smartStart_(c);c.getAttribute&&!goog.isNull(c.getAttribute(cvox.NodeBreadcrumb.TOUCHED_TAG))&&this.setNeeded_(c)}};cvox.NodeBreadcrumb.prototype.setNeeded_=function(a){a&&(a.getAttribute&&goog.isNull(a.getAttribute(cvox.NodeBreadcrumb.NEEDED_TAG_)))&&(a.setAttribute(cvox.NodeBreadcrumb.NEEDED_TAG_,!0),"body"!==a.nodeName&&this.setNeeded_(a.parentElement))};
cvox.NodeBreadcrumb.prototype.smartClone_=function(a){var b={};b[cvox.NodeBreadcrumb.TOUCHED_TAG]=!0;b[cvox.NodeBreadcrumb.NEEDED_TAG_]=!0;if(a.getAttribute&&a.getAttribute(cvox.NodeBreadcrumb.TOUCHED_TAG))return cvox.DomUtil.deepClone(a,b);for(var b=cvox.DomUtil.shallowChildlessClone(a,b),c=0;c<a.childNodes.length;++c){var d=a.childNodes[c];d.getAttribute&&!goog.isNull(d.getAttribute(cvox.NodeBreadcrumb.NEEDED_TAG_))&&b.appendChild(this.smartClone_(d))}return b};
cvox.NodeBreadcrumb.prototype.dumpWalkedDom=function(){this.smartStart_(document.body);return this.smartClone_(document.body)};cvox.NodeBreadcrumb.getCurrentNodeTag=function(){for(var a=cvox.ChromeVox.navigationManager.getCurrentNode();a&&!a.hasAttribute;)a=a.parentNode;return a&&a.hasAttribute(cvox.NodeBreadcrumb.TOUCHED_TAG)?a.getAttribute(cvox.NodeBreadcrumb.TOUCHED_TAG):-1};cvox.HistoryEvent=function(a){this.spoken_=[];a?this.userCommand_=a.cmd:this.startTime_=(new Date).getTime()};cvox.HistoryEvent.prototype.withUserCommand=function(a){if(this.userCommand_)return window.console.error("Two user commands on "+a,this),this;this.userCommand_=a;return this};cvox.HistoryEvent.prototype.speak=function(a){this.spoken_.push(a);return this};
cvox.HistoryEvent.prototype.done=function(){this.endTime_=(new Date).getTime();cvox.NodeBreadcrumb.getInstance().tagCurrentNode();window.console.log("User command done.",this);return this};cvox.HistoryEvent.prototype.outputObject=function(){return{start:this.startTime_,end:this.endTime_,cmd:this.userCommand_,spoken:this.spoken_}};
cvox.HistoryEvent.prototype.outputHTML=function(){var a=document.createElement("div");a.className="cvoxHistoryEvent";var b=this.endTime_-this.startTime_;a.innerHTML=this.userCommand_+" ("+b+"ms)";for(b=0;b<this.spoken_.length;b++){var c=document.createElement("div");c.className="cvoxHistoryEventSpoken";c.innerHTML=this.spoken_[b].substr(0,20);20<this.spoken_[b].length&&(c.innerHTML+="...");a.appendChild(c)}return a};
cvox.HistoryEvent.prototype.outputJs=function(){var a="this.waitForCalm(this.userCommand, '"+this.userCommand_+"')";return a=0<this.spoken_.length?a+("\n  .waitForCalm(this.assertSpoken, '"+cvox.DomUtil.collapseWhitespace(this.spoken_.join(" "))+"');\n"):a+";\n"};cvox.History=function(){this.recording_=!1;this.events_=[];this.styleDiv_=this.listDiv_=this.mainDiv_=this.currentEvent_=null;this.nodeBreadcrumb_=cvox.NodeBreadcrumb.getInstance()};goog.addSingletonGetter(cvox.History);
cvox.History.prototype.addListDiv_=function(){this.mainDiv_=document.createElement("div");this.mainDiv_.style.position="fixed";this.mainDiv_.style.bottom="0";this.mainDiv_.style.right="0";this.mainDiv_.style.zIndex="999";this.listDiv_=document.createElement("div");this.listDiv_.id="cvoxEventList";this.mainDiv_.appendChild(this.listDiv_);var a=document.createElement("div"),b=document.createElement("button");b.onclick=cvox.History.sendToFeedback;b.innerHTML="Create bug";a.appendChild(b);this.mainDiv_.appendChild(a);
a=document.createElement("div");b=document.createElement("button");b.onclick=cvox.History.dumpJs;b.innerHTML="Dump test case";a.appendChild(b);this.mainDiv_.appendChild(a);document.body.appendChild(this.mainDiv_);this.styleDiv_=document.createElement("style");this.styleDiv_.innerHTML=".cvoxHistoryEventSpoken { color: gray; font-size: 75% }";document.body.appendChild(this.styleDiv_)};
cvox.History.prototype.removeListDiv_=function(){document.body.removeChild(this.mainDiv_);document.body.removeChild(this.styleDiv_);this.styleDiv_=this.listDiv_=this.mainDiv_=null};
cvox.History.prototype.addBigTextBox_=function(){function a(a,b){var c=document.createElement("button");c.onclick=b;c.innerHTML=a;d.appendChild(c)}var b=document.createElement("div");b.style.position="fixed";b.style.top="0";b.style.left="0";b.style.zIndex="999";var c=document.createElement("textarea");c.style.width="500px";c.style.height="500px";c.innerHTML=this.dumpJsOutput_();b.appendChild(c);var d=document.createElement("div");b.appendChild(d);a("Close dialog",function(){document.body.removeChild(b)});
a("Remove fluff",goog.bind(function(){c.innerHTML=this.dumpJsOutput_(["stopSpeech","toggleKeyPrefix"])},this));document.body.appendChild(b)};cvox.History.prototype.startRecording=function(){this.recording_=!0;this.addListDiv_()};cvox.History.prototype.stopRecording=function(){this.recording_=!1;this.removeListDiv_();this.events_=[];this.currentEvent_=null};
cvox.History.prototype.enterUserCommand=function(a){this.recording_&&(this.currentEvent_&&window.console.error("User command "+a+" overlaps current event",this.currentEvent_),this.currentEvent_=(new cvox.HistoryEvent).withUserCommand(a),this.events_.push(this.currentEvent_))};cvox.History.prototype.exitUserCommand=function(){this.recording_&&this.currentEvent_&&(this.currentEvent_.done(),this.listDiv_.appendChild(this.currentEvent_.outputHTML()),this.currentEvent_=null)};
cvox.History.prototype.speak=function(a){this.recording_&&(this.currentEvent_?this.currentEvent_.speak(a):window.console.error("Speak called outside of a user command."))};cvox.History.dumpJs=function(){var a=cvox.History.getInstance();a.addBigTextBox_();window.console.log(a.dumpJsOutput_())};
cvox.History.prototype.dumpJsOutput_=function(a){var b={};a&&a.forEach(function(a){b[a]=1});return["/*DOC: += ",this.nodeBreadcrumb_.dumpWalkedDom().innerHTML,"*/\n"].concat(this.events_.filter(function(a){return!(a.userCommand_ in b)}).map(function(a){return a.outputJs()})).join("")};
cvox.History.sendToFeedback=function(){var a=cvox.History.getInstance(),a=a.events_.map(function(a){return a.outputObject()}),b=document.createElement("script");b.type="text/javascript";b.src="https://www.gstatic.com/feedback/api.js";var c=document.createElement("script");c.type="text/javascript";c.innerHTML="userfeedback.api.startFeedback({ productId: '76092' }, { cvoxHistory: "+cvox.ChromeVoxJSON.stringify(cvox.ChromeVoxJSON.stringify(a))+" });";b.onload=function(){document.body.appendChild(c)};
document.body.appendChild(b)};cvox.KeySequence=function(a,b){this.cvoxModifier=void 0==b?this.isCVoxModifierActive(a):b;this.stickyMode=!!a.stickyMode;this.prefixKey=!!a.keyPrefix;if(this.stickyMode&&this.prefixKey)throw"Prefix key and sticky mode cannot both be enabled: "+a;this.keys={ctrlKey:[],searchKeyHeld:[],altKey:[],altGraphKey:[],shiftKey:[],metaKey:[],keyCode:[]};this.extractKey_(a)};cvox.KeySequence.KEY_PRESS_CODE={39:222,44:188,45:189,46:190,47:191,59:186,91:219,92:220,93:221};
cvox.KeySequence.prototype.addKeyEvent=function(a){if(1<this.keys.keyCode.length)return!1;this.extractKey_(a);return!0};cvox.KeySequence.prototype.equals=function(a){if(!this.checkKeyEquality_(a))return!1;if(this.cvoxModifier===a.cvoxModifier)return!0;a=this.cvoxModifier?a:this;return a.stickyMode||a.prefixKey};
cvox.KeySequence.prototype.extractKey_=function(a){for(var b in this.keys)if("keyCode"==b){var c;"keypress"==a.type&&97<=a[b]&&122>=a[b]?c=a[b]-32:"keypress"==a.type&&(c=cvox.KeySequence.KEY_PRESS_CODE[a[b]]);this.keys[b].push(c||a[b])}else this.isKeyModifierActive(a,b)?this.keys[b].push(!0):this.keys[b].push(!1);this.cvoxModifier&&this.rationalizeKeys_()};
cvox.KeySequence.prototype.rationalizeKeys_=function(){var a=cvox.ChromeVox.modKeyStr.split(/\+/g),b=this.keys.keyCode.length-1;-1!=a.indexOf("Ctrl")&&(this.keys.ctrlKey[b]=!1);-1!=a.indexOf("Alt")&&(this.keys.altKey[b]=!1);-1!=a.indexOf("Shift")&&(this.keys.shiftKey[b]=!1);var c=this.getMetaKeyName_();if(-1!=a.indexOf(c))if("Search"==c)this.keys.searchKeyHeld[b]=!1;else if("Cmd"==c||"Win"==c)this.keys.metaKey[b]=!1};
cvox.KeySequence.prototype.getMetaKeyName_=function(){return cvox.ChromeVox.isChromeOS?"Search":cvox.ChromeVox.isMac?"Cmd":"Win"};cvox.KeySequence.prototype.checkKeyEquality_=function(a){for(var b in this.keys)for(var c=this.keys[b].length;c--;)if(this.keys[b][c]!==a.keys[b][c])return!1;return!0};cvox.KeySequence.prototype.length=function(){return this.keys.keyCode.length};cvox.KeySequence.prototype.isModifierKey=function(a){return 16==a||17==a||18==a||91==a||93==a};
cvox.KeySequence.prototype.isCVoxModifierActive=function(a){var b=cvox.ChromeVox.modKeyStr.split(/\+/g);this.isKeyModifierActive(a,"ctrlKey")&&(b=b.filter(function(a){return"Ctrl"!=a}));this.isKeyModifierActive(a,"altKey")&&(b=b.filter(function(a){return"Alt"!=a}));this.isKeyModifierActive(a,"shiftKey")&&(b=b.filter(function(a){return"Shift"!=a}));if(this.isKeyModifierActive(a,"metaKey")||this.isKeyModifierActive(a,"searchKeyHeld"))var c=this.getMetaKeyName_(),b=b.filter(function(a){return a!=c});
return 0==b.length};cvox.KeySequence.prototype.isKeyModifierActive=function(a,b){switch(b){case "ctrlKey":return a.ctrlKey||17==a.keyCode;case "altKey":return a.altKey||18==a.keyCode;case "shiftKey":return a.shiftKey||16==a.keyCode;case "metaKey":return a.metaKey||!cvox.ChromeVox.isChromeOS&&91==a.keyCode;case "searchKeyHeld":return cvox.ChromeVox.isChromeOS&&91==a.keyCode||a.searchKeyHeld}return!1};
cvox.KeySequence.deserialize=function(a){var b={};b.stickyMode=void 0==a.stickyMode?!1:a.stickyMode;b.prefixKey=void 0==a.prefixKey?!1:a.prefixKey;var c=1<a.keys.keyCode.length,d={},e;for(e in a.keys)b[e]=a.keys[e][0],c&&(d[e]=a.keys[e][1]);e=new cvox.KeySequence(b,a.cvoxModifier);c&&(cvox.ChromeVox.sequenceSwitchKeyCodes.push(new cvox.KeySequence(b,a.cvoxModifier)),e.addKeyEvent(d));return e};
cvox.KeySequence.fromStr=function(a){var b={},c={},d;d=-1==a.indexOf(">")?!1:!0;var e=!1;b.stickyMode=!1;b.prefixKey=!1;a=a.split("+");for(var f=0;f<a.length;f++)for(var g=a[f].split(">"),h=0;h<g.length;h++){if("#"==g[h].charAt(0)){var i=parseInt(g[h].substr(1),10);0<h?c.keyCode=i:b.keyCode=i}i=g[h];1==g[h].length?0<h?c.keyCode=g[h].charCodeAt(0):b.keyCode=g[h].charCodeAt(0):(0<h?cvox.KeySequence.setModifiersOnEvent_(i,c):cvox.KeySequence.setModifiersOnEvent_(i,b),"Cvox"==i&&(e=!0))}b=new cvox.KeySequence(b,
e);d&&b.addKeyEvent(c);return b};cvox.KeySequence.setModifiersOnEvent_=function(a,b){"Ctrl"==a?(b.ctrlKey=!0,b.keyCode=17):"Alt"==a?(b.altKey=!0,b.keyCode=18):"Shift"==a?(b.shiftKey=!0,b.keyCode=16):"Search"==a?(b.searchKeyHeld=!0,b.keyCode=91):"Cmd"==a?(b.metaKey=!0,b.keyCode=91):"Win"==a?(b.metaKey=!0,b.keyCode=91):"Insert"==a&&(b.keyCode=45)};cvox.KeyUtil=function(){};cvox.KeyUtil.modeKeyPressTime=0;cvox.KeyUtil.sequencing=!1;cvox.KeyUtil.prevKeySequence=null;cvox.KeyUtil.stickyKeySequence=null;cvox.KeyUtil.maxSeqLength=2;
cvox.KeyUtil.keyEventToKeySequence=function(a){var b=cvox.KeyUtil;b.prevKeySequence&&b.maxSeqLength==b.prevKeySequence.length()&&(b.sequencing=!1,b.prevKeySequence=null);var c=b.sequencing||a.keyPrefix||a.stickyMode,d=new cvox.KeySequence(a),e=d.cvoxModifier,f=(new Date).getTime(),g=cvox.KeyUtil.getStickyKeyCode(),g=new cvox.KeySequence({keyCode:g});if(d.equals(g)){g=b.modeKeyPressTime;if(0<g&&300>f-g){if(b.prevKeySequence.addKeyEvent(a))return d=b.prevKeySequence,b.prevKeySequence=null,b.sequencing=
!1,d;throw"Think sticky mode is enabled (by double-tapping), yet util.prevKeySequence already has two key codes "+b.prevKeySequence;}b.modeKeyPressTime=f;b.prevKeySequence=d}else b.modeKeyPressTime=0;if(c||e)if(!b.sequencing&&b.isSequenceSwitchKeyCode(d))b.sequencing=!0,b.prevKeySequence=d;else{if(b.sequencing)if(b.prevKeySequence.addKeyEvent(a))d=b.prevKeySequence,b.prevKeySequence=null,b.sequencing=!1;else throw"Think sequencing is enabled, yet util.prevKeySequence alreadyhas two key codes"+b.prevKeySequence;
}else b.sequencing=!1;return d};cvox.KeyUtil.keyCodeToString=function(a){return 17==a?"Ctrl":18==a?"Alt":16==a?"Shift":91==a||93==a?cvox.ChromeVox.isChromeOS?"Search":cvox.ChromeVox.isMac?"Cmd":"Win":45==a?"Insert":65<=a&&90>=a?String.fromCharCode(a):48<=a&&57>=a?String.fromCharCode(a):"#"+a};cvox.KeyUtil.isSequenceSwitchKeyCode=function(a){for(var b=0;b<cvox.ChromeVox.sequenceSwitchKeyCodes.length;b++){var c=cvox.ChromeVox.sequenceSwitchKeyCodes[b];if(c.equals(a))return!0}return!1};
cvox.KeyUtil.getReadableNameForKeyCode=function(a){if(0==a)return"Power button";if(17==a)return"Control";if(18==a)return"Alt";if(16==a)return"Shift";if(9==a)return"Tab";if(91==a||93==a)return cvox.ChromeVox.isChromeOS?"Search":cvox.ChromeVox.isMac?"Cmd":"Win";if(8==a)return"Backspace";if(32==a)return"Space";if(37==a)return"Left arrow";if(38==a)return"Up arrow";if(39==a)return"Right arrow";if(40==a)return"Down arrow";if(45==a)return"Insert";if(13==a)return"Enter";if(27==a)return"Escape";if(112==a)return cvox.ChromeVox.isChromeOS?
"Back":"F1";if(113==a)return cvox.ChromeVox.isChromeOS?"Forward":"F2";if(114==a)return cvox.ChromeVox.isChromeOS?"Refresh":"F3";if(115==a)return cvox.ChromeVox.isChromeOS?"Toggle full screen":"F4";if(116==a)return"F5";if(117==a)return"F6";if(118==a)return"F7";if(119==a)return"F8";if(120==a)return"F9";if(121==a)return"F10";if(122==a)return"F11";if(123==a)return"F12";if(186==a)return"Semicolon";if(187==a)return"Equal sign";if(188==a)return"Comma";if(189==a)return"Dash";if(190==a)return"Period";if(191==
a)return"Forward slash";if(192==a)return"Grave accent";if(219==a)return"Open bracket";if(220==a)return"Back slash";if(221==a)return"Close bracket";if(222==a)return"Single quote";if(115==a)return"Toggle full screen";if(48<=a&&90>=a)return String.fromCharCode(a)};cvox.KeyUtil.getStickyKeyCode=function(){var a=45;if(cvox.ChromeVox.isChromeOS||cvox.ChromeVox.isMac)a=91;return a};
cvox.KeyUtil.getStickyKeySequence=function(){if(null==cvox.KeyUtil.stickyKeySequence){var a=cvox.KeyUtil.getStickyKeyCode(),a={keyCode:a},b=new cvox.KeySequence(a);b.addKeyEvent(a);cvox.KeyUtil.stickyKeySequence=b}return cvox.KeyUtil.stickyKeySequence};cvox.KeyUtil.getReadableNameForStr=function(){return null};
cvox.KeyUtil.keySequenceToString=function(a,b,c){for(var d="",e=a.length(),f=0;f<e;f++){""!=d&&!c?d+=">":""!=d&&(d+="+");var g="",h;for(h in a.keys)if(a.keys[h][f]){var i="";switch(h){case "ctrlKey":i="Ctrl";break;case "searchKeyHeld":i=cvox.KeyUtil.getReadableNameForKeyCode(91);break;case "altKey":i="Alt";break;case "altGraphKey":i="AltGraph";break;case "shiftKey":i="Shift";break;case "metaKey":i=cvox.KeyUtil.getReadableNameForKeyCode(91);break;case "keyCode":var j=a.keys[h][f];!a.isModifierKey(j)&&
!c&&(g=b?g+cvox.KeyUtil.getReadableNameForKeyCode(j):g+cvox.KeyUtil.keyCodeToString(j))}-1==d.indexOf(i)&&(g+=i+"+")}d+=g;"+"==d[d.length-1]&&(d=d.slice(0,-1))}if(a.cvoxModifier||a.stickyMode||a.prefixKey)d=""!=d?"Cvox+"+d:"Cvox";return d};cvox.KeyMap=function(a,b){this.bindings_=a;if(!b){var c=cvox.KeyUtil.getStickyKeySequence(),c={command:"toggleStickyMode",sequence:c};this.bindings_.push(c)}this.commandToKey_={};this.buildCommandToKey_()};cvox.KeyMap.KEYMAP_PATH="chromevox/background/keymaps/";cvox.KeyMap.AVAILABLE_MAP_INFO={keymap_classic:{file:"classic_keymap.json"},keymap_flat:{file:"flat_keymap.json"},keymap_alt1:{file:"alt_keymap_1.json"},keymap_experimental:{file:"experimental.json"}};cvox.KeyMap.DEFAULT_KEYMAP=0;
cvox.KeyMap.prototype.length=function(){return this.bindings_.length};cvox.KeyMap.prototype.keys=function(){return this.bindings_.map(function(a){return a.sequence})};cvox.KeyMap.prototype.bindings=function(){return this.bindings_};cvox.KeyMap.prototype.toJSON=function(){return JSON.stringify({bindings:this.bindings_})};cvox.KeyMap.prototype.commandForKey=function(a){if(null!=a)for(var b=0;b<this.bindings_.length;b++){var c=this.bindings_[b];if(c.sequence.equals(a))return c.command}return null};
cvox.KeyMap.fromDefaults=function(){return cvox.KeyMap.fromPath(cvox.KeyMap.KEYMAP_PATH+cvox.KeyMap.AVAILABLE_MAP_INFO.keymap_classic.file)};cvox.KeyMap.fromJSON=function(a,b){try{var c=JSON.parse(a).bindings}catch(d){return null}if("object"!=typeof c)return null;for(var e=0;e<c.length;e++){if(void 0==c[e].command||void 0==c[e].sequence)return null;c[e].sequence=cvox.KeySequence.deserialize(c[e].sequence)}return new cvox.KeyMap(c,b)};
cvox.KeyMap.fromLocalStorage=function(){return localStorage.keyBindings?cvox.KeyMap.fromJSON(localStorage.keyBindings):null};cvox.KeyMap.fromPath=function(a){return cvox.KeyMap.fromJSON(cvox.KeyMap.readJSON_(a))};cvox.KeyMap.fromCurrentKeyMap=function(){var a=localStorage.currentKeyMap;return a&&cvox.KeyMap.AVAILABLE_MAP_INFO[a]?cvox.KeyMap.fromPath(cvox.KeyMap.KEYMAP_PATH+cvox.KeyMap.AVAILABLE_MAP_INFO[a].file):cvox.KeyMap.fromDefaults()};
cvox.KeyMap.readJSON_=function(a){var b=chrome.extension.getURL(a);if(!b)throw"Invalid path: "+a;a=new XMLHttpRequest;a.open("GET",b,!1);a.send();return a.responseText};cvox.KeyMap.prototype.buildCommandToKey_=function(){for(var a=0;a<this.bindings_.length;a++){var b=this.bindings_[a];if(void 0!=this.commandToKey_[b.command]){this.commandToKey_=null;break}this.commandToKey_[b.command]=b.sequence}};cvox.CommandStore={};
cvox.CommandStore.store_=[["toggleStickyMode","toggle_sticky_mode","modifier_keys"],["toggleKeyPrefix","prefix_key","modifier_keys"],["stopSpeech","stop_speech_key","controlling_speech"],["toggleChromeVox","toggle_chromevox_active","controlling_speech"],["increaseTtsRate","increase_tts_rate","controlling_speech"],["decreaseTtsRate","decrease_tts_rate","controlling_speech"],["increaseTtsPitch","increase_tts_pitch","controlling_speech"],["decreaseTtsPitch","decrease_tts_pitch","controlling_speech"],
["handleTab","handle_tab_next","chromevox_navigation"],["handleTabPrev","handle_tab_prev","chromevox_navigation"],["backward","backward","chromevox_navigation"],["forward","forward","chromevox_navigation"],["left","left","chromevox_navigation"],["right","right","chromevox_navigation"],["previousGranularity","previous_granularity","chromevox_navigation"],["nextGranularity","next_granularity","chromevox_navigation"],["readFromHere","read_from_here","chromevox_navigation"],["skipBackward","skip_backward",
"chromevox_navigation"],["skipForward","skip_forward","chromevox_navigation"],["forceClickOnCurrentItem","force_click_on_current_item","chromevox_navigation"],["previousCharacter","previous_character","chromevox_navigation"],["nextCharacter","next_character","chromevox_navigation"],["previousWord","previous_word","chromevox_navigation"],["nextWord","next_word","chromevox_navigation"],["previousLine","previous_line","chromevox_navigation"],["nextLine","next_line","chromevox_navigation"],["previousSentence",
"previous_sentence","chromevox_navigation"],["nextSentence","next_sentence","chromevox_navigation"],["previousObject","previous_object","chromevox_navigation"],["nextObject","next_object","chromevox_navigation"],["previousGroup","previous_group","chromevox_navigation"],["nextGroup","next_group","chromevox_navigation"],["readLinkURL","read_link_url","information"],["readCurrentURL","read_current_url","information"],["readCurrentTitle","read_current_title","information"],["toggleSearchWidget","toggle_search_widget",
"information"],["fullyDescribe","fully_describe","information"],["toggleSelection","toggle_selection","information"],["toggleKeyboardHelp","show_power_key","help_commands"],["help","help_commands","help_commands"],["showOptionsPage","show_options_page","help_commands"],["showKbExplorerPage","show_kb_explorer_page","help_commands"],["showFormsList","show_forms_list","overview"],["showHeadingsList","show_headings_list","overview"],["showLinksList","show_links_list","overview"],["showTablesList","show_tables_list",
"overview"],["showLandmarksList","show_landmarks_list","overview"],["nextHeading1","next_heading1","jump_commands"],["nextHeading2","next_heading2","jump_commands"],["nextHeading3","next_heading3","jump_commands"],["nextHeading4","next_heading4","jump_commands"],["nextHeading5","next_heading5","jump_commands"],["nextHeading6","next_heading6","jump_commands"],["nextComboBox","next_combo_box","jump_commands"],["nextEditText","next_edit_text","jump_commands"],["nextFormField","next_form_field","jump_commands"],
["nextGraphic","next_graphic","jump_commands"],["nextHeading","next_heading","jump_commands"],["nextListItem","next_list_item","jump_commands"],["nextLink","next_link","jump_commands"],["nextList","next_list","jump_commands"],["nextRadio","next_radio","jump_commands"],["nextTable","next_table","jump_commands"],["nextButton","next_button","jump_commands"],["nextCheckbox","next_checkbox","jump_commands"],["nextLandmark","next_landmark","jump_commands"],["previousHeading1","previous_heading1","jump_commands"],
["previousHeading2","previous_heading2","jump_commands"],["previousHeading3","previous_heading3","jump_commands"],["previousHeading4","previous_heading4","jump_commands"],["previousHeading5","previous_heading5","jump_commands"],["previousHeading6","previous_heading6","jump_commands"],["previousComboBox","previous_combo_box","jump_commands"],["previousEditText","previous_edit_text","jump_commands"],["previousFormField","previous_form_field","jump_commands"],["previousGraphic","previous_graphic","jump_commands"],
["previousHeading","previous_heading","jump_commands"],["previousListItem","previous_list_item","jump_commands"],["previousLink","previous_link","jump_commands"],["previousList","previous_list","jump_commands"],["previousRadio","previous_radio","jump_commands"],["previousTable","previous_table","jump_commands"],["previousButton","previous_button","jump_commands"],["previousCheckbox","previous_checkbox","jump_commands"],["previousLandmark","previous_landmark","jump_commands"],["toggleTable","toggle_table",
"tables"],["announceHeaders","announce_headers","tables"],["speakTableLocation","speak_table_location","tables"],["skipToBeginning","skip_to_beginning","tables"],["skipToEnd","skip_to_end","tables"],["skipToRowBeginning","skip_to_row_beginning","tables"],["skipToRowEnd","skip_to_row_end","tables"],["skipToColBeginning","skip_to_col_beginning","tables"],["skipToColEnd","skip_to_col_end","tables"],["enableConsoleTts","enable_tts_log","developer"]];cvox.CommandStore.COMMAND_NAME_INDEX_=0;
cvox.CommandStore.MESSAGE_ID_INDEX_=1;cvox.CommandStore.CATEGORY_ID_INDEX_=2;cvox.CommandStore.categoryToCommands_=null;cvox.CommandStore.commandToCategory_=null;cvox.CommandStore.commandToMessage_=null;cvox.CommandStore.categories=function(){var a=[],b;for(b in cvox.CommandStore.categoryToCommands_)a.push(b);return a};cvox.CommandStore.messageForCommand=function(a){return cvox.CommandStore.commandToMessage_[a]};cvox.CommandStore.categoryForCommand=function(a){return cvox.CommandStore.commandToCategory_[a]};
cvox.CommandStore.commandsForCategory=function(a){return cvox.CommandStore.categoryToCommands_[a]};
cvox.CommandStore.init=function(){if(!cvox.CommandStore.commandToCategory_||!cvox.CommandStore.categoryToCommands_||!cvox.CommandStore.commandToMessage_){cvox.CommandStore.commandToCategory_={};cvox.CommandStore.categoryToCommands_={};cvox.CommandStore.commandToMessage_={};for(var a=cvox.CommandStore.COMMAND_NAME_INDEX_,b=cvox.CommandStore.CATEGORY_ID_INDEX_,c=cvox.CommandStore.MESSAGE_ID_INDEX_,d=0;d<cvox.CommandStore.store_.length;++d){var e=cvox.CommandStore.store_[d];cvox.CommandStore.commandToCategory_[e[a]]=
e[b];cvox.CommandStore.commandToMessage_[e[a]]=e[c];cvox.CommandStore.categoryToCommands_[e[b]]||(cvox.CommandStore.categoryToCommands_[e[b]]=[]);cvox.CommandStore.categoryToCommands_[e[b]].push(e[a])}}};var axsjax={common:{}},AxsJAX=function(a){this.ID_NUM_=0;this.tabbingStartPosNode=null;this.tabKeyFixOn=!1;this.lastFocusedNode=null;var b=this;this.activeParent=document.body;this.addFocusBlurMonitors();a&&(this.tabKeyFixOn=!0,document.addEventListener("keypress",function(a){b.tabKeyHandler(a,b)},!0),document.body.AXSJAX_TABKEYFIX_ADDED=!0);this.setAttributeOf(document.body,"role","application")};
AxsJAX.prototype.addFocusBlurMonitors=function(){var a=this.getActiveDocument(),b=this,c=function(a){b.lastFocusedNode=a.target;if("INPUT"==a.target.tagName||"SELECT"==a.target.tagName||"TEXTAREA"==a.target.tagName)b.inputFocused=!0;return!0};a.addEventListener("focus",c,!0);c=function(a){b.removeAttributeOf(b.lastFocusedNode,"aria-activedescendant");b.lastFocusedNode=null;if("INPUT"==a.target.tagName||"SELECT"==a.target.tagName||"TEXTAREA"==a.target.tagName)b.inputFocused=!1;return!0};a.addEventListener("blur",
c,!0)};AxsJAX.prototype.getActiveDocument=function(){for(var a=this.activeParent;9!=a.nodeType;)a=a.parentNode;return a};
AxsJAX.prototype.speakNode=function(a,b){a.id||this.assignId(a);if(b){this.setAttributeOf(a,"live","rude");this.setAttributeOf(a,"atomic","true");var c=this.getActiveDocument(),c=c.createElement("div");c.textContent=" ";c.name="AxsJAX_dummyNode";a.lastChild&&(a.lastChild.name&&a.lastChild.name==c.name)&&a.removeChild(a.lastChild);a.appendChild(c)}else{var d=this.getAttributeOf(a,"role");this.setAttributeOf(a,"role","row");c=this.lastFocusedNode;if(!c||9==c.nodeType)this.activeParent.tabIndex=-1,c=
this.activeParent;this.setAttributeOf(c,"activedescendant",null);c.focus&&c.focus();this.setAttributeOf(c,"activedescendant",a.id);var e=this;window.setTimeout(function(){d?e.setAttributeOf(a,"role",d):e.removeAttributeOf(a,"role")},0)}};
AxsJAX.prototype.speakTextViaNode=function(a,b){var c="AxsJAX_pixelAudioNode",d="AxsJAX_pixelAudioNode",e="data:image/gif;base64,R0lGODlhAQABAIAAANvf7wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",f=this.getActiveDocument(),g=null;b?(b.previousSibling&&b.previousSibling.name==d?g=b.previousSibling:(g=f.createElement("img"),g.name=d,g.setAttribute("tabindex",0),g.style.outline="none",g.src=e,b.parentNode.insertBefore(g,b),this.forceATSync(g)),g.setAttribute("alt",a),g.setAttribute("title",a),window.setTimeout(function(){g.blur();
g.focus()},0)):((g=f.getElementById(c))&&g.alt==a&&(a+=" "),g||(g=f.createElement("img"),g.id=c,g.src=e,f.body.appendChild(g)),g.setAttribute("alt",a),g.setAttribute("title",a),this.speakNode(g))};
AxsJAX.prototype.clickElem=function(a,b){var c=this.getActiveDocument(),d=c.createEvent("MouseEvents");d.initMouseEvent("mousedown",!0,!0,c.defaultView,1,0,0,0,0,!1,!1,b,!1,0,null);try{a.dispatchEvent(d)}catch(e){}d=c.createEvent("MouseEvents");d.initMouseEvent("mouseup",!0,!0,c.defaultView,1,0,0,0,0,!1,!1,b,!1,0,null);try{a.dispatchEvent(d)}catch(f){}d=c.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,c.defaultView,1,0,0,0,0,!1,!1,b,!1,0,null);try{a.dispatchEvent(d)}catch(g){}c=a.getAttribute("href");
"A"==a.tagName&&(c&&"#"!=c)&&(b?window.open(a.href):document.location=a.href)};AxsJAX.prototype.assignId=function(a,b){if(!a)return"";if(a.id)return a.id;var c=b||"AxsJAX_ID_";a.id=c+this.ID_NUM_++;return a.id};AxsJAX.prototype.tabKeyHandler=function(a,b){if(!b.tabKeyFixOn)return!0;9==a.keyCode&&b.tabbingStartPosNode&&(b.tabbingStartPosNode.focus(),b.tabbingStartPosNode=null);return!0};
AxsJAX.prototype.setAttributeOf=function(a,b,c){if(a){b=b.toLowerCase();switch(b){case "live":b="aria-live";break;case "activedescendant":b="aria-activedescendant";break;case "atomic":b="aria-atomic"}a.setAttribute(b,c)}};AxsJAX.prototype.getAttributeOf=function(a,b){return a.getAttribute(b)};AxsJAX.prototype.removeAttributeOf=function(a,b){a&&a.removeAttribute&&a.removeAttribute(b)};
AxsJAX.prototype.forceATSync=function(a){a=this.assignId(a);var b=this.getActiveDocument(),c=b.baseURI,d=c.indexOf("#");-1!=d&&(c=c.substring(0,d));b.location=c+"#"+a};AxsJAX.prototype.evalXPath=function(a,b){try{var c=b.ownerDocument.evaluate(a,b,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null)}catch(d){return[]}for(var e=[],f=c.iterateNext();f;f=c.iterateNext())e.push(f);return e};AxsJAX.initializeOnLoad=function(a){window.addEventListener("load",function(){a()},!0)};axsjax.common.AxsJAX=AxsJAX;
goog.exportSymbol("AxsJAX",AxsJAX);var PowerKey=function(a,b){this.context=a;this.cmpDivElement_=this.listElement_=this.backgroundDivElement=this.cmpTextElement=this.cmpFloatElement=this.parent_=null;this.completionPromptStr_="Enter Completion";this.noCompletionStr_="No completions found";this.axsJAX_=null;this.cmpList_=[];this.listPos_=-1;this.managedCmpLists_=[];this.managedCmpListsPos_=-1;this.hideCmdFieldOnBlur_=!1;this.hideOnEsc_=!0;this.showBackgroundDiv_=!1;this.backgroundColor_="#000000";this.backgroundTransparency_=0;this.managedCompletionListCallback_=
this.completionHandler_=this.completionActionMap_=this.browseCallback_=null;this.nodeMap={};this.indexList_={};b&&PowerKey.isGecko&&(this.axsJAX_=b);var c=this;this.attachHandlerAndListen(window,PowerKey.Event.RESIZE,function(a){c.onPageResize_.call(c,a)},null)};PowerKey.CMD_PARAM=/^\<[A-Z|a-z|0-9|\-|\_]+\>$/;PowerKey.LEFT_TRIMMABLE=/^(\s|\r|\n)+/;PowerKey.RIGHT_TRIMMABLE=/(\s|\r|\n)+$/;
PowerKey.prototype.attachHandlerAndListen=function(a,b,c,d){PowerKey.isGecko&&c?a.addEventListener(b,c,!0):PowerKey.isIE&&c&&a.attachEvent(b,function(a){c(a)});if(d){d=this.expandActionMap(d);var e=new PowerKey.DefaultHandler(d),f=this;this.attachHandlerAndListen(a,b,function(a){e.handler(a,e,f)},null)}};PowerKey.prototype.expandActionMap=function(a){for(var b in a){var c=b.split(",");if(1<c.length){for(var d in c)a[c[d]]=a[b];a[b]=null}}return a};
PowerKey.prototype.createCompletionField=function(a,b,c,d,e,f,g){var h=this,i,j,l,n,m;this.cmpFloatElement&&this.cmpFloatElement.parentNode.removeChild(this.cmpFloatElement);do i="completionField_"+Math.floor(1001*Math.random()),j="txt_"+i,n="div_"+i,m="bgdiv_"+i,l=document.getElementById(i);while(l);this.backgroundDivElement&&this.backgroundDivElement.parentNode.removeChild(this.backgroundDivElement);l=document.createElement("div");l.id=m;l.style.display="none";m=document.createElement("div");m.id=
i;m.style.position="absolute";i=document.createElement("input");i.type="text";i.id=j;i.size=b;i.value="";i.setAttribute("aria-owns",n);i.onkeypress=function(a){a.stopPropagation();if(a.keyCode==PowerKey.keyCodes.TAB)return!1};if(i.readOnly=f)i.style.fontSize=0;b=document.createElement("div");b.id=n;b.setAttribute("tabindex",0);b.setAttribute("role","row");m.appendChild(b);m.appendChild(i);a.appendChild(l);a.appendChild(m);this.parent_=a;this.cmpFloatElement=m;this.cmpTextElement=i;this.backgroundDivElement=
l;this.cmpDivElement_=b;this.listElement_=null;this.cmpFloatElement.className="pkHiddenStatus";this.cmpTextElement.className="pkOpaqueCompletionText";this.backgroundDivElement.className="pkBackgroundHide";g&&this.cmpTextElement.setAttribute("aria-hidden","true");this.completionActionMap_=d;this.completionHandler_=c;e&&(this.addCompletionListByName(this.context,e,this.completionPromptStr_),this.setCompletionListByName(this.context));this.attachHandlerAndListen(this.cmpTextElement,PowerKey.Event.KEYUP,
function(a){h.handleCompletionKeyUp_.call(h,a)},null);this.attachHandlerAndListen(this.cmpTextElement,PowerKey.Event.KEYDOWN,function(a){h.handleCompletionKeyDown_.call(h,a)},null);this.attachHandlerAndListen(this.cmpTextElement,PowerKey.Event.BLUR,function(){h.hideCmdFieldOnBlur_&&h.updateCompletionField(PowerKey.status.HIDDEN)},null)};PowerKey.prototype.setBrowseCallback=function(a){this.browseCallback_=a};PowerKey.prototype.setCompletionActionMap=function(a){this.completionActionMap_=a};
PowerKey.prototype.setCompletionPromptStr=function(a){this.completionPromptStr_=a};PowerKey.prototype.setCompletionList=function(a){if(a){this.managedCmpListsPos_=-1;this.filterList_=this.cmpList_=a;this.indexList_={};a=0;for(var b;b=this.cmpList_[a];a++)this.indexList_[b.toLowerCase()]=a;this.listPos_=-1}};
PowerKey.prototype.addCompletionListByName=function(a,b,c){var d=this.getManagedCompletionListByName_(a);if(d){a=0;for(var e;e=d.values[a];a++)this.nodeMap[e]=null;d.list=b;d.completionPromptStr=c}else d={},d.values=b,d.name=a,d.completionPromptStr=c,d.index=this.managedCmpLists_.length,this.managedCmpLists_.push(d)};PowerKey.prototype.setCompletionListByName=function(a){(a=this.getManagedCompletionListByName_(a))&&this.setManagedCompletionList_(a.index)};
PowerKey.prototype.getManagedCompletionListByName_=function(a){for(var b=0,c;c=this.managedCmpLists_[b];b++)if(c.name==a)return c;return null};
PowerKey.prototype.updateCompletionField=function(a,b,c,d){if(this.cmpFloatElement){var e=this.showBackgroundDiv_,f=this.backgroundColor_,g=this.backgroundTransparency_,h=void 0;-1<this.managedCmpListsPos_&&(h=this.managedCmpLists_[this.managedCmpListsPos_],h.backgoundShow&&(e=h.backgoundShow),h.backgroundColor&&(f=h.backgroundColor),h.backgroundTransparency&&(h.backgroundTransparency=g));if(a==PowerKey.status.VISIBLE){this.parent_.appendChild(this.cmpFloatElement);this.parent_.appendChild(this.backgroundDivElement);
if("pkHiddenStatus"==this.cmpFloatElement.className||0>this.listPos_)h?this.setListElement_(h.completionPromptStr):this.setListElement_(this.completionPromptStr_);this.showBackground_(e,f,g);this.cmpFloatElement.className="pkVisibleStatus";var i=this.cmpTextElement;window.setTimeout(function(){i.focus()},0)}else a==PowerKey.status.HIDDEN&&(PowerKey.isIE&&this.listElement_?this.listElement_.innerText="":this.listElement_&&(this.listElement_.textContent=""),this.showBackground_(!1,f,g),this.cmpFloatElement.className=
"pkHiddenStatus",this.cmpTextElement.value="",this.listPos_=-1,this.parent_.removeChild(this.cmpFloatElement),this.parent_.removeChild(this.backgroundDivElement));b&&(a=PowerKey.getViewportSize(),c||(c=a.height-this.cmpFloatElement.offsetHeight),d||(d=0),this.cmpFloatElement.style.top=c,this.cmpFloatElement.style.left=d)}};PowerKey.prototype.isVisible=function(){return null!=this.cmpFloatElement&&"pkVisibleStatus"==this.cmpFloatElement.className};
PowerKey.prototype.onPageResize_=function(){var a=this;window.setTimeout(function(){a.showBackgroundDiv_&&"block"==a.backgroundDivElement.style.display&&a.showBackground_(a.showBackgroundDiv_,a.backgroundColor_,a.backgroundTransparency_)},0)};
PowerKey.prototype.handleCompletionKeyUp_=function(a){0===this.cmpTextElement.value.length&&(this.filterList_=this.cmpList_);if(a.keyCode!=PowerKey.keyCodes.ARROWUP&&a.keyCode!=PowerKey.keyCodes.ARROWDOWN&&a.keyCode!=PowerKey.keyCodes.ARROWLEFT&&a.keyCode!=PowerKey.keyCodes.ARROWRIGHT&&a.keyCode!=PowerKey.keyCodes.ENTER&&a.keyCode!=PowerKey.keyCodes.TAB&&a.keyCode!=PowerKey.keyCodes.ESC)if(this.cmpTextElement.value.length)this.filterList_=this.getWordFilterMatches_(this.cmpList_,this.cmpTextElement.value,
50),this.listPos_=-1,0<this.filterList_.length?(this.setListElement_(this.filterList_[0]),this.listPos_=0):this.setListElement_(this.noCompletionStr_);else if(-1<this.managedCmpListsPos_){var b=this.managedCmpLists_[this.managedCmpListsPos_];this.setListElement_(b.completionPromptStr)}else this.setListElement_(this.completionPromptStr_);if(a.keyCode==PowerKey.keyCodes.ENTER){if(!this.cmpTextElement.readOnly){this.filterList_&&(0<this.filterList_.length&&this.filterList_[this.listPos_]&&this.cmpTextElement.value!=
this.filterList_[this.listPos_]&&(0>this.filterList_[this.listPos_].indexOf("<")||0<=this.filterList_[this.listPos_].indexOf("<")&&this.filterList_[this.listPos_].split(" ").length>this.cmpTextElement.value.split(" ").length))&&this.selectCurrentListItem_();var c=this.cmpTextElement.value;a=(PowerKey.isIE?this.listElement_.innerText:this.listElement_.textContent).toLowerCase();var d=a.indexOf("<");0<=d?(b=c.substr(0,d-1).toLowerCase(),c=b+" "+c.substr(d)):b=c=c.toLowerCase();d=!1;this.completionActionMap_&&
(d=this.actionHandler_.call(this,c,a,this.completionActionMap_));this.completionHandler_&&!d&&(c=this.getArguments_(c,a),this.completionHandler_(b,this.indexList_[a],this.nodeMap[a],c));this.cmpTextElement.value=""}}else a.keyCode==PowerKey.keyCodes.ESC&&this.hideOnEsc_&&(this.cmpTextElement.blur(),this.updateCompletionField(PowerKey.status.HIDDEN))};
PowerKey.prototype.handleCompletionKeyDown_=function(a){a.keyCode==PowerKey.keyCodes.ARROWUP&&this.filterList_&&0<this.filterList_.length?this.prevListItem_():a.keyCode==PowerKey.keyCodes.ARROWDOWN&&(this.filterList_&&0<this.filterList_.length)&&(this.nextListItem_(),a.preventDefault&&a.preventDefault());a.keyCode==PowerKey.keyCodes.ARROWLEFT&&this.cmpTextElement.readOnly&&0<this.managedCmpLists_.length?this.prevManagedCompletionList_():a.keyCode==PowerKey.keyCodes.ARROWRIGHT&&this.cmpTextElement.readOnly&&
0<this.managedCmpLists_.length?this.nextManagedCompletionList_():a.keyCode==PowerKey.keyCodes.TAB&&(this.filterList_&&0<this.filterList_.length&&this.selectCurrentListItem_(),a.preventDefault&&a.preventDefault())};
PowerKey.prototype.showBackground_=function(a,b,c){a?(this.backgroundDivElement.className="pkBackgroundShow",this.backgroundDivElement.style.display="block",a=PowerKey.getViewportSize(),this.backgroundDivElement.style.width=a.width+"px",this.backgroundDivElement.style.height=a.height+"px",b&&(this.backgroundDivElement.style.backgroundColor=b),c&&this.backgroundDivElement.style.setProperty("-moz-opacity",""+c/100,"")):this.backgroundDivElement.style.display="none"};
PowerKey.prototype.getWordFilterMatches_=function(a,b,c){for(var d=a,e=a,f=b.split(" "),g=0,h;h=f[g];g++)if(e=d,d=[],""!==h){h=PowerKey.regExpEscape(h);var i=RegExp("(^|\\W+)"+h,"i");h=0;for(var j;j=e[h];h++)String(j).match(i)&&d.push(j)}e=a;for(h=0;j=e[h];h++){a=j.split(" ");f=[];for(g=0;(i=a[g])&&"<"!=i.charAt(0);g++)f.push(i);g=f.join(" ");0===b.indexOf(g)&&d.push(j)}d.length>c&&d.slice(0,c-1);return d};
PowerKey.prototype.getArguments_=function(a,b){a=a.replace(/\s+/g," ");b=b.replace(/\s+/g," ");var c=b.indexOf("<");if(0>c)return[];b=b.substr(c);a=a.substr(c);var c=a.split(","),d=b.split(",");if(c.length!=d.length)return[];for(var e=[],f=0,g,h;(g=c[f])&&(h=d[f]);f++)g=PowerKey.leftTrim(PowerKey.rightTrim(g)),h=PowerKey.leftTrim(PowerKey.rightTrim(h)),h.match(PowerKey.CMD_PARAM)&&e.push(g);return e};
PowerKey.prototype.actionHandler_=function(a,b,c){return(c=c[b])&&c[this.context]?(c=c[this.context],a=this.getArguments_(a,b),c instanceof Function?window.setTimeout(c(a),0):window.setTimeout(c+"(args)",0),!0):!1};PowerKey.prototype.prevListItem_=function(){0>this.listPos_&&(this.listPos_=0);this.listPos_=(this.listPos_||this.filterList_.length)-1;0<=this.listPos_&&this.setListElement_(this.filterList_[this.listPos_])};
PowerKey.prototype.nextListItem_=function(){this.listPos_=(this.listPos_+1)%this.filterList_.length;this.listPos_<this.filterList_.length&&this.setListElement_(this.filterList_[this.listPos_])};PowerKey.prototype.prevManagedCompletionList_=function(){var a=this.managedCmpListsPos_-1;0>a&&(a=this.managedCmpLists_.length-1);this.setManagedCompletionList_(a)};PowerKey.prototype.nextManagedCompletionList_=function(){var a=this.managedCmpListsPos_+1;a>=this.managedCmpLists_.length&&(a=0);this.setManagedCompletionList_(a)};
PowerKey.prototype.setManagedCompletionList_=function(a){var b=this.managedCmpLists_[a];this.context=b.name;this.setCompletionList(b.values);this.managedCmpListsPos_=a;a=this.getStatus();this.updateCompletionField(a);this.managedCompletionListCallback_&&this.managedCompletionListCallback_(b.name)};
PowerKey.prototype.selectCurrentListItem_=function(){this.cmpTextElement.value=this.filterList_[0<=this.listPos_?this.listPos_:0];this.filterList_=this.getWordFilterMatches_(this.cmpList_,this.cmpTextElement.value,50);this.axsJAX_&&PowerKey.isGecko&&this.axsJAX_.speakTextViaNode(this.cmpTextElement.value);this.listPos_=0};
PowerKey.prototype.setListElement_=function(a){this.listElement_||(this.listElement_=document.createElement("div"),this.listElement_.id="listElem_"+Math.floor(1001*Math.random()),this.cmpDivElement_.appendChild(this.listElement_));PowerKey.isIE?this.listElement_.innerText=a:this.listElement_.textContent=a;this.browseCallback_&&this.browseCallback_(a,this.indexList_[a.toLowerCase()]);this.axsJAX_&&PowerKey.isGecko&&this.axsJAX_.speakNode(this.listElement_,!1)};
PowerKey.prototype.setDefaultCSSStyle=function(){PowerKey.setDefaultCSSStyle()};PowerKey.prototype.getStatus=function(){return"pkVisibleStatus"==this.cmpFloatElement.className?PowerKey.status.VISIBLE:PowerKey.status.HIDDEN};PowerKey.DefaultHandler=function(a){this.actionMap=a};
PowerKey.DefaultHandler.prototype.handler=function(a,b,c){if(b.actionMap&&a.keyCode){var d=""+a.keyCode,e=String.fromCharCode(a.keyCode).toLowerCase();a.ctrlKey&&(d="Ctrl+"+d,e="Ctrl+"+e);a.altKey&&(d="Alt+"+d,e="Alt+"+e);a.shiftKey&&(d="Shift+"+d,e="Shift+"+e);var f=null;(f=b.actionMap[e])||(f=b.actionMap[d]);if(f&&(b=f[c.context]?f[c.context]:f["*"]))if(d=b[1])d(a),"*"!=b[0]&&(c.context=b[0])}};PowerKey.ViewportSize=function(a,b){this.width=a?a:void 0;this.height=b?b:void 0};
PowerKey.leftTrim=function(a){return a.replace(PowerKey.LEFT_TRIMMABLE,"")};PowerKey.rightTrim=function(a){return a.replace(PowerKey.RIGHT_TRIMMABLE,"")};PowerKey.regExpEscape=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};
PowerKey.getViewportSize=function(){var a=0,b=0;if("number"==typeof window.innerWidth)a=window.innerWidth,b=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))a=document.documentElement.clientWidth,b=document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))a=document.body.clientWidth,b=document.body.clientHeight;return new PowerKey.ViewportSize(a,b)};
PowerKey.isIE=!1;PowerKey.isGecko=!1;PowerKey.setBrowser=function(){var a=navigator.userAgent.toLowerCase();PowerKey.isGecko=-1!=a.indexOf("gecko");PowerKey.isIE=-1!=a.indexOf("msie")&&-1==a.indexOf("opera")};PowerKey.setBrowser();
PowerKey.Event={KEYUP:PowerKey.isIE?"onkeyup":"keyup",KEYDOWN:PowerKey.isIE?"onkeydown":"keydown",KEYPRESS:PowerKey.isIE?"onkeypress":"keypress",CLICK:PowerKey.isIE?"onclick":"click",RESIZE:PowerKey.isIE?"onresize":"resize",FOCUS:PowerKey.isIE?"onfocus":"focus",BLUR:PowerKey.isIE?"onblur":"blur"};PowerKey.cssStr=".pkHiddenStatus {display: none; position: absolute;}.pkVisibleStatus {display: block; position: absolute; left: 2px; top: 2px; line-height: 1.2em; z-index: 10001; background-color: #000000; padding: 2px; color: #fff; font-family: Arial, Sans-serif; font-size: 20px; filter: alpha(opacity=80); -moz-opacity: .80;}.pkOpaqueCompletionText {border-style: none; background-color:transparent; font-family: Arial, Helvetica, sans-serif; font-size: 35px; font-weight: bold; color: #fff; width: 1000px; height: 50px;}.pkBackgroundShow {position: absolute; width: 0px;height: 0px; background-color: #000000; filter: alpha(opacity=70);  -moz-opacity: .70; left: 0px; top: 0px; z-index: 10000;}";
PowerKey.setDefaultCSSStyle=function(){var a,b;if(a=document.getElementsByTagName("head")[0])b=document.createElement("style"),b.type="text/css",PowerKey.isIE?b.innerhtml=PowerKey.cssStr:PowerKey.isGecko&&(b.innerHTML=PowerKey.cssStr),a.appendChild(b)};PowerKey.addCSSStyle=function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("link");c.type="text/css";c.rel="stylesheet";c.href=a;b.appendChild(c)};
PowerKey.keyCodes={ARROWUP:38,ARROWDOWN:40,ARROWLEFT:37,ARROWRIGHT:39,ENTER:13,TAB:9,ESC:27};PowerKey.str={DEFAULT_COMPLETION_LIST_NAME:"Completion list",DEFAULT_COMPLETION_PROMPT:"Enter Completion",DEFAULT_NO_COMPLETION:"No completions found"};PowerKey.status={VISIBLE:"visible",HIDDEN:"hidden"};axsjax.common.PowerKey=PowerKey;goog.exportSymbol("PowerKey",PowerKey);cvox.SpokenMessage=function(){this.raw=this.id=this.count=null};cvox.SpokenMessages={};cvox.SpokenMessages.messages=[];cvox.SpokenMessages.speakFlush=function(){cvox.SpokenMessages.speak(cvox.AbstractTts.QUEUE_MODE_FLUSH)};cvox.SpokenMessages.speakQueued=function(){cvox.SpokenMessages.speak(cvox.AbstractTts.QUEUE_MODE_QUEUE)};
cvox.SpokenMessages.speak=function(a){for(var b=0;b<cvox.SpokenMessages.messages.length;++b){var c=cvox.SpokenMessages.messages[b];if(!c||!c.id&&!c.raw)throw"Invalid message received.";var d="";if(null!=c.count)if(0>=c.count)try{d+=cvox.ChromeVox.msgs.getMsg(c.id[0]+"_optional_default")}catch(e){continue}else d=1==c.count?d+cvox.ChromeVox.msgs.getMsg(c.id[0]+"_singular"):d+cvox.ChromeVox.msgs.getMsg(c.id[0]+"_plural",[c.count]);else d=c.raw?d+c.raw:d+cvox.ChromeVox.msgs.getMsg.apply(cvox.ChromeVox.msgs,
c.id);cvox.ChromeVox.tts.speak(d,a);a=cvox.AbstractTts.QUEUE_MODE_QUEUE}cvox.SpokenMessages.messages=[]};cvox.SpokenMessages.currentMessage=function(){if(0==cvox.SpokenMessages.messages.length)throw"Invalid usage of SpokenMessages; start the chain using $m()";return cvox.SpokenMessages.messages[cvox.SpokenMessages.messages.length-1]};cvox.SpokenMessages.withCount=function(a){cvox.SpokenMessages.currentMessage().count=a;return cvox.SpokenMessages};
cvox.SpokenMessages.andIndexTotal=function(a,b){var c=new cvox.SpokenMessage;c.raw=cvox.ChromeVox.msgs.getMsg("index_total",[a,b]);cvox.SpokenMessages.messages.push(c);return cvox.SpokenMessages};cvox.SpokenMessages.andEnd=function(){return cvox.SpokenMessages.andMessage("end")};cvox.SpokenMessages.andMessage=function(a){var b=new cvox.SpokenMessage;b.id="string"==typeof a?[a]:a;cvox.SpokenMessages.messages.push(b);return cvox.SpokenMessages};
cvox.SpokenMessages.andRawMessage=function(a){var b=new cvox.SpokenMessage;b.raw=a;cvox.SpokenMessages.messages.push(b);return cvox.SpokenMessages};cvox.SpokenMessages.andPause=function(){return cvox.SpokenMessages.andMessage("pause")};cvox.$m=cvox.SpokenMessages.andMessage;cvox.Widget=function(){this.active=!1;this.initialNode=null;if(!cvox.Widget.ref_||!cvox.Widget.ref_.isActive())cvox.Widget.ref_=this};cvox.Widget.prototype.isActive=function(){return this.active};
cvox.Widget.prototype.show=function(){this.isActive()&&this.hide(!0);this.onKeyDown=goog.bind(this.onKeyDown,this);this.onKeyPress=goog.bind(this.onKeyPress,this);document.addEventListener("keydown",this.onKeyDown,!0);document.addEventListener("keypress",this.onKeyPress,!0);this.initialNode=cvox.ChromeVox.navigationManager.getCurrentNode();this.isStickyOn=cvox.ChromeVox.isStickyOn;cvox.ChromeVox.host.sendToBackgroundPage({target:"Prefs",action:"setPref",pref:"sticky",value:!1,announce:!1});this.getNameMsg()&&
this.getHelpMsg()&&cvox.$m(this.getNameMsg()).andPause().andMessage(this.getHelpMsg()).speakFlush();cvox.ChromeVox.earcons.playEarcon(cvox.AbstractEarcons.OBJECT_OPEN);this.active=!0};
cvox.Widget.prototype.hide=function(a){document.removeEventListener("keypress",this.onKeyPress,!0);document.removeEventListener("keydown",this.onKeyDown,!0);cvox.ChromeVox.host.sendToBackgroundPage({target:"Prefs",action:"setPref",pref:"sticky",value:this.isStickyOn,announce:!1});cvox.ChromeVox.earcons.playEarcon(cvox.AbstractEarcons.OBJECT_CLOSE);a||(this.initialNode=1==this.initialNode.nodeType?this.initialNode:this.initialNode.parentNode,cvox.ApiImplementation.syncToNode(this.initialNode,!0,cvox.AbstractTts.QUEUE_MODE_QUEUE));
this.active=!1};cvox.Widget.prototype.toggle=function(){this.isActive()?this.hide():this.show()};cvox.Widget.prototype.onKeyDown=function(a){if(27==a.keyCode)return this.hide(),a.preventDefault(),a.stopPropagation(),!0;if(9==a.keyCode)return this.hide(),!0;17==a.keyCode&&cvox.ChromeVox.tts.stop();return!1};cvox.Widget.prototype.onKeyPress=function(){return!1};cvox.Widget.isActive=function(){return cvox.Widget.ref_&&cvox.Widget.ref_.isActive()||!1};cvox.ChoiceWidget=function(a,b){this.powerKey_=new axsjax.common.PowerKey("main",null);this.powerKey_.createCompletionField(document.body,50,null,null,null,!1,!0);this.powerKey_.setDefaultCSSStyle();for(var c=[],d={},e=0,f;f=a[e];e++){for(var g=f.toLowerCase(),h=2;g in d;)f=a[e]+" "+h,g=f.toLowerCase(),h++;d[g]=!0;c.push(f)}this.powerKey_.setCompletionList(c);d={};for(e=0;f=c[e];e++)g={},g.main=b[e],d[f.toLowerCase()]=g;this.powerKey_.setCompletionActionMap(d);this.prevIndex_=0;var i=this;this.powerKey_.setBrowseCallback(function(a,
b){cvox.ChromeVox.tts.speak(a,cvox.AbstractTts.QUEUE_MODE_FLUSH,null);(0==b&&i.prevIndex_==c.length-1||b==c.length-1&&0==i.prevIndex_)&&cvox.ChromeVox.earcons.playEarcon(cvox.AbstractEarcons.WRAP);i.prevIndex_=b});e=cvox.ChromeVox.msgs.getMsg.apply(cvox.ChromeVox.msgs,this.getNameMsg())+". "+cvox.ChromeVox.msgs.getMsg(this.getHelpMsg());this.powerKey_.setCompletionPromptStr(e);this.powerKey_.updateCompletionField(window.PowerKey.status.HIDDEN);cvox.Widget.call(this)};
goog.inherits(cvox.ChoiceWidget,cvox.Widget);cvox.ChoiceWidget.prototype.show=function(){cvox.ChoiceWidget.superClass_.show.call(this);this.powerKey_.updateCompletionField(window.PowerKey.status.VISIBLE,!0,40,20)};cvox.ChoiceWidget.prototype.hide=function(a){this.powerKey_.updateCompletionField(window.PowerKey.status.HIDDEN);cvox.$m("choice_widget_exited").andPause().andMessage(this.getNameMsg()).speakFlush();cvox.ChoiceWidget.superClass_.hide.call(this,a)};
cvox.ChoiceWidget.prototype.isActive=function(){return!!(this.powerKey_&&this.powerKey_.getStatus()==window.PowerKey.status.VISIBLE)};cvox.ChoiceWidget.prototype.getHelpMsg=function(){return"choice_widget_help"};cvox.KeyboardHelpWidget=function(){cvox.CommandStore.init();var a=[],b=[],c=cvox.ChromeVoxKbHandler.handlerKeyMap;c.bindings().forEach(goog.bind(function(c){var e=c.command;c=c.sequence;var f=e;try{var g=cvox.CommandStore.messageForCommand(e);if(!g)return;f=cvox.ChromeVox.msgs.getMsg(g)}catch(h){}a.push(f+" - "+cvox.KeyUtil.keySequenceToString(c,!0));b.push(this.createCallback_(e))},this));return cvox.ChoiceWidget.call(this,a,b)};goog.inherits(cvox.KeyboardHelpWidget,cvox.ChoiceWidget);goog.addSingletonGetter(cvox.KeyboardHelpWidget);
cvox.KeyboardHelpWidget.prototype.getNameMsg=function(){return["keyboard_help_intro"]};cvox.KeyboardHelpWidget.prototype.createCallback_=function(a){return goog.bind(function(){this.hide(!0);cvox.ChromeVoxUserCommands.commands[a]()},this)};cvox.AbstractWalker=function(){};cvox.AbstractWalker.prototype.syncToPageBeginning=function(a){a=a||{reversed:!1};return this.sync(cvox.CursorSelection.fromBody().setReversed(a.reversed))};cvox.AbstractWalker.prototype.act=function(){return!1};cvox.AbstractNodeWalker=function(){this.wasBegin_=!1};goog.inherits(cvox.AbstractNodeWalker,cvox.AbstractWalker);cvox.AbstractNodeWalker.prototype.next=function(a){var b=a.isReversed();a=a.end.node||document.body;do if(a=cvox.DomUtil.directedNextLeafLikeNode(a,b,goog.bind(this.stopNodeDescent,this)),!a)return null;while(a&&!cvox.DomUtil.hasContent(a));return cvox.CursorSelection.fromNode(a).setReversed(b)};
cvox.AbstractNodeWalker.prototype.sync=function(a){a=this.privateSync_(a);this.wasBegin_=!1;return a};
cvox.AbstractNodeWalker.prototype.privateSync_=function(a){var b=a.isReversed();if(a.equals(cvox.CursorSelection.fromBody())){if(this.wasBegin_)return cvox.CursorSelection.fromBody().setReversed(b);this.wasBegin_=!0}for(a=a.start.node;a!=document.body&&a.parentNode&&this.stopNodeDescent(a.parentNode);)a=a.parentNode;for(;!this.stopNodeDescent(a);)a=cvox.DomUtil.directedFirstChild(a,b);var c=cvox.CursorSelection.fromNode(a);cvox.DomUtil.hasContent(a)||(c=this.next(cvox.CursorSelection.fromNode(a).setReversed(b)));
return c?c.setReversed(b):this.syncToPageBeginning({reversed:b})};cvox.BareObjectWalker=function(){cvox.AbstractNodeWalker.call(this)};goog.inherits(cvox.BareObjectWalker,cvox.AbstractNodeWalker);cvox.BareObjectWalker.prototype.stopNodeDescent=function(a){return cvox.DomUtil.isLeafNode(a)};cvox.AuralStyleConverter={};cvox.AuralStyleUtil={};
cvox.AuralProperty={VOLUME:"VOLUME",SPEAK:"SPEAK",PAUSE_BEFORE:"PAUSE_BEFORE",PAUSE_AFTER:"PAUSE_AFTER",PAUSE:"PAUSE",CUE_BEFORE:"CUE_BEFORE",CUE_AFTER:"CUE_AFTER",CUE:"CUE",PLAY_DURING:"PLAY_DURING",AZIMUTH:"AZIMUTH",ELEVATION:"ELEVATION",SPEECH_RATE:"SPEECH_RATE",VOICE_FAMILY:"VOICE_FAMILY",PITCH:"PITCH",PITCH_RANGE:"PITCH_RANGE",STRESS:"STRESS",RICHNESS:"RICHNESS",SPEAK_PUNCTUATION:"SPEAK_PUNCTUATION",SPEAK_NUMERIAL:"SPEAK_NUMERIAL",SPEAK_HEADER:"SPEAK_HEADER",NONE:"NONE"};
cvox.AuralStyleConverter.identity=function(a){return a};cvox.AuralStyleConverter.propertyTable={VOLUME:"volume",SPEAK:"no-op",PAUSE_BEFORE:"no-op",PAUSE_AFTER:"no-op",PAUSE:"no-op",CUE_BEFORE:"no-op",CUE_AFTER:"no-op",CUE:"no-op",PLAY_DURING:"no-op",AZIMUTH:"no-op",ELEVATION:"no-op",SPEECH_RATE:"relativeRate",VOICE_FAMILY:"no-op",PITCH:"relativePitch",PITCH_RANGE:"no-op",STRESS:"no-op",RICHNESS:"no-op",SPEAK_PUNCTUATION:"no-op",SPEAK_NUMERIAL:"no-op",SPEAK_HEADER:"no-op",NONE:"no-op"};
cvox.AuralStyleConverter.valueTable={VOLUME:cvox.AuralStyleConverter.identity,SPEAK:cvox.AuralStyleConverter.identity,PAUSE_BEFORE:cvox.AuralStyleConverter.identity,PAUSE_AFTER:cvox.AuralStyleConverter.identity,PAUSE:cvox.AuralStyleConverter.identity,CUE_BEFORE:cvox.AuralStyleConverter.identity,CUE_AFTER:cvox.AuralStyleConverter.identity,CUE:cvox.AuralStyleConverter.identity,PLAY_DURING:cvox.AuralStyleConverter.identity,AZIMUTH:cvox.AuralStyleConverter.identity,ELEVATION:cvox.AuralStyleConverter.identity,
SPEECH_RATE:cvox.AuralStyleConverter.identity,VOICE_FAMILY:cvox.AuralStyleConverter.identity,PITCH:cvox.AuralStyleConverter.identity,PITCH_RANGE:cvox.AuralStyleConverter.identity,STRESS:cvox.AuralStyleConverter.identity,RICHNESS:cvox.AuralStyleConverter.identity,SPEAK_PUNCTUATION:cvox.AuralStyleConverter.identity,SPEAK_NUMERIAL:cvox.AuralStyleConverter.identity,SPEAK_HEADER:cvox.AuralStyleConverter.identity,NONE:cvox.AuralStyleConverter.identity};
cvox.AuralStyleConverter.convertRule=function(a,b){return{property:cvox.AuralStyleConverter.propertyTable[a],value:cvox.AuralStyleConverter.valueTable[a](b)}};cvox.AuralStyleConverter.convertStyle=function(a){var b={},c;for(c in a){var d=cvox.AuralStyleConverter.convertRule(c,a[c]);b[d.property]=d.value}return b};cvox.AuralStyleUtil.getStyleForNode=function(a){a=cvox.AuralStyleUtil.defaultStyles[a.tagName];return!a?null:cvox.AuralStyleConverter.convertStyle(a)};
cvox.AuralStyleUtil.defaultStyles={ARTICLE:{PITCH:-0.1},ASIDE:{PITCH:-0.1},FOOTER:{PITCH:-0.1},H1:{PITCH:-0.3},H2:{PITCH:-0.25},H3:{PITCH:-0.2},H4:{PITCH:-0.15},H5:{PITCH:-0.1},H6:{PITCH:-0.05},HEADER:{PITCH:-0.1},HGROUP:{PITCH:-0.1},MARK:{PITCH:-0.1},NAV:{PITCH:-0.1},SECTION:{PITCH:-0.1},TIME:{PITCH:-0.1}};cvox.EarconUtil={};
cvox.EarconUtil.getEarcon=function(a){var b=cvox.AriaUtil.getEarcon(a);if(null!=b)return b;switch(a.tagName){case "BUTTON":return cvox.AbstractEarcons.BUTTON;case "A":if(a.hasAttribute("href"))return cvox.AbstractEarcons.LINK;break;case "LI":return cvox.AbstractEarcons.LIST_ITEM;case "SELECT":return cvox.AbstractEarcons.LISTBOX;case "TEXTAREA":return cvox.AbstractEarcons.EDITABLE_TEXT;case "INPUT":switch(a.type){case "button":case "submit":case "reset":return cvox.AbstractEarcons.BUTTON;case "checkbox":case "radio":return a.checked?
cvox.AbstractEarcons.CHECK_ON:cvox.AbstractEarcons.CHECK_OFF;default:if(cvox.DomUtil.isInputTypeText(a))return cvox.AbstractEarcons.EDITABLE_TEXT}}return null};cvox.NavDescription=function(a){this.context=a.context?a.context:"";this.text=a.text?a.text:"";this.userValue=a.userValue?a.userValue:"";this.annotation=a.annotation?a.annotation:"";this.earcons=a.earcons?a.earcons:[];this.personality=a.personality};cvox.NavDescription.prototype.isEmpty=function(){return 0==this.context.length&&0==this.earcons.length&&0==this.text.length&&0==this.userValue.length&&0==this.annotation.length};
cvox.NavDescription.prototype.toString=function(){return'NavDescription(context="'+this.context+'"  text="'+this.text+'"  userValue="'+this.userValue+'"  annotation="'+this.annotation+'")'};cvox.NavDescription.prototype.pushEarcon=function(a){this.earcons.push(a)};
cvox.NavDescription.prototype.speak=function(a,b,c){function d(){var a={},b=cvox.AbstractTts.PERSONALITY_ANNOTATION,c;for(c in b)a[c]=b[c];return a}var e=[];this.context&&(e.push([this.context,a,d()]),a=1);e.push([this.text,a,this.personality?this.personality:{}]);a=1;this.userValue&&e.push([this.userValue,a,{}]);this.annotation&&e.push([this.annotation,a,d()]);a=e.length;for(var f=0;f<a;f++)0==f&&b&&(e[f][2].startCallback=b),f==a-1&&c&&(e[f][2].endCallback=c),cvox.ChromeVox.tts.speak.apply(cvox.ChromeVox.tts,
e[f])};cvox.DescriptionUtil={};
cvox.DescriptionUtil.getControlDescription=function(a,b){var c=[a];if(b&&0<b.length)c=b;else{var d=cvox.DomUtil.getSurroundingControl(a);d&&(c=[d,a])}c=cvox.DescriptionUtil.getDescriptionFromAncestors(c,!0,cvox.VERBOSITY_VERBOSE);if(d){var e=cvox.DomUtil.getName(d);0==e.length&&(e=cvox.DomUtil.getControlLabelHeuristics(d),0<e.length&&(c.context=e+" "+c.context))}else e=cvox.DomUtil.getName(a),0==e.length&&(e=cvox.DomUtil.getControlLabelHeuristics(a),0<e.length&&(c.text=cvox.DomUtil.collapseWhitespace(e))),d=
cvox.DomUtil.getValue(a),0<d.length&&(c.userValue=cvox.DomUtil.collapseWhitespace(d));return c};
cvox.DescriptionUtil.getDescriptionFromAncestors=function(a,b,c){"undefined"===typeof b&&(b=!0);var d=a.length,e="",f="",g="",h="",i=[],j=null;0<d&&(f=cvox.DomUtil.getName(a[d-1],b),g=cvox.DomUtil.getValue(a[d-1]));for(b=d-1;0<=b;b--){var l=a[b],n=l.getAttribute?l.getAttribute("role"):null;if(!("dialog"==n||"alertdialog"==n)){n=cvox.DomUtil.getRole(l,c);j||(j=cvox.AuralStyleUtil.getStyleForNode(l));if(b<d-1&&l.hasAttribute("role")){var m=cvox.DomUtil.getName(l,!1);m&&(n=m+" "+n)}0<n.length&&(0<e.length||
0<h.length&&1<l.childElementCount?e=n+" "+cvox.DomUtil.getState(l,!1)+" "+e:h=0<h.length?h+(" "+n+" "+cvox.DomUtil.getState(l,!0)):n+" "+cvox.DomUtil.getState(l,!0));l=cvox.EarconUtil.getEarcon(l);null!=l&&-1==i.indexOf(l)&&i.push(l)}}return new cvox.NavDescription({context:cvox.DomUtil.collapseWhitespace(e),text:cvox.DomUtil.collapseWhitespace(f),userValue:cvox.DomUtil.collapseWhitespace(g),annotation:cvox.DomUtil.collapseWhitespace(h),earcons:i,personality:j})};
cvox.DescriptionUtil.getCollectionDescription=function(a,b){var c=cvox.DescriptionUtil.getRawDescriptions_(a,b);cvox.DescriptionUtil.insertCollectionDescription_(c);return c};cvox.DescriptionUtil.subWalker_=new cvox.BareObjectWalker;
cvox.DescriptionUtil.getRawDescriptions_=function(a,b){var c=[];b=b.clone().setReversed(!1);var d=cvox.DescriptionUtil.subWalker_.sync(b).start.node,e=a.end.node,f=cvox.CursorSelection.fromNode(d);if(!f)return[];for(;cvox.DomUtil.isDescendantOfNode(d,b.start.node);){e=cvox.DomUtil.getUniqueAncestors(e,d);e=cvox.DescriptionUtil.getDescriptionFromAncestors(e,!0,cvox.ChromeVox.verbosity);c.push(e);f=cvox.DescriptionUtil.subWalker_.next(f);if(!f)break;e=d;d=f.start.node}return c};
cvox.DescriptionUtil.getFullDescriptionsFromChildren=function(a,b){var c=[];if(!b)return c;var d;if(cvox.DomUtil.isLeafNode(b))return a?d=cvox.DomUtil.getUniqueAncestors(a,b):(d=[],d.push(b)),d=cvox.DescriptionUtil.getDescriptionFromAncestors(d,!0,cvox.ChromeVox.verbosity),c.push(d),c;d=b;var e=cvox.CursorSelection.fromNode(b);if(!e)return c;b=cvox.DescriptionUtil.subWalker_.sync(e).start.node;e=cvox.CursorSelection.fromNode(b);if(!e)return c;for(;cvox.DomUtil.isDescendantOfNode(b,d);){c=c.concat(cvox.DescriptionUtil.getFullDescriptionsFromChildren(a,
b));e=cvox.DescriptionUtil.subWalker_.next(e);if(!e)break;a=b;b=e.start.node}return c};
cvox.DescriptionUtil.insertCollectionDescription_=function(a){var b=cvox.DescriptionUtil.getAnnotations_(a);if(3<=a.length&&0==a[0].context.length&&1==b.length&&0<b[0].length&&cvox.DescriptionUtil.isAnnotationCollection_(b[0])){var b=b[0],c=a[0].context;a[0].context="";for(var d=0;d<a.length;d++)a[d].annotation="";a.splice(0,0,new cvox.NavDescription({context:c,annotation:cvox.ChromeVox.msgs.getMsg("collection",[b,cvox.ChromeVox.msgs.getNumber(a.length)])}))}};
cvox.DescriptionUtil.getAnnotations_=function(a){for(var b=[],c=0;c<a.length;++c){var d=a[c];if(-1==b.indexOf(d.annotation)){var e=cvox.ChromeVox.msgs.getMsg("tag_link");-1!=d.annotation.toLowerCase().indexOf(e.toLowerCase())?-1==b.indexOf(e)&&b.push(e):b.push(d.annotation)}}return b};cvox.DescriptionUtil.isAnnotationCollection_=function(a){return a==cvox.ChromeVox.msgs.getMsg("tag_link")};cvox.Interframe=function(){};cvox.Interframe.IF_MSG_PREFIX="cvox.INTERFRAME:";cvox.Interframe.SET_ID="cvox.INTERFRAME_SET_ID";cvox.Interframe.listeners=[];cvox.Interframe.allowAccessToIframeContentWindow=!0;
cvox.Interframe.init=function(){cvox.Interframe.messageListener=function(a){if("string"===typeof a.data&&0==a.data.indexOf(cvox.Interframe.IF_MSG_PREFIX)){a=a.data.substr(cvox.Interframe.IF_MSG_PREFIX.length);a=cvox.ChromeVoxJSON.parse(a);a.command==cvox.Interframe.SET_ID&&(cvox.Interframe.id=a.id);for(var b=0,c;c=cvox.Interframe.listeners[b];b++)c(a)}return!1};window.addEventListener("message",cvox.Interframe.messageListener,!0)};
cvox.Interframe.shutdown=function(){window.removeEventListener("message",cvox.Interframe.messageListener,!0)};cvox.Interframe.addListener=function(a){cvox.Interframe.listeners.push(a)};cvox.Interframe.sendMessageToWindow=function(a,b){var c=cvox.Interframe.IF_MSG_PREFIX+cvox.ChromeVoxJSON.stringify(a,null,null);b.postMessage(c,"*")};
cvox.Interframe.sendMessageToIFrame=function(a,b){if(cvox.Interframe.allowAccessToIframeContentWindow&&b.contentWindow)cvox.Interframe.sendMessageToWindow(a,b.contentWindow);else{var c=cvox.Interframe.IF_MSG_PREFIX+cvox.ChromeVoxJSON.stringify(a,null,null),d=document.createElement("script");d.type="text/javascript";if(b.hasAttribute("id")&&document.getElementById(b.id)==b)d.innerHTML="document.getElementById(decodeURI('"+encodeURI(b.id)+"')).contentWindow.postMessage(decodeURI('"+encodeURI(c)+"'), '*');";
else{var e="cvox_iframe"+a.id;""===b.className?b.className=e:-1==b.className.indexOf(e)&&(b.className+=" "+e);d.innerHTML="document.getElementsByClassName(decodeURI('"+encodeURI(e)+"'))[0].contentWindow.postMessage(decodeURI('"+encodeURI(c)+"'), '*');"}document.head.appendChild(d);window.setTimeout(function(){document.head.removeChild(d)},1E3)}};
cvox.Interframe.sendMessageToParentWindow=function(a){cvox.Interframe.isIframe()&&(a.sourceId=cvox.Interframe.id,window.parent?cvox.Interframe.sendMessageToWindow(a,window.parent):(a=cvox.Interframe.IF_MSG_PREFIX+cvox.ChromeVoxJSON.stringify(a,null,null),window.location.href="javascript:window.parent.postMessage('"+encodeURI(a)+"', '*');"))};cvox.Interframe.sendIdToIFrame=function(a,b){var c={command:cvox.Interframe.SET_ID,id:a};cvox.Interframe.sendMessageToIFrame(c,b)};
cvox.Interframe.isIframe=function(){return window!=window.parent};cvox.Interframe.init();cvox.PageSelection=function(a){this.sel_=a.clone();this.sel_.select();this.wasBegin_=!0};
cvox.PageSelection.prototype.getDescription=function(a,b,c){var d=[];this.sel_.isReversed()!=c.isReversed()?(d=a.getDescription(c,b),d[0].annotation=cvox.ChromeVox.msgs.getMsg("describe_unselected"),d[0].pushEarcon(cvox.AbstractEarcons.SELECTION_REVERSE)):(d=a.getDescription(b,c),d[0].annotation=cvox.ChromeVox.msgs.getMsg("describe_selected"),d[0].pushEarcon(cvox.AbstractEarcons.SELECTION),!this.wasBegin_&&this.sel_.absEquals(c.clone().normalize())&&(a=a.getDescription(c,b),a[0].annotation=cvox.ChromeVox.msgs.getMsg("describe_unselected"),
a[0].pushEarcon(cvox.AbstractEarcons.SELECTION_REVERSE),a[0].pushEarcon(cvox.AbstractEarcons.WRAP),d=a.concat(d)));return d};cvox.PageSelection.prototype.getFullDescription=function(){return[new cvox.NavDescription({text:window.getSelection().toString(),context:cvox.ChromeVox.msgs.getMsg("selection_is")})]};
cvox.PageSelection.prototype.extend=function(a){this.sel_.directedBefore(a)?this.sel_.end=this.sel_.isReversed()==a.isReversed()?a.end.clone():a.start.clone():this.sel_=a.clone();this.sel_.select();this.wasBegin_=!1;return!this.sel_.absEquals(a)};cvox.WalkerDecorator=function(){this.filters=[];this.filterMap_={};this.isInclusive_=!1};cvox.WalkerDecorator.prototype.getIsInclusive=function(){return this.isInclusive_};cvox.WalkerDecorator.prototype.decorate=function(a){a.next=this.filteredMove_(a,a.next)};cvox.WalkerDecorator.prototype.filteredMove_=function(a,b){return goog.bind(function(c){for(var d=b.call(a,c);d&&d!=c&&this.matchesFilter(d.start.node)!=this.getIsInclusive();)d=b.call(a,d);return d},this)};
cvox.WalkerDecorator.prototype.addFilter=function(a){null!=a&&-1==this.filters.indexOf(a)&&(this.filters.push(a),this.saveToLocalStorage())};cvox.WalkerDecorator.prototype.matchesFilter=function(a){if(!a)return!1;for(;!a.tagName;)a=a.parentNode;for(var b=0;b<this.filters.length;++b)if(a.webkitMatchesSelector(this.filters[b]))return!0;return!1};
cvox.WalkerDecorator.prototype.saveToLocalStorage=function(){0!=this.filters.length&&(this.filterMap_[window.location.href]=this.filters,cvox.ChromeVox.host.sendToBackgroundPage({target:"Prefs",action:"setPref",pref:"filterMap",value:cvox.ChromeVoxJSON.stringify(this.filterMap_)}))};
cvox.WalkerDecorator.prototype.reinitialize=function(a){this.filterMap_={};this.filters=[];if(a)try{this.filterMap_=cvox.ChromeVoxJSON.parse(a),window.location.href&&this.filterMap_[window.location.href]&&(this.filters=this.filterMap_[window.location.href])}catch(b){window.console.error("Unable to parse filters "+a),this.filterMap_={}}};
cvox.WalkerDecorator.filterForNode=function(a){if(!a||!cvox.DomUtil.hasContent(a))return null;for(;!a.tagName;)a=a.parentNode;if(a.className){var b=a.className.trim().split(" "),b="."+b[b.length-1];try{return a.webkitMatchesSelector(b),b}catch(c){}}if(a.id){b=a.id.trim();try{return a.webkitMatchesSelector(b),b}catch(d){}}return null};cvox.ActiveIndicator=function(){this.lastMoveTime_=0;this.zoom_=1;this.zoomMeasureElement_=this.container_=null;window.addEventListener("focus",goog.bind(function(){this.container_&&this.container_.classList.remove("cvox_indicator_window_not_focused")},this),!1);window.addEventListener("blur",goog.bind(function(){this.container_&&this.container_.classList.add("cvox_indicator_window_not_focused")},this),!1)};cvox.ActiveIndicator.STYLE=".cvox_indicator_container {  position: absolute !important;  left: 0 !important;  top: 0 !important;  z-index: 2147483647 !important;  pointer-events: none !important;}.cvox_indicator_window_not_focused {  visibility: hidden !important;}.cvox_indicator_pulsing {  -webkit-animation:       cvox_indicator_pulsing_animation 0s 2 alternate !important;  -webkit-animation-timing-function: ease-in-out !important;}.cvox_indicator_region {  opacity: 0 !important;  -webkit-transition: opacity 1s !important;}.cvox_indicator_visible {  opacity: 1 !important;}.cvox_indicator_container .cvox_indicator_region * {  position:absolute !important;  box-shadow: 0 0 4px 4px #f7983a !important;  border-radius: 6px !important;  -webkit-transition: none !important;}.cvox_indicator_animate_normal .cvox_indicator_region * {  -webkit-transition: all 0.3s !important;}.cvox_indicator_animate_quick .cvox_indicator_region * {  -webkit-transition: all 0.1s !important;}.cvox_indicator_top {  border-radius: inherit inherit 0 0 !important;}.cvox_indicator_middle_nw {  border-radius: inherit 0 0 0 !important;}.cvox_indicator_middle_ne {  border-radius: 0 inherit 0 0 !important;}.cvox_indicator_middle_se {  border-radius: 0 0 inherit 0 !important;}.cvox_indicator_middle_sw {  border-radius: 0 0 0 inherit !important;}.cvox_indicator_bottom {  border-radius: 0 0 inherit inherit !important;}@-webkit-keyframes cvox_indicator_pulsing_animation {   0% {opacity: 1.0}  50% {opacity: 0.5} 100% {opacity: 1.0}}";
cvox.ActiveIndicator.QUICK_ANIM_DELAY_MS=100;cvox.ActiveIndicator.NORMAL_ANIM_DELAY_MS=300;cvox.ActiveIndicator.MARGIN=8;cvox.ActiveIndicator.prototype.removeFromDom=function(){this.container_&&this.container_.parentElement&&this.container_.parentElement.removeChild(this.container_);this.zoomMeasureElement_&&this.zoomMeasureElement_.parentElement&&this.zoomMeasureElement_.parentElement.removeChild(this.zoomMeasureElement_)};
cvox.ActiveIndicator.prototype.syncToNode=function(a){a&&(a==document.body?this.removeFromDom():this.syncToNodes([a]))};cvox.ActiveIndicator.prototype.syncToNodes=function(a){for(var b=[],c=0;c<a.length;++c){var d=a[c];if(d.constructor==Text){c=document.createRange();c.selectNode(d);d=c.getClientRects();for(c=0;c<d.length;++c)b.push(d[c])}else{for(;!d.getClientRects;)d=d.parentElement;for(var d=d.getClientRects(),e=0;e<d.length;++e)b.push(d[e])}}this.moveIndicator_(b,cvox.ActiveIndicator.MARGIN)};
cvox.ActiveIndicator.prototype.syncToRange=function(a){var b=cvox.ActiveIndicator.MARGIN;a.startContainer==a.endContainer&&a.startOffset+1==a.endOffset&&(b=1);this.moveIndicator_(a.getClientRects(),b)};cvox.ActiveIndicator.prototype.syncToCursorSelection=function(a){if(a.start.node==a.end.node&&a.start.index==a.end.index)this.syncToNode(a.start.node);else{var b=document.createRange();b.setStart(a.start.node,a.start.index);b.setEnd(a.end.node,a.end.index);this.syncToRange(b)}};
cvox.ActiveIndicator.prototype.moveIndicator_=function(a,b){if(document.body.isContentEditable)this.removeFromDom();else{var c=a.length;if(0!=c){var d=window.pageXOffset,e=window.pageYOffset,f=window.getComputedStyle(document.body,null);f["-webkit-margin-start"]&&(d-=parseInt(f["-webkit-margin-start"],10));for(var f=[],g=0;g<c;g++)f.push(this.inset_(a[g],d,e,-d,-e));if(!this.container_||!this.container_.parentElement)this.container_=this.createDiv_(document.body,"cvox_indicator_container",document.body.firstChild);
g=document.createElement("style");g.id="cvox_indicator_style";g.innerHTML=cvox.ActiveIndicator.STYLE;cvox.DomUtil.addNodeToHead(g,g.id);g=(new Date).getTime();c=g-this.lastMoveTime_;this.container_.className="cvox_indicator_container";document.hasFocus()||this.container_.classList.add("cvox_indicator_window_not_focused");c>cvox.ActiveIndicator.NORMAL_ANIM_DELAY_MS?this.container_.classList.add("cvox_indicator_animate_normal"):c>cvox.ActiveIndicator.QUICK_ANIM_DELAY_MS&&this.container_.classList.add("cvox_indicator_animate_quick");
this.lastMoveTime_=g;this.computeZoomLevel_();for(window.setTimeout(goog.bind(function(){this.container_.classList.add("cvox_indicator_pulsing")},this),0);1<this.container_.childElementCount;)this.container_.removeChild(this.container_.lastElementChild);c=[[f[0]]];d=[f[0]];for(g=1;g<f.length;g++){for(var h=!1,e=0;e<c.length&&!h;e++)this.intersects_(f[g],d[e])&&(c[e].push(f[g]),d[e]=this.union_(d[e],f[g]),h=!0);h||(c.push([f[g]]),d.push(f[g]))}do{f=!1;for(g=0;g<c.length-1&&!f;g++)for(e=g+1;e<c.length&&
!f;e++)this.intersects_(d[g],d[e])&&(c[g]=c[g].concat(c[e]),d[g]=this.union_(d[g],d[e]),c.splice(e,1),d.splice(e,1),f=!0)}while(f);for(g=0;g<c.length;g++)c[g].sort(function(a,b){return a.top!=b.top?a.top-b.top:a.left-b.left});for(g=0;g<c.length;g++)f=null,0==g&&(1==this.container_.childElementCount&&6==this.container_.children[0].childElementCount)&&(f=this.container_.children[0]),this.updateIndicatorRegion_(c[g],f,b)}}};
cvox.ActiveIndicator.prototype.updateIndicatorRegion_=function(a,b,c){if(b)var d=b.children[0],e=b.children[1],f=b.children[2],g=b.children[3],h=b.children[4],i=b.children[5];else b=this.createDiv_(this.container_,"cvox_indicator_region"),window.setTimeout(function(){b.classList.add("cvox_indicator_visible")},0),d=this.createDiv_(b,"cvox_indicator_top"),e=this.createDiv_(b,"cvox_indicator_middle_nw"),f=this.createDiv_(b,"cvox_indicator_middle_ne"),g=this.createDiv_(b,"cvox_indicator_middle_sw"),h=
this.createDiv_(b,"cvox_indicator_middle_se"),i=this.createDiv_(b,"cvox_indicator_bottom");for(var j=a[0],l=Math.floor((j.top+j.bottom)/2),n=1,m=a.length;n<m&&a[n].top<l;)j=this.union_(j,a[n]),l=Math.floor((j.top+j.bottom)/2),n++;if(n==m)j=this.inset_(j,-c,-c,-c,-c),a=Math.floor((3*j.top+1*j.bottom)/4),c=Math.floor((2*j.top+2*j.bottom)/4),l=Math.floor((1*j.top+3*j.bottom)/4),this.setElementCoords_(d,j.left,j.top,j.right,a,!0,!0,!0,!1),this.setElementCoords_(e,j.left,a,j.left,c,!0,!0,!1,!1),this.setElementCoords_(g,
j.left,c,j.left,l,!0,!1,!1,!0),this.setElementCoords_(f,j.right,a,j.right,c,!1,!0,!0,!1),this.setElementCoords_(h,j.right,c,j.right,l,!1,!1,!0,!0),this.setElementCoords_(i,j.left,l,j.right,j.bottom,!0,!1,!0,!0);else{for(var l=a[m-1],k=Math.floor((l.top+l.bottom)/2),m=m-2;0<=m&&a[m].bottom>k;)l=this.union_(l,a[m]),k=Math.floor((l.top+l.bottom)/2),m--;j=this.inset_(j,-c,-c,-c,c);l=this.inset_(l,-c,c,-c,-c);if(n>m)k=this.union_(j,l),k.top=j.bottom,k.bottom=l.top,k.height=Math.floor((k.top+k.bottom)/
2);else{k=a[n];for(n+=1;n<=m;)k=this.union_(k,a[n]),n++;k=this.inset_(k,-c,-c,-c,-c);k.left=Math.min(k.left,j.left,l.left);k.right=Math.max(k.right,j.right,l.right);k.width=k.right-k.left}j.right>k.right-40&&(j.right=k.right,j.width=j.right-j.left);j.left<k.left+40&&(j.left=k.left,j.width=j.right-j.left);l.right>k.right-40&&(l.right=k.right,l.width=l.right-l.left);l.left<k.left+40&&(l.left=k.left,l.width=l.right-l.left);a=Math.floor((k.top+k.bottom)/2);this.setElementRect_(d,j,!0,!0,!0,!1);this.setElementRect_(i,
l,!0,!1,!0,!0);this.setElementCoords_(e,k.left,j.bottom,j.left,a,!0,!0,!1,!1);this.setElementCoords_(f,j.right,j.bottom,k.right,a,!1,!0,!0,!1);this.setElementCoords_(g,k.left,a,l.left,l.top,!0,!1,!1,!0);this.setElementCoords_(h,l.right,a,k.right,l.top,!1,!1,!0,!0)}};cvox.ActiveIndicator.prototype.intersects_=function(a,b){var c=2*cvox.ActiveIndicator.MARGIN;return b.left<=a.right+c&&b.right>=a.left-c&&b.top<=a.bottom+c&&b.bottom>=a.top-c};
cvox.ActiveIndicator.prototype.union_=function(a,b){var c={left:Math.min(a.left,b.left),top:Math.min(a.top,b.top),right:Math.max(a.right,b.right),bottom:Math.max(a.bottom,b.bottom)};c.width=c.right-c.left;c.height=c.bottom-c.top;return c};cvox.ActiveIndicator.prototype.inset_=function(a,b,c,d,e){a={left:a.left+b,top:a.top+c,right:a.right-d,bottom:a.bottom-e};a.width=a.right-a.left;a.height=a.bottom-a.top;return a};
cvox.ActiveIndicator.prototype.createDiv_=function(a,b,c){var d=document.createElement("div");d.className=b;c?a.insertBefore(d,c):a.appendChild(d);return d};cvox.ActiveIndicator.prototype.fixZoom_=function(a){return(Math.round(a*this.zoom_)+0.1)/this.zoom_};cvox.ActiveIndicator.prototype.fixZoomSum_=function(a,b){var c=Math.round(a*this.zoom_),d=Math.round((a+b)*this.zoom_),c=d-c;return(c+0.1)/this.zoom_};
cvox.ActiveIndicator.prototype.setElementCoords_=function(a,b,c,d,e,f,g,h,i){var j=d-b,l=e-c;d-=b;e-=c;var n=f?-20:0,m=g?-20:0,k=h?20:0,q=i?20:0;0==d&&(h?(b-=5,d+=5):f&&(d+=10),q=m=10,c-=10,e+=20);i||(e+=5);g||(c-=5,e+=5,m+=5,q+=5);k=this.fixZoomSum_(b,k+j);q=this.fixZoomSum_(c,q+l);a.style.left=this.fixZoom_(b)+"px";a.style.top=this.fixZoom_(c)+"px";a.style.width=this.fixZoomSum_(b,d)+"px";a.style.height=this.fixZoomSum_(c,e)+"px";a.style.clip="rect("+[m,k,q,n].join("px ")+"px)"};
cvox.ActiveIndicator.prototype.setElementRect_=function(a,b,c,d,e,f){this.setElementCoords_(a,b.left,b.top,b.right,b.bottom,c,d,e,f)};
cvox.ActiveIndicator.prototype.computeZoomLevel_=function(){if(!this.zoomMeasureElement_||this.zoomMeasureElement_.parentElement!=document.body)this.zoomMeasureElement_=document.createElement("div"),this.zoomMeasureElement_.innerHTML="X",this.zoomMeasureElement_.setAttribute("style","font: 5000px/1em sans-serif !important; -webkit-text-size-adjust:none !important; visibility:hidden !important; left: -10000px !important; top: -10000px !important; position:absolute !important;"),document.body.appendChild(this.zoomMeasureElement_);
var a=5E3/this.zoomMeasureElement_.clientHeight,a=Math.round(500*a)/500;0.1<a&&10>a&&(this.zoom_=a)};cvox.NavigationHistory=function(){this.reset_()};cvox.NavigationHistory.MAX_HISTORY_LEN_=30;cvox.NavigationHistory.prototype.reset_=function(){var a=document.body;this.history_=[a];this.arrivedValid_=!0};cvox.NavigationHistory.prototype.update=function(a){var b=this.history_[0];a&&a!=b&&this.history_.unshift(a);this.history_.length>cvox.NavigationHistory.MAX_HISTORY_LEN_&&this.history_.pop();this.arrivedValid_=this.isValidNode_(a)};
cvox.NavigationHistory.prototype.becomeInvalid=function(a){this.clean_();return!this.arrivedValid_?(this.arrivedValid_=!0,!1):!this.isValidNode_(a)};cvox.NavigationHistory.prototype.revert=function(a){var b=document.activeElement;b!=document.body&&this.isValidNode_(b)&&this.update(b);if(a)for(;0<this.history_.length;){b=this.history_[0];if(a(b))break;this.history_.shift()}return{current:this.history_[0],previous:this.history_[1]}};
cvox.NavigationHistory.prototype.clean_=function(){for(var a=!1,b=this.history_.length-1;0<=b;b--){var c=this.isValidNode_(this.history_[b]);c||(this.history_.splice(b,1),a=!0)}return a};cvox.NavigationHistory.prototype.isValidNode_=function(a){return!cvox.DomUtil.isAttachedToDocument(a)||!cvox.DomUtil.isVisible(a)?!1:!0};cvox.TraverseContent=function(a){this.currentDomObj=null!=a?a:document.body;var b=document.createRange();try{b.selectNode(this.currentDomObj),this.startCursor_=new cvox.Cursor(b.startContainer,b.startOffset,cvox.TraverseUtil.getNodeText(b.startContainer)),this.endCursor_=new cvox.Cursor(b.endContainer,b.endOffset,cvox.TraverseUtil.getNodeText(b.endContainer))}catch(c){window.console.log("Error: Unselectable node:"),window.console.log(a)}};
cvox.TraverseContent.prototype.lastSelectionWasWhitespace=!1;cvox.TraverseContent.prototype.skipWhitespace=!1;cvox.TraverseContent.prototype.skipInvalidSelections=!0;cvox.TraverseContent.prototype.breakAtLinks=!0;cvox.TraverseContent.kCharacter="character";cvox.TraverseContent.kWord="word";cvox.TraverseContent.kSentence="sentence";cvox.TraverseContent.kLine="line";cvox.TraverseContent.kParagraph="paragraph";
cvox.TraverseContent.kAllGrains=[cvox.TraverseContent.kParagraph,cvox.TraverseContent.kSentence,cvox.TraverseContent.kLine,cvox.TraverseContent.kWord,cvox.TraverseContent.kCharacter];cvox.TraverseContent.prototype.syncToCursorSelection=function(a){this.startCursor_=a.start.clone();this.endCursor_=a.end.clone()};cvox.TraverseContent.prototype.getCurrentCursorSelection=function(){return new cvox.CursorSelection(this.startCursor_,this.endCursor_)};
cvox.TraverseContent.prototype.updateSelection=function(){cvox.TraverseUtil.setSelection(this.startCursor_,this.endCursor_);cvox.SelectionUtil.scrollToSelection(window.getSelection())};cvox.TraverseContent.prototype.getCurrentRange=function(){var a=document.createRange();a.setStart(this.startCursor_.node,this.startCursor_.index);a.setEnd(this.endCursor_.node,this.endCursor_.index);return a};cvox.TraverseContent.prototype.getCurrentText=function(){return cvox.SelectionUtil.getRangeText(this.getCurrentRange())};
cvox.TraverseContent.prototype.collapseToEnd=function(){this.startCursor_=this.endCursor_.clone()};cvox.TraverseContent.prototype.collapseToStart=function(){this.endCursor_=this.startCursor_.clone()};
cvox.TraverseContent.prototype.moveNext=function(a){var b=this.getBreakTags(),c=this.skipWhitespace,d=this.getCurrentRange();cvox.SelectionUtil.isRangeValid(d)||(c=!0);var e=[],f=[];do{a===cvox.TraverseContent.kSentence?d=cvox.TraverseUtil.getNextSentence(this.startCursor_,this.endCursor_,e,f,b):a===cvox.TraverseContent.kWord?d=cvox.TraverseUtil.getNextWord(this.startCursor_,this.endCursor_,e,f):a===cvox.TraverseContent.kCharacter?d=cvox.TraverseUtil.getNextChar(this.startCursor_,this.endCursor_,
e,f,c):a===cvox.TraverseContent.kParagraph?d=cvox.TraverseUtil.getNextParagraph(this.startCursor_,this.endCursor_,e,f):a===cvox.TraverseContent.kLine?d=cvox.TraverseUtil.getNextLine(this.startCursor_,this.endCursor_,e,f,b):(window.console.log('Invalid selection granularity: "'+a+'"'),a=cvox.TraverseContent.kSentence,d=cvox.TraverseUtil.getNextSentence(this.startCursor_,this.endCursor_,e,f,b));if(null==d)return null;var d=this.getCurrentRange(),g=!d.getBoundingClientRect()}while(this.skipInvalidSelections&&
g);if(cvox.SelectionUtil.isRangeValid(d))this.lastSelectionWasWhitespace=!1;else if(this.lastSelectionWasWhitespace)for(;!cvox.SelectionUtil.isRangeValid(this.getCurrentRange());)this.moveNext(a);else this.lastSelectionWasWhitespace=!0;return this.getCurrentText()};
cvox.TraverseContent.prototype.movePrev=function(a){var b=this.getBreakTags(),c=this.skipWhitespace,d=this.getCurrentRange();cvox.SelectionUtil.isRangeValid(d)||(c=!0);var e=[],f=[];do{a===cvox.TraverseContent.kSentence?d=cvox.TraverseUtil.getPreviousSentence(this.startCursor_,this.endCursor_,e,f,b):a===cvox.TraverseContent.kWord?d=cvox.TraverseUtil.getPreviousWord(this.startCursor_,this.endCursor_,e,f):a===cvox.TraverseContent.kCharacter?d=cvox.TraverseUtil.getPreviousChar(this.startCursor_,this.endCursor_,
e,f,c):a===cvox.TraverseContent.kParagraph?d=cvox.TraverseUtil.getPreviousParagraph(this.startCursor_,this.endCursor_,e,f):a===cvox.TraverseContent.kLine?d=cvox.TraverseUtil.getPreviousLine(this.startCursor_,this.endCursor_,e,f,b):(window.console.log('Invalid selection granularity: "'+a+'"'),a=cvox.TraverseContent.kSentence,d=cvox.TraverseUtil.getPreviousSentence(this.startCursor_,this.endCursor_,e,f,b));if(null==d)return null;var d=this.getCurrentRange(),g=!d.getBoundingClientRect()}while(this.skipInvalidSelections&&
g);if(cvox.SelectionUtil.isRangeValid(d))this.lastSelectionWasWhitespace=!1;else if(this.lastSelectionWasWhitespace)for(;!cvox.SelectionUtil.isRangeValid(this.getCurrentRange());)this.moveNext(a);else this.lastSelectionWasWhitespace=!0;return this.getCurrentText()};cvox.TraverseContent.prototype.getBreakTags=function(){return{A:this.breakAtLinks,BR:!0,HR:!0}};
cvox.TraverseContent.prototype.nextElement=function(a,b){null!=b&&(this.currentDomObj=b);var c=this.moveNext(a);return null!=c&&(!cvox.DomUtil.isDescendantOfNode(this.startCursor_.node,this.currentDomObj)||!cvox.DomUtil.isDescendantOfNode(this.endCursor_.node,this.currentDomObj))?null:c};
cvox.TraverseContent.prototype.prevElement=function(a,b){null!=b&&(this.currentDomObj=b);var c=this.movePrev(a);return null!=c&&(!cvox.DomUtil.isDescendantOfNode(this.startCursor_.node,this.currentDomObj)||!cvox.DomUtil.isDescendantOfNode(this.endCursor_.node,this.currentDomObj))?null:c};cvox.TraverseContent.prototype.reset=function(){window.getSelection().removeAllRanges()};cvox.AbstractSelectionWalker=function(){this.objWalker_=new cvox.BareObjectWalker;this.tc_=new cvox.TraverseContent;this.grain=""};goog.inherits(cvox.AbstractSelectionWalker,cvox.AbstractWalker);
cvox.AbstractSelectionWalker.prototype.next=function(a){var b=a.isReversed();this.tc_.syncToCursorSelection(a.clone().setReversed(!1));var c=b?this.tc_.prevElement(this.grain):this.tc_.nextElement(this.grain);if(null==c)return null;b=this.tc_.getCurrentCursorSelection().setReversed(b);if((c=this.objWalker_.next(a))&&(b.end.node.constructor!=Text||c.end.node.constructor!=Text)&&!cvox.DomUtil.isDescendantOfNode(b.end.node,a.end.node)&&!cvox.DomUtil.isDescendantOfNode(b.end.node,c.end.node))return c;
this.tc_.updateSelection();return b};cvox.AbstractSelectionWalker.prototype.sync=function(a){var b=a.isReversed(),c=null;if(a.start.equals(a.end)){for(a=a.start.node;a&&cvox.DomUtil.directedFirstChild(a,b);)a=cvox.DomUtil.directedFirstChild(a,b);c=cvox.CursorSelection.fromNode(a)}else c=a.clone(),b?c.start=c.end:c.end=c.start;return(this.next(c.setReversed(!1))||cvox.CursorSelection.fromBody()).setReversed(b)};
cvox.AbstractSelectionWalker.prototype.getDescription=function(a,b){var c=cvox.DescriptionUtil.getDescriptionFromAncestors(cvox.DomUtil.getUniqueAncestors(a.end.node,b.start.node),!0,cvox.ChromeVox.verbosity);c.text=b.getText()||c.text;return[c]};cvox.AbstractSelectionWalker.prototype.getBraille=function(a,b){return new cvox.NavBraille({text:cvox.TraverseUtil.getNodeText(b.absStart().node),startIndex:b.absStart().index,endIndex:b.absEnd().index})};cvox.CharacterWalker=function(){cvox.AbstractSelectionWalker.call(this);this.grain=cvox.TraverseContent.kCharacter};goog.inherits(cvox.CharacterWalker,cvox.AbstractSelectionWalker);cvox.CharacterWalker.prototype.getGranularityMsg=function(){return cvox.ChromeVox.msgs.getMsg("character_granularity")};cvox.BareGroupWalker=function(){cvox.AbstractNodeWalker.call(this)};goog.inherits(cvox.BareGroupWalker,cvox.AbstractNodeWalker);cvox.BareGroupWalker.prototype.stopNodeDescent=function(a){return cvox.GroupUtil.isLeafNode(a)};cvox.BrailleUtil={};cvox.BrailleUtil.groupWalker_=new cvox.BareGroupWalker;cvox.BrailleUtil.objectWalker_=new cvox.BareObjectWalker;cvox.BrailleUtil.ITEM_SEPARATOR=" ";cvox.BrailleUtil.CONTAINER="tag_h1_brl tag_h2_brl tag_h3_brl tag_h4_brl tag_h5_brl tag_h6_brl".split(" ");cvox.BrailleUtil.TEMPLATE={base:"c n r s",aria_role_button:"[n]",input_type_button:"[n]",input_type_checkbox:"n (s)",input_type_submit:"[n]",input_type_text:"n:",tag_button:"[n]"};cvox.BrailleUtil.getName=function(a){return cvox.DomUtil.getName(a).trim()};
cvox.BrailleUtil.getRoleMsg=function(a){(a=cvox.DomUtil.getRoleMsg(a,cvox.VERBOSITY_VERBOSE))&&(a=cvox.DomUtil.collapseWhitespace(a));a&&0<a.length&&cvox.ChromeVox.msgs.getMsg(a+"_brl")&&(a+="_brl");return a};cvox.BrailleUtil.getRole=function(a){return(a=cvox.BrailleUtil.getRoleMsg(a))?cvox.ChromeVox.msgs.getMsg(a):""};cvox.BrailleUtil.getState=function(a){return cvox.NodeStateUtil.expand(cvox.DomUtil.getStateMsgs(a,!0).map(function(a){cvox.ChromeVox.msgs.getMsg(a[0]+"_brl")&&(a[0]+="_brl");return a}))};
cvox.BrailleUtil.getContainer=function(a,b){for(var c=cvox.DomUtil.getUniqueAncestors(a,b),d=0,e;e=c[d];d++)if((e=cvox.BrailleUtil.getRoleMsg(e))&&-1!=cvox.BrailleUtil.CONTAINER.indexOf(e))return cvox.ChromeVox.msgs.getMsg(e);return""};
cvox.BrailleUtil.getTemplated=function(a,b){var c=cvox.DomUtil.getRoleMsg(b,cvox.VERBOSITY_VERBOSE),c=cvox.BrailleUtil.TEMPLATE[c]||cvox.BrailleUtil.TEMPLATE.base,c=c.replace(/[nrsc]/g,function(c){switch(c){case "n":return cvox.BrailleUtil.getName(b);case "r":return cvox.BrailleUtil.getRole(b);case "s":return cvox.BrailleUtil.getState(b);case "c":return cvox.BrailleUtil.getContainer(a,b)}});return c.trim()};
cvox.BrailleUtil.getBraille=function(a,b){for(var c=cvox.BrailleUtil.groupWalker_.sync(b).setReversed(!1),d=cvox.BrailleUtil.objectWalker_.sync(c).setReversed(!1),e="",f=0,g=0;d&&c&&cvox.DomUtil.isDescendantOfNode(d.start.node,c.start.node);){var h=cvox.BrailleUtil.getTemplated(a.start.node,d.start.node);d.absEquals(b)&&(f=e.length,g=e.length+h.length);e+=h+cvox.BrailleUtil.ITEM_SEPARATOR;a=d;d=cvox.BrailleUtil.objectWalker_.next(d)}e=e.trim();return new cvox.NavBraille({text:e,startIndex:f,endIndex:g})};cvox.GroupUtil={};cvox.GroupUtil.MAX_CHARCOUNT_=1500;cvox.GroupUtil.BREAKOUT_SELECTOR_='blockquote,button,code,form,frame,h1,h2,h3,h4,h5,h6,hr,iframe,input,object,ol,p,pre,select,table,tr,ul,math,[role~="alert alertdialog button checkbox combobox dialog log marquee menubar progressbar radio radiogroup scrollbar slider spinbutton status tab tabpanel textbox toolbar tooltip treeitem article document group heading img list math region row separator"]';
cvox.GroupUtil.isLeafNode=function(a){if("LABEL"==a.tagName)return cvox.DomUtil.isLeafNode(a);if(cvox.DomUtil.isLeafNode(a))return!0;if(!cvox.DomUtil.isSemanticElt(a))for(var b=a.querySelectorAll(cvox.GroupUtil.BREAKOUT_SELECTOR_),c=0;c<b.length;++c)if(cvox.DomUtil.hasContent(b[c]))return!1;if(cvox.AriaUtil.isCompositeControl(a)&&!cvox.DomUtil.isFocusable(a))return!1;a=cvox.DomUtil.collapseWhitespace(cvox.DomUtil.getValue(a)+" "+cvox.DomUtil.getName(a));return a.length>cvox.GroupUtil.MAX_CHARCOUNT_||
""===a.replace(/\s/g,"")?!1:!0};cvox.GroupWalker=function(){cvox.AbstractNodeWalker.call(this)};goog.inherits(cvox.GroupWalker,cvox.AbstractNodeWalker);
cvox.GroupWalker.prototype.act=function(a){if((a=a.start.node)&&a.tagName&&"A"==a.tagName)return cvox.DomUtil.clickElem(a,!1),!0;a=a.getElementsByTagName("A");if(1==a.length)return cvox.DomUtil.clickElem(a[0],!1),!0;if(1<a.length){for(var b=[],c=[],d=0;d<a.length;++d){var e=a[d];cvox.DomUtil.hasContent(e)&&(b.push(cvox.DomUtil.collapseWhitespace(cvox.DomUtil.getName(e))),c.push(cvox.DomUtil.createSimpleClickFunction(e)))}a=new cvox.ChoiceWidget(b,c);a.show();return!0}return!1};
cvox.GroupWalker.prototype.getDescription=function(a,b){return cvox.DescriptionUtil.getCollectionDescription(a,b)};cvox.GroupWalker.prototype.getBraille=function(a,b){return cvox.BrailleUtil.getBraille(a,b)};cvox.GroupWalker.prototype.getGranularityMsg=function(){return cvox.ChromeVox.msgs.getMsg("group_strategy")};cvox.GroupWalker.prototype.stopNodeDescent=function(a){return cvox.GroupUtil.isLeafNode(a)};cvox.LineWalker=function(){cvox.AbstractSelectionWalker.call(this);this.grain=cvox.TraverseContent.kLine};goog.inherits(cvox.LineWalker,cvox.AbstractSelectionWalker);cvox.LineWalker.prototype.getGranularityMsg=function(){return cvox.ChromeVox.msgs.getMsg("line_granularity")};cvox.MathUtil={};cvox.MathUtil.TOKEN_LIST="MI MN MO MTEXT MSPACE MS".split(" ");cvox.MathUtil.isToken=function(a){return a.nodeType==Node.ELEMENT_NODE&&-1!=cvox.MathUtil.TOKEN_LIST.indexOf(a.tagName.toUpperCase())};cvox.MathUtil.LAYOUT_LIST="MROW MFRAC MSQRT MROOT MSTYLE MERROR MPADDED MPHANTOM MFENCED MENCLOSE".split(" ");cvox.MathUtil.isLayout=function(a){return a.nodeType==Node.ELEMENT_NODE&&-1!=cvox.MathUtil.LAYOUT_LIST.indexOf(a.tagName.toUpperCase())};cvox.MathUtil.SCRIPT_LIST="MSUB MSUP MSUBSUP MUNDER MOVER MUNDEROVER MMULTISCRIPTS MPRESCRIPTS".split(" ");
cvox.MathUtil.isScript=function(a){return a.nodeType==Node.ELEMENT_NODE&&-1!=cvox.MathUtil.SCRIPT_LIST.indexOf(a.tagName.toUpperCase())};cvox.MathUtil.TABLES_LIST="MTABLE MTABLE MLABELEDTR MTR MTD MALIGNGROUP MALIGNMARK".split(" ");cvox.MathUtil.isTables=function(a){return a.nodeType==Node.ELEMENT_NODE&&-1!=cvox.MathUtil.TABLES_LIST.indexOf(a.tagName.toUpperCase())};cvox.MathUtil.ELEMENTARY_LIST="MSTACK MLONGDIV MSGROUP MSROW MSCARRIES MSCARRY MSLINE".split(" ");
cvox.MathUtil.isElementary=function(a){return a.nodeType==Node.ELEMENT_NODE&&-1!=cvox.MathUtil.ELEMENTARY_LIST.indexOf(a.tagName.toUpperCase())};cvox.MathUtil.MATHML_TAG_LIST=[cvox.MathUtil.TOKEN_LIST,cvox.MathUtil.LAYOUT_LIST,cvox.MathUtil.SCRIPT_LIST,cvox.MathUtil.TABLES_LIST,cvox.MathUtil.ELEMENTARY_LIST].reduce(function(a,b){return a.concat(b)});cvox.MathUtil.isMathmlTag=function(a){return a.nodeType==Node.ELEMENT_NODE&&-1!=cvox.MathUtil.MATHML_TAG_LIST.indexOf(a.tagName.toUpperCase())};
cvox.MathUtil.WHITESPACE_LIST=["MSROW","MROW","MSPACE","MPHANTOM","MPADDED"];cvox.MathUtil.isWhitespace=function(a){return a.nodeType==Node.ELEMENT_NODE&&-1!=cvox.MathUtil.WHITESPACE_LIST.indexOf(a.tagName.toUpperCase())};cvox.MathUtil.isNotWhitespace=function(a){return cvox.MathUtil.isMathmlTag(a)&&-1==cvox.MathUtil.WHITESPACE_LIST.indexOf(a.tagName.toUpperCase())};cvox.MathUtil.union=function(a,b){return a.concat(b.filter(function(b){return 0>a.indexOf(b)}))};cvox.MathAtom=function(a){this.key=a;this.category="";this.mappings={"default":{"default":a}}};cvox.MathAtom.prototype.getKey=function(){return this.key};cvox.MathAtom.prototype.setCategory=function(a){this.category=a};cvox.MathAtom.prototype.getCategory=function(){return this.category};cvox.MathAtom.prototype.getMappings_=function(){return this.mappings};cvox.MathAtom.prototype.addMappings=function(a){for(var b in a)this.mappings[b]=a[b]};
cvox.MathAtom.prototype.map=function(a,b){var c=this.mappings[a];return(c=c?c[b]:this.mappings["default"][b])?c:""===c?"":this.mappings["default"]["default"]};cvox.MathAtom.prototype.allDomains=function(){return Object.keys(this.mappings)};cvox.MathAtom.prototype.allRules=function(){var a=[],b;for(b in this.mappings)a=cvox.MathUtil.union(a,Object.keys(this.mappings[b]));return a};cvox.MathAtom.make=function(a,b,c){a=new cvox.MathAtom(a);b&&a.setCategory(b);c&&a.addMappings(c);return a};
cvox.MathAtom.prototype.toString=function(){var a="",b=this.getMappings_(),a=a+("key:\t\t"+this.getKey()),a=a+("\ncategory:\t\t"+this.getCategory()),a=a+"\nmappings:",c;for(c in b){var a=a+("\n\t"+c+":"),d;for(d in b[c])a+="\n\t\t"+d+" -> "+b[c][d]}return a};cvox.MathFunction=function(){this.FUNCTION_MAP_={};this.domains=[];this.rules=[];this.initFunctionMap_()};cvox.MathFunction.prototype.initFunctionMap_=function(){for(var a=[],b=[],c=0,d;d=cvox.MathFunction.ELEMENTARY_FUNCTIONS_[c];c++){var e=cvox.MathAtom.make(d.key,d.category,d.mappings);this.FUNCTION_MAP_[d.key]=e;for(var f=0,g;g=d.names[f];f++)a=cvox.MathUtil.union(a,e.allDomains()),b=cvox.MathUtil.union(b,e.allRules()),this.FUNCTION_MAP_[g]=e}this.domains=a;this.rules=b};
cvox.MathFunction.prototype.getFunctionByName=function(a){return this.FUNCTION_MAP_[a]};cvox.MathFunction.ELEMENTARY_FUNCTIONS_=[{key:"sin",names:["sin","sine"],category:"Trigonometry",mappings:{"default":{"default":"sine",alternative:"sine function","short":"sine"}}},{key:"cos",names:["cos","cosine"],category:"Trigonometry",mappings:{"default":{"default":"cosine",alternative:"cosine function","short":"cosine"}}}];cvox.MathSymbol=function(){this.UNICODE_MAP_=[];this.HTML_ENTITY_MAP_={};this.domains=[];this.rules=[];this.initUnicodeMap_();this.initHtmlEntityMap_(this.UNICODE_MAP_)};cvox.MathSymbol.parseUnicode_=function(a){return a.match(/^0x(\d|[a-fA-F])+/)?parseInt(a.match(/^0x(\d|[a-fA-F])+/),16):a.match(/^&#\d+;$/)?parseInt(a.match(/\d+/),10):a.match(/^&#x(\d|[a-fA-F])+;$/)?parseInt(a.match(/(\d|[a-fA-F])+/),16):a.match(/^(\d|[a-fA-F])+$/)?parseInt(a.match(/(\d|[a-fA-F])+/),16):null};
cvox.MathSymbol.prototype.initUnicodeMap_=function(){for(var a=[],b=[],c=0,d;d=cvox.MathSymbol.UNICODE_ELEMENTS_[c];c++){d=cvox.MathAtom.make(d.key,d.category,d.mappings);var e=cvox.MathSymbol.parseUnicode_(d.getKey());e&&(a=cvox.MathUtil.union(a,d.allDomains()),b=cvox.MathUtil.union(b,d.allRules()),this.UNICODE_MAP_[e]=d)}this.domains=a;this.rules=b};
cvox.MathSymbol.prototype.initHtmlEntityMap_=function(){for(var a in cvox.MathSymbol.HTML_ENTITY_TO_CODE_){var b=cvox.MathSymbol.parseUnicode_(cvox.MathSymbol.HTML_ENTITY_TO_CODE_[a]);b&&(b=this.UNICODE_MAP_[b])&&(this.HTML_ENTITY_MAP_[a]=b)}};cvox.MathSymbol.prototype.getSymbolByCode=function(a){return this.UNICODE_MAP_[a]};
cvox.MathSymbol.HTML_ENTITY_TO_CODE_={"&quot;":"0x0022","&amp;":"0x0026","&apos;":"0x0027","&lt;":"0x003C","&gt;":"0x003E","&nbsp;":"0x00A0","&iexcl;":"0x00A1","&cent;":"0x00A2","&pound;":"0x00A3","&curren;":"0x00A4","&yen;":"0x00A5","&brvbar;":"0x00A6","&sect;":"0x00A7","&uml;":"0x00A8","&copy;":"0x00A9","&ordf;":"0x00AA","&laquo;":"0x00AB","&not;":"0x00AC","&shy;":"0x00AD","&reg;":"0x00AE","&macr;":"0x00AF","&deg;":"0x00B0","&plusmn;":"0x00B1","&PlusMinus;":"0x00B1","&sup2;":"0x00B2","&sup3;":"0x00B3",
"&acute;":"0x00B4","&micro;":"0x00B5","&para;":"0x00B6","&middot;":"0x00B7","&cedil;":"0x00B8","&sup1;":"0x00B9","&ordm;":"0x00BA","&raquo;":"0x00BB","&frac14;":"0x00BC","&frac12;":"0x00BD","&frac34;":"0x00BE","&iquest;":"0x00BF","&Agrave;":"0x00C0","&Aacute;":"0x00C1","&Acirc;":"0x00C2","&Atilde;":"0x00C3","&Auml;":"0x00C4","&Aring;":"0x00C5","&AElig;":"0x00C6","&Ccedil;":"0x00C7","&Egrave;":"0x00C8","&Eacute;":"0x00C9","&Ecirc;":"0x00CA","&Euml;":"0x00CB","&Igrave;":"0x00CC","&Iacute;":"0x00CD",
"&Icirc;":"0x00CE","&Iuml;":"0x00CF","&ETH;":"0x00D0","&Ntilde;":"0x00D1","&Ograve;":"0x00D2","&Oacute;":"0x00D3","&Ocirc;":"0x00D4","&Otilde;":"0x00D5","&Ouml;":"0x00D6","&times;":"0x00D7","&Oslash;":"0x00D8","&Ugrave;":"0x00D9","&Uacute;":"0x00DA","&Ucirc;":"0x00DB","&Uuml;":"0x00DC","&Yacute;":"0x00DD","&THORN;":"0x00DE","&szlig;":"0x00DF","&agrave;":"0x00E0","&aacute;":"0x00E1","&acirc;":"0x00E2","&atilde;":"0x00E3","&auml;":"0x00E4","&aring;":"0x00E5","&aelig;":"0x00E6","&ccedil;":"0x00E7","&egrave;":"0x00E8",
"&eacute;":"0x00E9","&ecirc;":"0x00EA","&euml;":"0x00EB","&igrave;":"0x00EC","&iacute;":"0x00ED","&icirc;":"0x00EE","&iuml;":"0x00EF","&eth;":"0x00F0","&ntilde;":"0x00F1","&ograve;":"0x00F2","&oacute;":"0x00F3","&ocirc;":"0x00F4","&otilde;":"0x00F5","&ouml;":"0x00F6","&divide;":"0x00F7","&oslash;":"0x00F8","&ugrave;":"0x00F9","&uacute;":"0x00FA","&ucirc;":"0x00FB","&uuml;":"0x00FC","&yacute;":"0x00FD","&thorn;":"0x00FE","&yuml;":"0x00FF","&OElig;":"0x0152","&oelig;":"0x0153","&Scaron;":"0x0160","&scaron;":"0x0161",
"&Yuml;":"0x0178","&fnof;":"0x0192","&circ;":"0x02C6","&tilde;":"0x02DC","&Alpha;":"0x0391","&Beta;":"0x0392","&Gamma;":"0x0393","&Delta;":"0x0394","&Epsilon;":"0x0395","&Zeta;":"0x0396","&Eta;":"0x0397","&Theta;":"0x0398","&Iota;":"0x0399","&Kappa;":"0x039A","&Lambda;":"0x039B","&Mu;":"0x039C","&Nu;":"0x039D","&Xi;":"0x039E","&Omicron;":"0x039F","&Pi;":"0x03A0","&Rho;":"0x03A1","&Sigma;":"0x03A3","&Tau;":"0x03A4","&Upsilon;":"0x03A5","&Phi;":"0x03A6","&Chi;":"0x03A7","&Psi;":"0x03A8","&Omega;":"0x03A9",
"&alpha;":"0x03B1","&beta;":"0x03B2","&gamma;":"0x03B3","&delta;":"0x03B4","&epsilon;":"0x03B5","&zeta;":"0x03B6","&eta;":"0x03B7","&theta;":"0x03B8","&iota;":"0x03B9","&kappa;":"0x03BA","&lambda;":"0x03BB","&mu;":"0x03BC","&nu;":"0x03BD","&xi;":"0x03BE","&omicron;":"0x03BF","&pi;":"0x03C0","&rho;":"0x03C1","&sigmaf;":"0x03C2","&sigma;":"0x03C3","&tau;":"0x03C4","&upsilon;":"0x03C5","&phi;":"0x03C6","&chi;":"0x03C7","&psi;":"0x03C8","&omega;":"0x03C9","&thetasym;":"0x03D1","&upsih;":"0x03D2","&piv;":"0x03D6",
"&ensp;":"0x2002","&emsp;":"0x2003","&thinsp;":"0x2009","&zwnj;":"0x200C","&zwj;":"0x200D","&lrm;":"0x200E","&rlm;":"0x200F","&ndash;":"0x2013","&mdash;":"0x2014","&lsquo;":"0x2018","&rsquo;":"0x2019","&sbquo;":"0x201A","&ldquo;":"0x201C","&rdquo;":"0x201D","&bdquo;":"0x201E","&dagger;":"0x2020","&Dagger;":"0x2021","&bull;":"0x2022","&hellip;":"0x2026","&permil;":"0x2030","&prime;":"0x2032","&Prime;":"0x2033","&lsaquo;":"0x2039","&rsaquo;":"0x203A","&oline;":"0x203E","&frasl;":"0x2044","&euro;":"0x20AC",
"&image;":"0x2111","&weierp;":"0x2118","&real;":"0x211C","&trade;":"0x2122","&alefsym;":"0x2135","&larr;":"0x2190","&uarr;":"0x2191","&rarr;":"0x2192","&darr;":"0x2193","&harr;":"0x2194","&crarr;":"0x21B5","&lArr;":"0x21D0","&uArr;":"0x21D1","&rArr;":"0x21D2","&dArr;":"0x21D3","&hArr;":"0x21D4","&forall;":"0x2200","&part;":"0x2202","&exist;":"0x2203","&empty;":"0x2205","&nabla;":"0x2207","&isin;":"0x2208","&notin;":"0x2209","&ni;":"0x220B","&prod;":"0x220F","&sum;":"0x2211","&minus;":"0x2212","&lowast;":"0x2217",
"&radic;":"0x221A","&prop;":"0x221D","&infin;":"0x221E","&ang;":"0x2220","&and;":"0x2227","&or;":"0x2228","&cap;":"0x2229","&cup;":"0x222A","&int;":"0x222B","&there4;":"0x2234","&sim;":"0x223C","&cong;":"0x2245","&asymp;":"0x2248","&ne;":"0x2260","&equiv;":"0x2261","&le;":"0x2264","&ge;":"0x2265","&sub;":"0x2282","&sup;":"0x2283","&nsub;":"0x2284","&sube;":"0x2286","&supe;":"0x2287","&oplus;":"0x2295","&otimes;":"0x2297","&perp;":"0x22A5","&sdot;":"0x22C5","&lceil;":"0x2308","&rceil;":"0x2309","&lfloor;":"0x230A",
"&rfloor;":"0x230B","&lang;":"0x2329","&rang;":"0x232A","&loz;":"0x25CA","&spades;":"0x2660","&clubs;":"0x2663","&hearts;":"0x2665","&diams;":"0x2666"};cvox.MathSymbol.UNICODE_ELEMENTS_=[{category:"Lu",key:"0041",mappings:{"default":{"default":"latin capital letter a","short":"cap a"}}},{category:"Lu",key:"0042",mappings:{"default":{"default":"latin capital letter b","short":"cap b"}}},{category:"Lu",key:"0043",mappings:{"default":{"default":"latin capital letter c","short":"cap c"}}}];cvox.MathSpeak=function(a){a=a||{domain:"default"};this.functions=new cvox.MathFunction;this.symbols=new cvox.MathSymbol;this.allDomains=cvox.MathUtil.union(this.functions.domains,this.symbols.domains);this.allRules=cvox.MathUtil.union(this.functions.rules,this.symbols.rules);this.setDomain(a.domain);this.rule="short"};cvox.MathSpeak.prototype.setDomain=function(a){-1!=this.allDomains.indexOf(a)?this.domain=a:(console.log("Domain "+a+" does not exist!"),this.domain="default")};
cvox.MathSpeak.prototype.cycleDomain=function(){var a=this.allDomains.indexOf(this.domain);++a;return this.domain=a==this.allDomains.length?this.allDomains[0]:this.allDomains[a]};cvox.MathSpeak.prototype.speakSequence=function(a){var b=[];a=cvox.MathSpeak.removeEmpty(a);for(var c=0,d;d=a[c];c++)b=b.concat(this.speakString(d));return b};
cvox.MathSpeak.prototype.speakString=function(a){var b=[];if(a.match(/^\s+$/))return b;a=cvox.MathSpeak.removeEmpty(a.replace(/\s/g," ").split(" "));for(var c=0,d;d=a[c];c++)if(1==d.length)b.push(this.speakCharacter(d));else if(d.match(/^[a-zA-Z]+$/))b.push(this.speakFunction(d));else for(;d;){var e=d.match(/^\w+/);e?(b.push(this.speakMsg(e[0])),d=d.substring(e[0].length)):(b.push(this.speakCharacter(d[0])),d=d.substring(1))}return b};
cvox.MathSpeak.prototype.speakFunction=function(a){var b=this.functions.getFunctionByName(a);return b?this.speakMsg(b.map(this.domain,this.rule)):this.speakMsg(a)};cvox.MathSpeak.prototype.speakCharacter=function(a){if(1==a.length){var b=this.symbols.getSymbolByCode(a.charCodeAt(0));return b?this.speakMsg(b.map(this.domain,this.rule)):this.speakMsg(a)}};cvox.MathSpeak.prototype.speakMsg=function(a){return new cvox.NavDescription({text:a})};cvox.MathSpeak.removeEmpty=function(a){return a.filter(function(a){return a})};cvox.TraverseMath=function(){this.activeNode=this.activeMath=null;this.activeTraversalMode="layout";this.traversalModes_=["leaf","token","tree","layout"]};cvox.TraverseMath.prototype.cycleTraversalMode=function(){var a=this.traversalModes_.indexOf(this.activeTraversalMode);++a;return this.activeTraversalMode=a==this.traversalModes_.length?this.traversalModes_[0]:this.traversalModes_[a]};cvox.TraverseMath.prototype.initialize=function(a,b){this.activeNode=this.activeMath=a;this.next(b)};
cvox.TraverseMath.allLeafNodes=function(a){function b(a){a=a.childNodes;for(var e=0,f;f=a[e];e++)3==f.nodeType?c.push(f.textContent):cvox.MathUtil.isToken(f)?c.push(f.textContent):b(f)}var c=[];b(a);return c};cvox.TraverseMath.prototype.nextLeaf=function(a,b){if(this.activeNode&&this.activeMath){var c=b(this.activeNode)?cvox.DomUtil.directedFindNextNode(this.activeNode,this.activeMath,a,b):cvox.DomUtil.directedFindFirstNode(this.activeNode,a,b);c&&(this.activeNode=c)}return this.activeNode};
cvox.TraverseMath.prototype.next=function(a){a=!!a;if(!this.activeNode)return null;switch(this.activeTraversalMode){case "leaf":return this.nextLeaf(a,cvox.DomUtil.isLeafNode);case "token":return this.nextLeaf(a,cvox.MathUtil.isToken);case "tree":return this.nextSubtree(a,cvox.MathUtil.isMathmlTag);case "layout":return this.nextSubtree(a,cvox.MathUtil.isLayout);default:return this.nextSubtree(a,cvox.MathUtil.isMathmlTag)}};cvox.TraverseMath.prototype.activeContent=function(){return this.activeNode.textContent};
cvox.TraverseMath.prototype.nextSubtree=function(a,b){if(!this.activeNode||!this.activeMath)return null;if(a){if(this.activeNode==this.activeMath&&(c=cvox.DomUtil.directedFindDeepestNode(this.activeNode,a,b),c!=this.activeNode))return this.activeNode=c;if(c=cvox.DomUtil.directedFindNextNode(this.activeNode,this.activeMath,a,b,!0,!0))this.activeNode=c}else{var c=cvox.DomUtil.directedFindFirstNode(this.activeNode,a,b);if(c)this.activeNode=c;else if(c=cvox.DomUtil.directedFindNextNode(this.activeNode,
this.activeMath,a,b))this.activeNode=c}return this.activeNode};cvox.MathWalker=function(){this.speak_=new cvox.MathSpeak({domain:"default"});this.traverse_=new cvox.TraverseMath;this.explore_=!1};goog.inherits(cvox.MathWalker,cvox.AbstractWalker);cvox.MathWalker.prototype.next=function(a){if(this.explore_){a=a.isReversed();var b=cvox.CursorSelection.fromNode(this.traverse_.next(a));b.setReversed(a);return b}return null};
cvox.MathWalker.prototype.sync=function(a){if(!this.traverse_.activeNode||!this.traverse_.activeMath){var b=this.getMathNode_(a);this.explore_=!1;this.traverse_.initialize(b,a.isReversed())}b=this.explore_?cvox.CursorSelection.fromNode(this.traverse_.activeNode):cvox.CursorSelection.fromNode(this.traverse_.activeMath);b.setReversed(a.isReversed());return b};
cvox.MathWalker.prototype.getDescription=function(a,b){if(this.explore_)return this.speak_.speakString(this.traverse_.activeContent());var c=[];c.push(new cvox.NavDescription({text:cvox.ChromeVox.msgs.getMsg("math_expr")}));c[0].pushEarcon(cvox.AbstractEarcons.OBJECT_ENTER);var d=this.getMathNode_(b);cvox.AriaUtil.isMath(d)?c.push(new cvox.NavDescription({text:cvox.DomUtil.getName(d,!1,!1)})):cvox.AriaUtil.isMath(d.parentNode)?c.push(new cvox.NavDescription({text:cvox.DomUtil.getName(d.parentNode,
!1,!1)})):(d=cvox.TraverseMath.allLeafNodes(d),c=c.concat(this.speak_.speakSequence(d)));return c};cvox.MathWalker.prototype.getGranularityMsg=function(){return cvox.ChromeVox.msgs.getMsg("math_expr")};cvox.MathWalker.prototype.getBraille=function(a,b){return cvox.BrailleUtil.getBraille(a,b)};cvox.MathWalker.prototype.isInMath=function(a){return null!=this.getMathNode_(a)};cvox.MathWalker.prototype.getMathNode_=function(a){return cvox.DomUtil.getContainingMath(a.end.node)};
cvox.MathWalker.prototype.setDomain=function(a){this.speak_.setDomain(a)};cvox.MathWalker.prototype.cycleDomain=function(){this.speak_.cycleDomain()};cvox.MathWalker.prototype.getDomainMsg=function(){return this.speak_.domain};cvox.MathWalker.prototype.cycleTraversalMode=function(){this.traverse_.cycleTraversalMode()};cvox.MathWalker.prototype.getTraversalModeMsg=function(){return this.traverse_.activeTraversalMode};cvox.MathWalker.prototype.setSavedGranularity=function(){};
cvox.MathWalker.prototype.toggleExplore=function(){this.explore_=!this.explore_};cvox.MathWalker.prototype.reset=function(){this.traverse_.initialize(null)};cvox.ObjectWalker=function(){cvox.AbstractNodeWalker.call(this)};goog.inherits(cvox.ObjectWalker,cvox.AbstractNodeWalker);
cvox.ObjectWalker.prototype.findNext=function(a,b){var c=a.isReversed(),d=a.clone(),e;if(e=b(cvox.DomUtil.getAncestors(d.start.node)))d=cvox.CursorSelection.fromNode(e).setReversed(c);for(e=0;1E3>e;++e){var d=this.next(d||this.syncToPageBeginning({reversed:c})),f=null;if(!d||(f=b(cvox.DomUtil.getAncestors(d.start.node))))return f?cvox.CursorSelection.fromNode(f):null}1E3==e&&window.console.log("INFINITE LOOP!");return null};cvox.ObjectWalker.prototype.stopNodeDescent=function(a){return cvox.DomUtil.isLeafNode(a)};
cvox.AbstractNodeWalker.prototype.getDescription=function(a,b){return[cvox.DescriptionUtil.getDescriptionFromAncestors(cvox.DomUtil.getUniqueAncestors(a.end.node,b.start.node),!0,cvox.ChromeVox.verbosity)]};cvox.ObjectWalker.prototype.getBraille=function(a,b){return cvox.BrailleUtil.getBraille(a,b)};cvox.ObjectWalker.prototype.getGranularityMsg=function(){return cvox.ChromeVox.msgs.getMsg("object_strategy")};cvox.SentenceWalker=function(){cvox.AbstractSelectionWalker.call(this);this.grain=cvox.TraverseContent.kSentence};goog.inherits(cvox.SentenceWalker,cvox.AbstractSelectionWalker);cvox.SentenceWalker.prototype.getGranularityMsg=function(){return cvox.ChromeVox.msgs.getMsg("sentence_granularity")};cvox.TableUtil={};cvox.TableUtil.checkIfHeader=function(a){return"TH"==a.tagName||a.hasAttribute("scope")||a.hasAttribute("role")&&("rowheader"==a.getAttribute("role")||"columnheader"==a.getAttribute("role"))};
cvox.TableUtil.determineColGroups=function(a){var b=[];if(0==a.length)return b;for(var c=0;c<a.length;c++){var d=a[c],e=cvox.TableUtil.getColNodes(d);if(0<e.length)for(d=0;d<e.length;d++){var f=e[d];if(f.hasAttribute("span"))for(var f=parseInt(f.getAttribute("span"),10),g=0;g<f;g++)b.push(c);else b.push(c)}else if(d.hasAttribute("span")){f=parseInt(d.getAttribute("span"),10);for(g=0;g<f;g++)b.push(c)}else b.push(c)}return b};cvox.TableUtil.pushIfNotContained=function(a,b){-1==a.indexOf(b)&&a.push(b)};
cvox.TableUtil.getChildRows=function(a){return cvox.XpathUtil.evalXPath('child::tbody/tr | child::thead/tr | child::*[attribute::role="row"]',a)};cvox.TableUtil.getChildCells=function(a){return cvox.XpathUtil.evalXPath('child::td | child::th | child::*[attribute::role="gridcell"] |child::*[attribute::role="rowheader"] |child::*[attribute::role="columnheader"]',a)};cvox.TableUtil.getCellWithID=function(a,b){return cvox.XpathUtil.evalXPath("id('"+b+"')",a)};
cvox.TableUtil.getColGroups=function(a){return cvox.XpathUtil.evalXPath("child::colgroup",a)};cvox.TableUtil.getColNodes=function(a){return cvox.XpathUtil.evalXPath("child::col",a)};function ShadowTableNode(){}ShadowTableNode.prototype.rowHeaderCells=[];ShadowTableNode.prototype.colHeaderCells=[];cvox.TraverseTable=function(a){this.activeTable_=null;this.shadowTable_=[];this.candidateHeaders_=[];this.idToShadowNode_=[];this.initialize(a)};cvox.TraverseTable.prototype.colCount=null;cvox.TraverseTable.prototype.rowCount=null;cvox.TraverseTable.prototype.tableRowHeaders=null;cvox.TraverseTable.prototype.tableColHeaders=null;
cvox.TraverseTable.prototype.initialize=function(a){a&&a!=this.activeTable_&&(this.activeTable_=a,this.currentCellCursor=null,this.tableRowHeaders=[],this.tableColHeaders=[],this.buildShadowTable_(),this.colCount=this.shadowColCount_(),this.rowCount=this.countRows_(),this.findHeaderCells_(),this.activeTable_.addEventListener("DOMSubtreeModified",goog.bind(function(){this.buildShadowTable_();this.colCount=this.shadowColCount_();this.rowCount=this.countRows_();this.tableRowHeaders=[];this.tableColHeaders=
[];this.findHeaderCells_();0==this.colCount&&0==this.rowCount||null==this.getCell(this.currentCellCursor)&&this.attachCursorToNearestCell_()},this),!1))};
cvox.TraverseTable.prototype.findNearestCursor=function(a){for(;a.firstElementChild&&!("TABLE"==a.firstElementChild.tagName||cvox.AriaUtil.isGrid(a.firstElementChild));)a=a.firstElementChild;for(;!cvox.DomPredicates.cellPredicate(cvox.DomUtil.getAncestors(a));)if(a=cvox.DomUtil.directedNextLeafNode(a),!cvox.DomUtil.getContainingTable(a,{allowCaptions:!0}))return null;for(var b=0;b<this.rowCount;++b)for(var c=0;c<this.colCount;++c)if(this.shadowTable_[b][c]&&cvox.DomUtil.isDescendantOfNode(a,this.shadowTable_[b][c].activeCell))return[b,
c];return null};cvox.TraverseTable.prototype.attachCursorToNearestCell_=function(){if(this.currentCellCursor){var a=this.currentCellCursor,b=this.shadowTable_[a[0]];if(b)this.currentCellCursor=[a[0],b.length-1];else if(b=this.shadowTable_.length,0==b)this.currentCellCursor=null;else{var c=this.shadowTable_[b-1][a[1]];c?this.currentCellCursor=[b-1,a[1]]:this.goToLastCell()}}else this.goToLastCell()};
cvox.TraverseTable.prototype.buildShadowTable_=function(){this.shadowTable_=[];for(var a=cvox.TableUtil.getChildRows(this.activeTable_),b=null,c=null,d=cvox.TableUtil.getColGroups(this.activeTable_),d=cvox.TableUtil.determineColGroups(d),e=0;e<a.length;e++)this.shadowTable_.push([]);for(e=0;e<a.length;e++)for(var f=cvox.TableUtil.getChildCells(a[e]),g=0,h=0;g<f.length;)if(null==this.shadowTable_[e][h]){var i=f[g],j=1,l=1;if(i.hasAttribute("colspan")&&(j=parseInt(i.getAttribute("colspan"),10),isNaN(j)||
0>=j))j=1;if(i.hasAttribute("rowspan")&&(l=parseInt(i.getAttribute("rowspan"),10),isNaN(l)||0>=l))l=1;for(var n=0;n<l;n++)for(var m=0;m<j;m++){var k=new ShadowTableNode;0==n&&0==m?(k.spanned=!1,k.rowSpan=!1,k.colSpan=!1):(k.spanned=!0,k.rowSpan=1<l,k.colSpan=1<j);k.i=e;k.j=h;k.activeCell=i;k.rowHeaderCells=[];k.colHeaderCells=[];k.isRowHeader=!1;k.isColHeader=!1;cvox.TableUtil.checkIfHeader(k.activeCell)?this.candidateHeaders_.push(k):k.activeCell.hasAttribute("headers")&&this.candidateHeaders_.push(k);
null==b?(b=a[e].parentNode,c=0):a[e].parentNode!=b&&(b=a[e].parentNode,c+=1);k.rowGroup=c;k.colGroup=0<d.length?d[h]:0;k.spanned||null!=i.id&&(this.idToShadowNode_[i.id]=k);this.shadowTable_[e+n][h+m]=k}h+=j;g++}else h+=1;return this.shadowTable_};
cvox.TraverseTable.prototype.findHeaderCells_=function(){for(var a=0;a<this.candidateHeaders_.length;a++){var b=this.candidateHeaders_[a],c=b.activeCell,d=null,e=null;if(!b.spanned){"TH"==c.tagName&&!c.hasAttribute("scope")?(0<b.j?"TH"==this.shadowTable_[b.i][b.j-1].activeCell.tagName&&(d="col"):b.j<this.shadowTable_[b.i].length-1?"TH"==this.shadowTable_[b.i][b.j+1].activeCell.tagName&&(d="col"):d="col",null==d&&(0<b.i?"TH"==this.shadowTable_[b.i-1][b.j].activeCell.tagName&&(d="row"):b.i<this.shadowTable_.length-
1?"TH"==this.shadowTable_[b.i+1][b.j].activeCell.tagName&&(d="row"):d="row")):c.hasAttribute("scope")?e=c.getAttribute("scope"):c.hasAttribute("role")&&"rowheader"==c.getAttribute("role")?e="row":c.hasAttribute("role")&&"columnheader"==c.getAttribute("role")&&(e="col");if("row"==e||"row"==d){b.isRowHeader=!0;for(d=b.j;d<this.shadowTable_[b.i].length;d++)e=this.shadowTable_[b.i][d],e.rowHeaderCells.push(c);this.tableRowHeaders.push(c)}else if("col"==e||"col"==d){b.isColHeader=!0;for(e=b.i;e<this.shadowTable_.length;e++){d=
this.shadowTable_[e][b.j];if(null==d)break;d.colHeaderCells.push(c)}this.tableColHeaders.push(c)}else if("rowgroup"==e){b.isRowHeader=!0;for(var f=b.rowGroup,d=b.j+1;d<this.shadowTable_[b.i].length;d++)this.shadowTable_[b.i][d].rowHeaderCells.push(c);for(e=b.i+1;e<this.shadowTable_.length&&this.shadowTable_[e][0].rowGroup==f;e++)for(d=0;d<this.shadowTable_[e].length;d++)this.shadowTable_[e][d].rowHeaderCells.push(c);this.tableRowHeaders.push(c)}else if("colgroup"==e){b.isColHeader=!0;f=b.colGroup;
for(d=b.j+1;d<this.shadowTable_[b.i].length;d++)this.shadowTable_[b.i][d].colGroup==f&&this.shadowTable_[b.i][d].colHeaderCells.push(c);for(e=b.i+1;e<this.shadowTable_.length;e++)for(d=0;d<this.shadowTable_[e].length;d++)this.shadowTable_[e][d].colGroup==f&&this.shadowTable_[e][d].colHeaderCells.push(c);this.tableColHeaders.push(c)}c.hasAttribute("headers")&&this.findAttrbHeaders_(b);c.hasAttribute("aria-describedby")&&this.findAttrbDescribedBy_(b)}}};
cvox.TraverseTable.prototype.findAttrbHeaders_=function(a){for(var b=a.activeCell,c=b.getAttribute("headers").split(" "),d=0;d<c.length;d++)for(var e=cvox.TableUtil.getCellWithID(this.activeTable_,c[d]),f=0;f<e.length&&e[f].id!=b.id;f++){var g=this.idToShadowNode_[e[f].id];if(!cvox.TableUtil.checkIfHeader(g.activeCell)){var h=Math.abs(g.i-a.i),i=Math.abs(g.j-a.j);0==h||h<i?(cvox.TableUtil.pushIfNotContained(a.rowHeaderCells,g.activeCell),cvox.TableUtil.pushIfNotContained(this.tableRowHeaders,g.activeCell)):
(cvox.TableUtil.pushIfNotContained(a.colHeaderCells,g.activeCell),cvox.TableUtil.pushIfNotContained(this.tableColHeaders,g.activeCell))}}};
cvox.TraverseTable.prototype.findAttrbDescribedBy_=function(a){for(var b=a.activeCell,c=b.getAttribute("aria-describedby").split(" "),d=0;d<c.length;d++)for(var e=cvox.TableUtil.getCellWithID(this.activeTable_,c[d]),f=0;f<e.length&&e[f].id!=b.id;f++){var g=this.idToShadowNode_[e[f].id];cvox.TableUtil.checkIfHeader(g.activeCell)||(g.activeCell.hasAttribute("role")&&"rowheader"==g.activeCell.getAttribute("role")?(cvox.TableUtil.pushIfNotContained(a.rowHeaderCells,g.activeCell),cvox.TableUtil.pushIfNotContained(this.tableRowHeaders,
g.activeCell)):g.activeCell.hasAttribute("role")&&"columnheader"==g.activeCell.getAttribute("role")&&(cvox.TableUtil.pushIfNotContained(a.colHeaderCells,g.activeCell),cvox.TableUtil.pushIfNotContained(this.tableColHeaders,g.activeCell)))}};cvox.TraverseTable.prototype.getCell=function(){if(!this.currentCellCursor)return null;var a=this.shadowTable_[this.currentCellCursor[0]][this.currentCellCursor[1]];return a.activeCell};
cvox.TraverseTable.prototype.getCellAt=function(a){return a[0]<this.rowCount&&0<=a[0]&&(a[1]<this.colCount&&0<=a[1])&&(a=this.shadowTable_[a[0]][a[1]],null!=a)?a.activeCell:null};cvox.TraverseTable.prototype.getCellRowHeaders=function(){var a=this.shadowTable_[this.currentCellCursor[0]][this.currentCellCursor[1]];return a.rowHeaderCells};cvox.TraverseTable.prototype.getCellColHeaders=function(){var a=this.shadowTable_[this.currentCellCursor[0]][this.currentCellCursor[1]];return a.colHeaderCells};
cvox.TraverseTable.prototype.isSpanned=function(){var a=this.shadowTable_[this.currentCellCursor[0]][this.currentCellCursor[1]];return a.spanned};cvox.TraverseTable.prototype.isRowHeader=function(){var a=this.shadowTable_[this.currentCellCursor[0]][this.currentCellCursor[1]];return a.isRowHeader};cvox.TraverseTable.prototype.isColHeader=function(){var a=this.shadowTable_[this.currentCellCursor[0]][this.currentCellCursor[1]];return a.isColHeader};
cvox.TraverseTable.prototype.getCol=function(){for(var a=[],b=0;b<this.shadowTable_.length;b++)if(this.shadowTable_[b][this.currentCellCursor[1]]){var c=this.shadowTable_[b][this.currentCellCursor[1]];if(c.colSpan&&c.rowSpan){var d=a[a.length-1];d!=c.activeCell&&a.push(c.activeCell)}else(c.colSpan||!c.rowSpan)&&a.push(c.activeCell)}return a};cvox.TraverseTable.prototype.summaryText=function(){return!this.activeTable_.hasAttribute("summary")?null:this.activeTable_.getAttribute("summary")};
cvox.TraverseTable.prototype.shadowColCount_=function(){for(var a=0,b=0;b<this.shadowTable_.length;b++)this.shadowTable_[b].length>a&&(a=this.shadowTable_[b].length);return a};cvox.TraverseTable.prototype.countRows_=function(){var a=cvox.TableUtil.getChildRows(this.activeTable_);return a.length};cvox.TraverseTable.prototype.nextRow=function(){return this.currentCellCursor?this.goToRow(this.currentCellCursor[0]+1):this.goToRow(0)};
cvox.TraverseTable.prototype.nextCol=function(){return this.currentCellCursor?this.goToCol(this.currentCellCursor[1]+1):this.goToCol(0)};cvox.TraverseTable.prototype.goToRow=function(a){return null!=this.shadowTable_[a]?(this.currentCellCursor=null==this.currentCellCursor?[a,0]:[a,this.currentCellCursor[1]],!0):!1};cvox.TraverseTable.prototype.goToCol=function(a){if(0>a||a>=this.colCount)return!1;this.currentCellCursor=null==this.currentCellCursor?[0,a]:[this.currentCellCursor[0],a];return!0};
cvox.TraverseTable.prototype.goToCell=function(a){if(a[0]<this.rowCount&&0<=a[0]&&a[1]<this.colCount&&0<=a[1]){var b=this.shadowTable_[a[0]][a[1]];if(null!=b)return this.currentCellCursor=a,!0}return!1};cvox.TraverseTable.prototype.goToLastCell=function(){var a=this.shadowTable_.length;if(0==a)return!1;var b=this.shadowTable_[a-1],a=[a-1,b.length-1],b=this.shadowTable_[a[0]][a[1]];return null!=b?(this.currentCellCursor=a,!0):!1};
cvox.TraverseTable.prototype.goToRowLastCell=function(){var a=this.currentCellCursor[0],a=[a,this.shadowTable_[a].length-1],b=this.shadowTable_[a[0]][a[1]];return null!=b?(this.currentCellCursor=a,!0):!1};cvox.TraverseTable.prototype.goToColLastCell=function(){var a=this.getCol(),a=[a.length-1,this.currentCellCursor[1]],b=this.shadowTable_[a[0]][a[1]];return null!=b?(this.currentCellCursor=a,!0):!1};cvox.TableWalker=function(){this.tt_=new cvox.TraverseTable(null)};goog.inherits(cvox.TableWalker,cvox.AbstractWalker);cvox.TableWalker.prototype.next=function(a){return this.nextRow(a)};cvox.TableWalker.prototype.sync=function(a){return this.goTo_(a,goog.bind(function(a){return this.tt_.goToCell(a)},this))};
cvox.TableWalker.prototype.getDescription=function(a,b){var c=this.syncPosition_(b);if(!c)return[];this.tt_.goToCell(c);c=cvox.DescriptionUtil.getCollectionDescription(a,b);0==c.length&&c.push(new cvox.NavDescription({annotation:cvox.ChromeVox.msgs.getMsg("empty_cell")}));var d=this.getTableNode_(b);if(cvox.DomUtil.getContainingTable(a.start.node)!=d||cvox.DomUtil.getContainingTable(a.end.node)!=d){var d=this.tt_.summaryText(),e=this.getLocationInfo_(b);null!=e&&(c.push(new cvox.NavDescription({context:cvox.ChromeVox.msgs.getMsg("table_location",
e),annotation:d?d+" ":""})),c[0].pushEarcon(cvox.AbstractEarcons.OBJECT_ENTER));this.tt_.isSpanned()&&c.push(new cvox.NavDescription({annotation:cvox.ChromeVox.msgs.getMsg("spanned")}))}else b.equals(a)&&c[0].pushEarcon(cvox.AbstractEarcons.WRAP_EDGE);return c};cvox.TableWalker.prototype.getBraille=function(a,b){var c=new cvox.NavBraille({}),d=this.syncPosition_(b);d&&(c=cvox.BrailleUtil.getBraille(a,b),c.text+=" "+ ++d[0]+"/"+ ++d[1]);return c};
cvox.TableWalker.prototype.getLocationDescription=function(a){a=this.getLocationInfo_(a);return null==a?null:[new cvox.NavDescription({text:cvox.ChromeVox.msgs.getMsg("table_location",a)})]};cvox.TableWalker.prototype.getGranularityMsg=function(){return cvox.ChromeVox.msgs.getMsg("table_strategy")};cvox.TableWalker.prototype.goToFirstCell=function(a){return this.goTo_(a,goog.bind(function(){return this.tt_.goToCell([0,0])},this))};
cvox.TableWalker.prototype.goToLastCell=function(a){return this.goTo_(a,goog.bind(function(){return this.tt_.goToLastCell()},this))};cvox.TableWalker.prototype.goToRowFirstCell=function(a){return this.goTo_(a,goog.bind(function(a){return this.tt_.goToCell([a[0],0])},this))};cvox.TableWalker.prototype.goToRowLastCell=function(a){return this.goTo_(a,goog.bind(function(){return this.tt_.goToRowLastCell()},this))};
cvox.TableWalker.prototype.goToColFirstCell=function(a){return this.goTo_(a,goog.bind(function(a){return this.tt_.goToCell([0,a[1]])},this))};cvox.TableWalker.prototype.goToColLastCell=function(a){return this.goTo_(a,goog.bind(function(){return this.tt_.goToColLastCell()},this))};cvox.TableWalker.prototype.nextRow=function(a){return this.goTo_(a,goog.bind(function(b){return this.tt_.goToCell([b[0]+(a.isReversed()?-1:1),b[1]])},this))};
cvox.TableWalker.prototype.nextCol=function(a){return this.goTo_(a,goog.bind(function(b){return this.tt_.goToCell([b[0],b[1]+(a.isReversed()?-1:1)])},this))};cvox.TableWalker.prototype.getHeaderText=function(a){this.tt_.initialize(this.getTableNode_(a));a=this.tt_.findNearestCursor(a.start.node);return!a||!this.tt_.goToCell(a)?cvox.ChromeVox.msgs.getMsg("not_inside_table"):this.getRowHeaderText_(a)+" "+this.getColHeaderText_(a)};
cvox.TableWalker.prototype.getRowHeaderText_=function(a){var b="",c=this.tt_.getCellRowHeaders();if(0==c.length)return c=this.tt_.getCellAt([a[0],0]),b+=cvox.DomUtil.collapseWhitespace(cvox.DomUtil.getValue(c)+" "+cvox.DomUtil.getName(c)),cvox.ChromeVox.msgs.getMsg("row_header")+b;for(a=0;a<c.length;++a)b+=cvox.DomUtil.collapseWhitespace(cvox.DomUtil.getValue(c[a])+" "+cvox.DomUtil.getName(c[a]));return""==b?cvox.ChromeVox.msgs.getMsg("empty_row_header"):cvox.ChromeVox.msgs.getMsg("row_header")+b};
cvox.TableWalker.prototype.getColHeaderText_=function(a){var b="",c=this.tt_.getCellColHeaders();if(0==c.length)return c=this.tt_.getCellAt([0,a[1]]),b+=cvox.DomUtil.collapseWhitespace(cvox.DomUtil.getValue(c)+" "+cvox.DomUtil.getName(c)),cvox.ChromeVox.msgs.getMsg("column_header")+b;for(a=0;a<c.length;++a)b+=cvox.DomUtil.collapseWhitespace(cvox.DomUtil.getValue(c[a])+" "+cvox.DomUtil.getName(c[a]));return""==b?cvox.ChromeVox.msgs.getMsg("empty_row_header"):cvox.ChromeVox.msgs.getMsg("column_header")+
b};cvox.TableWalker.prototype.getLocationInfo_=function(a){this.tt_.initialize(this.getTableNode_(a));a=this.tt_.findNearestCursor(a.start.node);return!a?null:[a[0]+1,this.tt_.rowCount,a[1]+1,this.tt_.colCount].map(function(a){return cvox.ChromeVox.msgs.getNumber(a)})};cvox.TableWalker.prototype.isInTable=function(a){return null!=this.getTableNode_(a)};
cvox.TableWalker.prototype.goTo_=function(a,b){this.tt_.initialize(this.getTableNode_(a));var c=this.tt_.findNearestCursor(a.end.node);if(!c)return null;this.tt_.goToCell(c);return!b(c)?null:cvox.CursorSelection.fromNode(this.tt_.getCell()).setReversed(a.isReversed())};cvox.TableWalker.prototype.getTableNode_=function(a){return cvox.DomUtil.getContainingTable(a.end.node)};cvox.TableWalker.prototype.syncPosition_=function(a){var b=this.getTableNode_(a);this.tt_.initialize(b);return this.tt_.findNearestCursor(a.end.node)};cvox.CssDimension={name:null,threshold:null,distance:null};cvox.VisualWalker=function(){cvox.AbstractNodeWalker.call(this);this.HEADER_TAG_LIST_="H1 H2 H3 H4 H5 H6".split(" ");this.subWalker_=new cvox.GroupWalker;this.dimensions_=[{name:"deltaX",threshold:50,distance:this.getDeltaX_},{name:"deltaY",threshold:10,distance:this.getDeltaY_},{name:"commonAncestry",threshold:0.5,distance:this.getCommonAncestry_},{name:"breakingTags",threshold:1,distance:this.getBreakingTags_}]};goog.inherits(cvox.VisualWalker,cvox.AbstractNodeWalker);
cvox.VisualWalker.prototype.next=function(a){var b=a.isReversed();a=cvox.CursorSelection.fromNode(a.end.node).setReversed(b);a=this.subWalker_.next(a);if(!a)return null;var c=a,d=null,e=null,f=null;do d=a,a=this.subWalker_.next(d),b?(e=a,f=d):(e=d,f=a);while(d&&a&&(0<=this.compare_(e.end.node,f.start.node)||d.end.node==document.body));return new cvox.CursorSelection(c.start,d.end,b)};
cvox.VisualWalker.prototype.getDescription=function(a,b){if(b.start.node==b.end.node)return this.subWalker_.getDescription(a,b);var c=cvox.CursorSelection.fromNode(b.absStart().node),d=this.subWalker_.next(c.clone().setReversed(!0))||cvox.CursorSelection.fromBody();d.setReversed(!1);var e=[];do e=e.concat(this.subWalker_.getDescription(d,c)),d=c,c=this.subWalker_.next(d)||cvox.CursorSelection.fromBody();while(d.absEnd().node!=b.absEnd().node);return e};
cvox.VisualWalker.prototype.stopNodeDescent=function(a){return!a||a.nodeType!=Node.ELEMENT_NODE?!0:this.subWalker_.stopNodeDescent(a)};cvox.VisualWalker.prototype.sync=function(a){if(a.start.node==document.body||a.end.node==document.body)a=this.subWalker_.sync(a)||cvox.CursorSelection.fromBody();var b=a.isReversed();a=a.clone();a.setReversed(!b);a=this.next(a)||cvox.CursorSelection.fromBody().setReversed(!b);a.setReversed(b);return this.next(a)||cvox.CursorSelection.fromBody().setReversed(b)};
cvox.VisualWalker.prototype.getGranularityMsg=function(){return cvox.ChromeVox.msgs.getMsg("visual_strategy")};cvox.VisualWalker.prototype.compare_=function(a,b){a=this.toNearestElement_(a);b=this.toNearestElement_(b);for(var c=0;c<this.dimensions_.length;++c){var d=this.dimensions_[c],e=d.distance.call(this,a,b);if(e>d.threshold||0>e)return-1}return e};
cvox.VisualWalker.prototype.getDeltaX_=function(a,b){if(a.nodeType!=Node.ELEMENT_NODE||b.nodeType!=Node.ELEMENT_NODE)return-1;var c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e=Math.abs(c.right-d.left),f=Math.abs(c.left-d.right),g=Math.abs(c.left-d.left),c=Math.abs(c.right-d.right);return Math.min(e,f,g,c)};
cvox.VisualWalker.prototype.getDeltaY_=function(a,b){if(a.nodeType!=Node.ELEMENT_NODE||b.nodeType!=Node.ELEMENT_NODE)return-1;var c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e=Math.abs(c.bottom-d.top),f=Math.abs(c.top-d.bottom),g=Math.abs(c.top-d.top),c=Math.abs(c.bottom-d.bottom);-1!=this.HEADER_TAG_LIST_.indexOf(a.tagName)&&(e/=5,f/=5,g/=5,c/=5);return Math.min(e,f,g,c)};
cvox.VisualWalker.prototype.getCommonAncestry_=function(a,b){for(var c=a,d=0;c!=document.documentElement;)c["cvox-mark"]=!0,++d,c=c.parentNode;for(var e=b,f=0,g=-1;e!=document.documentElement&&f<=d;){if(e["cvox-mark"]){g=f;break}++f;e=e.parentNode}for(;c;)c["cvox-mark"]=!1,c=c.parentNode;return g/d};cvox.VisualWalker.prototype.getBreakingTags_=function(a,b){return this.isBreakingTag_(b)&&!this.isBreakingTag_(a)?-1:0};
cvox.VisualWalker.prototype.isBreakingTag_=function(a){return-1!=this.HEADER_TAG_LIST_.indexOf(a.tagName)||"TR"==a.tagName?!0:!1};cvox.VisualWalker.prototype.toNearestElement_=function(a){a.nodeType!=Node.ELEMENT_NODE&&(a=a.parentElement);return a};cvox.WordWalker=function(){cvox.AbstractSelectionWalker.call(this);this.grain=cvox.TraverseContent.kWord};goog.inherits(cvox.WordWalker,cvox.AbstractSelectionWalker);cvox.WordWalker.prototype.getGranularityMsg=function(){return cvox.ChromeVox.msgs.getMsg("word_granularity")};cvox.NavigationShifter=function(){this.reset_()};cvox.NavigationShifter.GRANULARITIES={CHARACTER:0,WORD:1,LINE:2,SENTENCE:3,OBJECT:4,GROUP:5,VISUAL:6};cvox.NavigationShifter.prototype.storeOn=function(a){a.granularity=this.getGranularity()};cvox.NavigationShifter.prototype.readFrom=function(a){this.setGranularity(a.granularity)};cvox.NavigationShifter.prototype.next=function(a){return this.currentWalker_.next(a)};
cvox.NavigationShifter.prototype.findNext=function(a,b){return this.objectWalker_.findNext(a,b)};cvox.NavigationShifter.prototype.syncToPageBeginning=function(a){this.ensureNotTableMode();return this.currentWalker_.syncToPageBeginning(a)};cvox.NavigationShifter.prototype.act=function(a){return this.currentWalker_.act(a)};cvox.NavigationShifter.prototype.sync=function(a){return this.currentWalker_.sync(a)};
cvox.NavigationShifter.prototype.getDescription=function(a,b){return this.currentWalker_.getDescription(a,b)};cvox.NavigationShifter.prototype.getBraille=function(a,b){return this.currentWalker_.getBraille(a,b)};cvox.NavigationShifter.prototype.getGranularityMsg=function(){return this.currentWalker_.getGranularityMsg()};cvox.NavigationShifter.prototype.goToFirstCell=function(a){return this.tableWalker_.goToFirstCell(a)};cvox.NavigationShifter.prototype.goToLastCell=function(a){return this.tableWalker_.goToLastCell(a)};
cvox.NavigationShifter.prototype.goToRowFirstCell=function(a){return this.tableWalker_.goToRowFirstCell(a)};cvox.NavigationShifter.prototype.goToRowLastCell=function(a){return this.tableWalker_.goToRowLastCell(a)};cvox.NavigationShifter.prototype.goToColFirstCell=function(a){return this.tableWalker_.goToColFirstCell(a)};cvox.NavigationShifter.prototype.goToColLastCell=function(a){return this.tableWalker_.goToColLastCell(a)};cvox.NavigationShifter.prototype.nextRow=function(a){return this.tableWalker_.nextRow(a)};
cvox.NavigationShifter.prototype.nextCol=function(a){return this.tableWalker_.nextCol(a)};cvox.NavigationShifter.prototype.getHeaderText=function(a){return this.tableWalker_.getHeaderText(a)};cvox.NavigationShifter.prototype.getLocationDescription=function(a){return this.tableWalker_.getLocationDescription(a)};cvox.NavigationShifter.prototype.isInTable=function(a){return this.tableWalker_.isInTable(a)};
cvox.NavigationShifter.prototype.makeMoreGranular=function(){this.ensureNotSubnavigating();this.currentWalkerIndex_=Math.max(this.currentWalkerIndex_-1,0);this.currentWalker_=this.walkers_[this.currentWalkerIndex_]};cvox.NavigationShifter.prototype.makeLessGranular=function(){this.ensureNotSubnavigating();this.currentWalkerIndex_=Math.min(this.currentWalkerIndex_+1,this.walkers_.length-1);this.currentWalker_=this.walkers_[this.currentWalkerIndex_]};
cvox.NavigationShifter.prototype.setGranularity=function(a){this.ensureNotSubnavigating();this.currentWalkerIndex_=a;this.currentWalker_=this.walkers_[this.currentWalkerIndex_]};cvox.NavigationShifter.prototype.getGranularity=function(){var a=this.isSubnavigating();this.ensureNotSubnavigating();var b=this.currentWalkerIndex_;a&&this.ensureSubnavigating();return b};
cvox.NavigationShifter.prototype.ensureSubnavigating=function(){!1==this.isSubnavigating_&&(this.makeMoreGranular(),this.isSubnavigating_=!0)};cvox.NavigationShifter.prototype.ensureNotSubnavigating=function(){!0==this.isSubnavigating_&&(this.isSubnavigating_=!1,this.makeLessGranular())};cvox.NavigationShifter.prototype.isSubnavigating=function(){return this.isSubnavigating_};cvox.NavigationShifter.prototype.isTableMode=function(){return this.isTableMode_&&this.currentWalker_==this.tableWalker_};
cvox.NavigationShifter.prototype.tryEnterTable=function(a,b){b=b||{force:!1,fromTop:!1};if(this.isTableMode_)return null;var c=cvox.DomUtil.getContainingTable(a.start.node);return c&&(b.force||!cvox.DomUtil.isLayoutTable(c))?(this.ensureTableMode_(),b.fromTop?this.tableWalker_.goToFirstCell(a):this.sync(a)):null};
cvox.NavigationShifter.prototype.reset_=function(){this.isMathMode_=this.isTableMode_=this.isSubnavigating_=!1;this.mathWalker_=new cvox.MathWalker;this.tableWalker_=new cvox.TableWalker;this.visualWalker_=new cvox.VisualWalker;this.groupWalker_=new cvox.GroupWalker;this.objectWalker_=new cvox.ObjectWalker;this.sentenceWalker_=new cvox.SentenceWalker;this.lineWalker_=new cvox.LineWalker;this.wordWalker_=new cvox.WordWalker;this.characterWalker_=new cvox.CharacterWalker;this.filteredWalker=new cvox.WalkerDecorator;
this.filteredWalker.decorate(this.groupWalker_);this.filteredWalker.decorate(this.objectWalker_);this.filteredWalker.decorate(this.sentenceWalker_);this.filteredWalker.decorate(this.lineWalker_);this.filteredWalker.decorate(this.wordWalker_);this.filteredWalker.decorate(this.characterWalker_);this.walkers_=[this.characterWalker_,this.wordWalker_,this.lineWalker_,this.sentenceWalker_,this.objectWalker_,this.groupWalker_,this.visualWalker_];this.currentWalkerIndex_=this.walkers_.indexOf(this.groupWalker_);
this.currentWalker_=this.walkers_[this.currentWalkerIndex_]};cvox.NavigationShifter.prototype.ensureTableMode_=function(){this.isTableMode_=!0;this.walkers_[cvox.NavigationShifter.GRANULARITIES.GROUP]=this.tableWalker_;this.currentWalkerIndex_=cvox.NavigationShifter.GRANULARITIES.GROUP;this.currentWalker_=this.walkers_[this.currentWalkerIndex_]};
cvox.NavigationShifter.prototype.ensureNotTableMode=function(){this.isTableMode_=!1;this.walkers_[cvox.NavigationShifter.GRANULARITIES.GROUP]=this.groupWalker_;this.currentWalker_=this.walkers_[this.currentWalkerIndex_]};cvox.NavigationShifter.prototype.isMathMode=function(){return this.isMathMode_&&this.currentWalker_==this.mathWalker_};cvox.NavigationShifter.prototype.cycleDomain=function(){this.mathWalker_.cycleDomain()};cvox.NavigationShifter.prototype.cycleTraversalMode=function(){this.mathWalker_.cycleTraversalMode()};
cvox.NavigationShifter.prototype.toggleExplore=function(){this.mathWalker_.toggleExplore()};cvox.NavigationShifter.prototype.getDomainMsg=function(){return this.mathWalker_.getDomainMsg()};cvox.NavigationShifter.prototype.getTraversalModeMsg=function(){return this.mathWalker_.getTraversalModeMsg()};cvox.NavigationShifter.prototype.tryEnterMath=function(a){if(this.isMathMode_)return null;var b=cvox.DomUtil.getContainingMath(a.start.node);return b?(this.ensureMathMode_(),this.sync(a)):null};
cvox.NavigationShifter.prototype.tryExitMath=function(a,b){this.ensureNotMathMode();if(this.isInMath(a)){var c=cvox.DomUtil.getContainingMath(a.start.node);if(!c)return null;do c=cvox.DomUtil.directedNextLeafNode(c,b);while(c&&!cvox.DomUtil.hasContent(c));if(a=cvox.CursorSelection.fromNode(c))return a.setReversed(b),this.sync(a)}return null};cvox.NavigationShifter.prototype.isInMath=function(a){return this.mathWalker_.isInMath(a)};
cvox.NavigationShifter.prototype.ensureNotMathMode=function(){this.isMathMode_=!1;this.mathWalker_.reset();this.walkers_[cvox.NavigationShifter.GRANULARITIES.GROUP]=this.groupWalker_;this.currentWalker_=this.walkers_[this.currentWalkerIndex_]};
cvox.NavigationShifter.prototype.ensureMathMode_=function(){this.isMathMode_=!0;this.walkers_[cvox.NavigationShifter.GRANULARITIES.GROUP]=this.mathWalker_;this.mathWalker_.setSavedGranularity(this.currentWalkerIndex_);this.currentWalkerIndex_=cvox.NavigationShifter.GRANULARITIES.GROUP;this.currentWalker_=this.walkers_[this.currentWalkerIndex_]};cvox.NavigationSpeaker=function(){};cvox.NavigationSpeaker.prototype.speakDescriptionArray=function(a,b,c){for(var d=function(b,d){var e=a[b],i=function(){for(var a=0;a<e.earcons.length;a++)cvox.ChromeVox.earcons.playEarcon(e.earcons[a])},j=void 0;b==a.length-1&&c&&(j=c);e.speak(d,i,j);cvox.ChromeVox.host.hasTtsCallback()||i()},e=0;e<a.length;e++)a[e].isEmpty()||(d(e,b),b=cvox.AbstractTts.QUEUE_MODE_QUEUE);0==a.length&&c&&c()};cvox.NavigationManager=function(){this.addInterframeListener_();this.reset()};cvox.NavigationManager.prototype.storeOn=function(a){a.reversed=this.isReversed();this.navShifter_.storeOn(a)};cvox.NavigationManager.prototype.readFrom=function(a){this.curSel_.setReversed(a.reversed);this.navShifter_.readFrom(a)};
cvox.NavigationManager.prototype.reset=function(){this.navSpeaker_=new cvox.NavigationSpeaker;this.navShifter_=new cvox.NavigationShifter;this.curSel_=document.activeElement!=document.body?cvox.CursorSelection.fromNode(document.activeElement):this.navShifter_.syncToPageBeginning();this.prevSel_=this.curSel_.clone();this.ignoreIframesNoMatterWhat_=this.pageEnd_=this.bumpedEdge_=this.keepReading_=this.recovered_=this.skipped_=!1;this.pageSel_=null;this.activeIndicator&&this.activeIndicator.removeFromDom();
this.activeIndicator=new cvox.ActiveIndicator;this.navigationHistory_=new cvox.NavigationHistory;this.focusRecovery_="chrome:"!=window.location.protocol;this.iframeIdMap={};this.nextIframeId=1;document.activeElement!=document.body&&this.sync()};
cvox.NavigationManager.prototype.resolve=function(a){if(!this.getFocusRecovery())return!0;var b=this.getCurrentNode();if(!this.navigationHistory_.becomeInvalid(b)||this.peekNext_())return!0;b=this.navigationHistory_.revert(a);if(!b.current)return!0;a=cvox.CursorSelection.fromNode(b.current);b=cvox.CursorSelection.fromNode(b.previous);a=a||cvox.CursorSelection.fromBody();b=b||cvox.CursorSelection.fromBody();a.setReversed(this.isReversed());this.updateSel(a,b);this.recovered_=!0;return!1};
cvox.NavigationManager.prototype.getFocusRecovery=function(){return this.focusRecovery_};cvox.NavigationManager.prototype.setFocusRecovery=function(a){this.focusRecovery_=a};cvox.NavigationManager.prototype.next_=function(a){return this.tryBoundaries_(this.navShifter_.next(this.curSel_),a)?(this.pageSel_&&this.pageSel_.extend(this.curSel_),!0):!1};
cvox.NavigationManager.prototype.peekNext_=function(){var a=this.curSel_.clone(),b=!1,c=new cvox.NavigationShifter;c.setGranularity(this.navShifter_.getGranularity());c.sync(a);c.next(a)&&(b=!0);return b};cvox.NavigationManager.prototype.findNext=function(a){this.resolve();a==cvox.DomPredicates.tablePredicate&&this.tryExitTable();var b=this.navShifter_.findNext(this.curSel_,a);if(b){if(a==cvox.DomPredicates.tablePredicate)return this.tryTable_(b,!0);this.updateSelToArbitraryNode(b.start.node);return!0}return!1};
cvox.NavigationManager.prototype.act=function(){return this.navShifter_.act(this.curSel_)};cvox.NavigationManager.prototype.sync=function(){this.resolve();var a=this.navShifter_.sync(this.curSel_);a&&(this.curSel_=a)};cvox.NavigationManager.prototype.syncAll=function(a){this.sync();this.setFocus(a);this.updateIndicator()};cvox.NavigationManager.prototype.clearPageSel=function(){this.pageSel_=null};
cvox.NavigationManager.prototype.togglePageSel=function(){this.pageSel_=this.pageSel_?null:new cvox.PageSelection(this.curSel_);return!!this.pageSel_};
cvox.NavigationManager.prototype.getDescription=function(){var a=this.pageSel_?this.pageSel_.getDescription(this.navShifter_,this.prevSel_,this.curSel_):this.navShifter_.getDescription(this.prevSel_,this.curSel_),b=[];this.skipped_&&(b.push(cvox.AbstractEarcons.PARAGRAPH_BREAK),this.skipped_=!1);this.recovered_&&(b.push(cvox.AbstractEarcons.FONT_CHANGE),this.recovered_=!1);this.bumpedEdge_&&b.push(cvox.AbstractEarcons.OBJECT_EXIT);this.pageEnd_&&(b.push(cvox.AbstractEarcons.WRAP),this.pageEnd_=!1);
0<b.length&&0<a.length&&b.forEach(function(b){a[0].pushEarcon(b)});return a};cvox.NavigationManager.prototype.getBraille=function(){return"1.0"!=cvox.ChromeVox.version?new cvox.NavBraille({}):this.navShifter_.getBraille(this.prevSel_,this.curSel_)};cvox.NavigationManager.prototype.getGranularityMsg=function(){return this.navShifter_.getGranularityMsg()};cvox.NavigationManager.prototype.goToFirstCell=function(){return this.updateSel(this.navShifter_.goToFirstCell(this.curSel_))};
cvox.NavigationManager.prototype.goToLastCell=function(){return this.updateSel(this.navShifter_.goToLastCell(this.curSel_))};cvox.NavigationManager.prototype.goToRowFirstCell=function(){return this.updateSel(this.navShifter_.goToRowFirstCell(this.curSel_))};cvox.NavigationManager.prototype.goToRowLastCell=function(){return this.updateSel(this.navShifter_.goToRowLastCell(this.curSel_))};cvox.NavigationManager.prototype.goToColFirstCell=function(){return this.updateSel(this.navShifter_.goToColFirstCell(this.curSel_))};
cvox.NavigationManager.prototype.goToColLastCell=function(){return this.updateSel(this.navShifter_.goToColLastCell(this.curSel_))};cvox.NavigationManager.prototype.nextRow=function(){if(this.updateSel(this.navShifter_.nextRow(this.curSel_)))this.bumpedEdge_=!1;else{if(this.bumpedEdge_)return!1;this.bumpedEdge_=!0}return!0};cvox.NavigationManager.prototype.nextCol=function(){this.updateSel(this.navShifter_.nextCol(this.curSel_)||this.curSel_);return this.bumpedEdge_=!1};
cvox.NavigationManager.prototype.getHeaderText=function(){return this.navShifter_.getHeaderText(this.curSel_)};cvox.NavigationManager.prototype.getLocationDescription=function(){return this.navShifter_.getLocationDescription(this.curSel_)};cvox.NavigationManager.prototype.makeMoreGranular=function(){this.navShifter_.makeMoreGranular();this.sync()};cvox.NavigationManager.prototype.makeLessGranular=function(){this.navShifter_.makeLessGranular();this.sync()};
cvox.NavigationManager.prototype.setGranularity=function(a){this.navShifter_.setGranularity(a)};cvox.NavigationManager.prototype.getGranularity=function(){return this.navShifter_.getGranularity()};cvox.NavigationManager.prototype.ensureSubnavigating=function(){this.navShifter_.isSubnavigating()||(this.navShifter_.ensureSubnavigating(),this.sync())};cvox.NavigationManager.prototype.ensureNotSubnavigating=function(){this.navShifter_.isSubnavigating()&&(this.navShifter_.ensureNotSubnavigating(),this.sync())};
cvox.NavigationManager.prototype.isTableMode=function(){return this.navShifter_.isTableMode()};cvox.NavigationManager.prototype.speakDescriptionArray=function(a,b,c){this.navSpeaker_.speakDescriptionArray(a,b,c)};
cvox.NavigationManager.prototype.finishNavCommand=function(a,b){if(this.pageEnd_)cvox.ChromeVox.tts.stop(),cvox.ChromeVox.earcons.playEarcon(cvox.AbstractEarcons.WRAP);else{var c=cvox.ChromeVox.navigationManager.getDescription();(b=void 0===b?!0:b)&&this.setFocus();this.updateIndicator();var d=cvox.AbstractTts.QUEUE_MODE_FLUSH;a&&(cvox.ChromeVox.tts.speak(a,d,cvox.AbstractTts.PERSONALITY_ANNOTATION),d=cvox.AbstractTts.QUEUE_MODE_QUEUE);this.speakDescriptionArray(c,d,null);this.getBraille().write()}};
cvox.NavigationManager.prototype.navigate=function(a,b){if(this.pageEnd_)return this.pageEnd_=!1,this.syncToPageBeginning(),!0;if(!this.resolve())return!1;this.ensureNotSubnavigating();void 0!==b&&b!==this.getGranularity()&&(this.setGranularity(b),this.sync());return this.next_(!a)};cvox.NavigationManager.prototype.subnavigate=function(){this.resolve()&&(this.ensureSubnavigating(),this.next_(!0))};
cvox.NavigationManager.prototype.skip=function(){if(!this.keepReading_)return!1;cvox.ChromeVox.host.hasTtsCallback()&&this.next_(!0)&&(this.skipped_=!0,this.setReversed(!1),this.startCallbackReading_(cvox.AbstractTts.QUEUE_MODE_FLUSH));return!0};cvox.NavigationManager.prototype.startReading=function(a){this.keepReading_=!0;cvox.ChromeVox.host.hasTtsCallback()?this.startCallbackReading_(a):this.startNonCallbackReading_(a)};
cvox.NavigationManager.prototype.stopReading=function(a){this.keepReading_=!1;a&&cvox.ChromeVox.tts.stop()};cvox.NavigationManager.prototype.startCallbackReading_=cvox.ChromeVoxEventSuspender.withSuspendedEvents(function(a){this.setFocus();this.updateIndicator();var b=this.getDescription();this.speakDescriptionArray(b,a,goog.bind(function(){this.next_(!1)&&this.startCallbackReading_(cvox.AbstractTts.QUEUE_MODE_QUEUE)},this))});
cvox.NavigationManager.prototype.startNonCallbackReading_=cvox.ChromeVoxEventSuspender.withSuspendedEvents(function(a){this.keepReading_&&(cvox.ChromeVox.tts.isSpeaking()||(this.setFocus(),this.updateIndicator(),this.speakDescriptionArray(this.getDescription(),a,null),this.next_(!1)||(this.keepReading_=!1)),window.setTimeout(goog.bind(this.startNonCallbackReading_,this),1E3))});
cvox.NavigationManager.prototype.getFullDescription=function(){return this.pageSel_?this.pageSel_.getFullDescription():[cvox.DescriptionUtil.getDescriptionFromAncestors(cvox.DomUtil.getAncestors(this.curSel_.start.node),!0,cvox.ChromeVox.verbosity)]};cvox.NavigationManager.prototype.setFocus=function(a){this.pageSel_||a&&this.curSel_.start.node.constructor==Text||(this.isTableMode()?cvox.Focuser.setFocus(this.curSel_.start.node,!0):cvox.Focuser.setFocus(this.curSel_.start.node))};
cvox.NavigationManager.prototype.getCurrentNode=function(){return this.curSel_.absStart().node};
cvox.NavigationManager.prototype.addInterframeListener_=function(){var a=this;cvox.Interframe.addListener(function(b){if(!("enterIframe"!=b.command&&"exitIframe"!=b.command)){window.focus();cvox.ChromeVox.serializer.readFrom(b);if("exitIframe"==b.command){b=b.sourceId;if(b=a.iframeIdMap[b]){var c=a.isReversed();a.updateSel(cvox.CursorSelection.fromNode(b));a.curSel_.setReversed(c)}a.sync();a.navigate()}else if(a.syncToPageBeginning(),!cvox.DomUtil.hasContent(document.body)){a.tryIframe_(null);return}a.setFocus();
a.updateIndicator();a.speakDescriptionArray(a.getDescription(),cvox.AbstractTts.QUEUE_MODE_FLUSH,null)}})};cvox.NavigationManager.prototype.tryEnterTable=function(a){if(a=this.navShifter_.tryEnterTable(this.curSel_,a))this.curSel_=a};
cvox.NavigationManager.prototype.tryExitTable=function(){var a=this.isReversed();this.navShifter_.ensureNotTableMode();this.bumpedEdge_=!1;if(this.navShifter_.isInTable(this.curSel_)){var b=cvox.DomUtil.getContainingTable(this.curSel_.start.node);if(b){do b=cvox.DomUtil.directedNextLeafNode(b,a);while(b&&!cvox.DomUtil.hasContent(b));(b=cvox.CursorSelection.fromNode(b))&&b.setReversed(a);this.tryBoundaries_(b,!0);this.sync()}}};cvox.NavigationManager.prototype.getFilteredWalker=function(){return this.navShifter_.filteredWalker};
cvox.NavigationManager.prototype.updateIndicator=function(){this.activeIndicator.syncToCursorSelection(this.curSel_)};cvox.NavigationManager.prototype.showOrHideIndicator=function(a){a||this.activeIndicator.removeFromDom()};cvox.NavigationManager.prototype.collapseSelection=function(){this.curSel_.collapse()};
cvox.NavigationManager.prototype.updateSelToArbitraryNode=function(a,b){a?(this.setGranularity(cvox.NavigationShifter.GRANULARITIES.OBJECT),this.updateSel(cvox.CursorSelection.fromNode(a)),b||this.sync()):this.syncToPageBeginning()};cvox.NavigationManager.prototype.updateSel=function(a,b){a&&(this.prevSel_=b||this.curSel_,this.curSel_=a);var c=this.getCurrentNode();this.navigationHistory_.update(c);return!!a};cvox.NavigationManager.prototype.setReversed=function(a){this.curSel_.setReversed(a)};
cvox.NavigationManager.prototype.isReversed=function(){return this.curSel_.isReversed()};cvox.NavigationManager.prototype.tryBoundaries_=function(a,b){b=!!b&&!this.ignoreIframesNoMatterWhat_||!1;this.pageEnd_=!1;if(b&&this.tryIframe_(a&&a.start.node))return!0;if(this.tryTable_(a)||this.tryMath_(a))return this.tryEnterMath(),!0;this.syncToPageBeginning();this.pageEnd_=!0;return!1};
cvox.NavigationManager.prototype.tryIframe_=function(a){if(null==a&&cvox.Interframe.isIframe()){var b={command:"exitIframe"};cvox.ChromeVox.serializer.storeOn(b);cvox.Interframe.sendMessageToParentWindow(b);return!0}if(null==a||"IFRAME"!=a.tagName||!a.src)return!1;var c=void 0;for(b in this.iframeIdMap)if(this.iframeIdMap[b]==a){c=b;break}void 0==c&&(c=this.nextIframeId,this.nextIframeId++,this.iframeIdMap[c]=a,cvox.Interframe.sendIdToIFrame(c,a));b={command:"enterIframe",id:c};cvox.ChromeVox.serializer.storeOn(b);
cvox.Interframe.sendMessageToIFrame(b,a);return!0};cvox.NavigationManager.prototype.tryTable_=function(a,b){if(this.isTableMode()){if(a)return this.updateSel(a),this.bumpedEdge_=!1,!0;this.tryExitTable()}else{if(!a)return!1;this.updateSel(a);b?this.tryEnterTable({fromTop:!0}):this.tryEnterTable()}return!0};cvox.NavigationManager.prototype.syncToPageBeginning=function(){var a=this.navShifter_.syncToPageBeginning({reversed:this.curSel_.isReversed()});this.tryIframe_(a&&a.start.node)||this.tryTable_(a)};
cvox.NavigationManager.prototype.isMathMode=function(){return this.navShifter_.isMathMode()};cvox.NavigationManager.prototype.cycleDomain=function(){this.navShifter_.cycleDomain()};cvox.NavigationManager.prototype.cycleTraversalMode=function(){this.navShifter_.cycleTraversalMode()};cvox.NavigationManager.prototype.toggleExplore=function(){return this.isMathMode()?(this.navShifter_.toggleExplore(),this.sync(),!0):!1};cvox.NavigationManager.prototype.getDomainMsg=function(){return this.navShifter_.getDomainMsg()};
cvox.NavigationManager.prototype.getTraversalModeMsg=function(){return this.navShifter_.getTraversalModeMsg()};cvox.NavigationManager.prototype.tryEnterMath=function(){var a=this.navShifter_.tryEnterMath(this.curSel_);a&&(this.curSel_=a)};cvox.NavigationManager.prototype.tryExitMath=function(){var a=this.navShifter_.tryExitMath(this.curSel_,this.isReversed());this.tryBoundaries_(a,!0);this.sync()};
cvox.NavigationManager.prototype.tryMath_=function(a){if(this.isMathMode()){if(a)return this.updateSel(a),!0;this.tryExitMath()}else{if(!a)return!1;this.updateSel(a);this.tryEnterMath()}return!0};cvox.SearchWidget=function(){this.txtNode_=this.containerNode_=null;this.PROMPT_="Search:";this.hasMatch_=this.caseSensitive_=!1;cvox.Widget.call(this)};goog.inherits(cvox.SearchWidget,cvox.Widget);goog.addSingletonGetter(cvox.SearchWidget);
cvox.SearchWidget.prototype.show=function(){cvox.SearchWidget.superClass_.show.call(this);this.active=!0;this.hasMatch_=!1;cvox.ChromeVox.navigationManager.setGranularity(cvox.NavigationShifter.GRANULARITIES.OBJECT);this.focusRecovery_=cvox.ChromeVox.navigationManager.getFocusRecovery();cvox.ChromeVox.navigationManager.setFocusRecovery(!1);var a=this.createContainerNode_();this.containerNode_=a;var b=this.createOverlayNode_();a.appendChild(b);var c=document.createElement("span");c.innerHTML=this.PROMPT_;
b.appendChild(c);this.txtNode_=document.createElement("span");b.appendChild(this.txtNode_);document.body.appendChild(a);window.setTimeout(function(){a.style.opacity="1.0"},0)};
cvox.SearchWidget.prototype.hide=function(a){if(this.isActive()){var b=this.containerNode_;b.style.opacity="0.0";window.setTimeout(function(){document.body.removeChild(b)},1E3);this.txtNode_=null;cvox.SearchWidget.containerNode=null;cvox.ChromeVox.navigationManager.setFocusRecovery(this.focusRecovery_);this.active=!1}cvox.$m("choice_widget_exited").andPause().andMessage(this.getNameMsg()).speakFlush();(!this.hasMatch_||!a)&&cvox.ChromeVox.navigationManager.updateSelToArbitraryNode(this.initialNode);
cvox.ChromeVoxEventSuspender.withSuspendedEvents(goog.bind(cvox.ChromeVox.navigationManager.syncAll,cvox.ChromeVox.navigationManager))(!0);cvox.ChromeVox.navigationManager.speakDescriptionArray(cvox.ChromeVox.navigationManager.getDescription(),cvox.AbstractTts.QUEUE_MODE_QUEUE,null);cvox.SearchWidget.superClass_.hide.call(this,!0)};cvox.SearchWidget.prototype.getNameMsg=function(){return["search_widget_intro"]};cvox.SearchWidget.prototype.getHelpMsg=function(){return"search_widget_intro_help"};
cvox.SearchWidget.prototype.onKeyDown=function(a){if(!this.isActive())return!1;var b=this.txtNode_.textContent;if(8==a.keyCode)0<b.length?(b=b.substring(0,b.length-1),this.txtNode_.textContent=b,this.beginSearch_(b)):(cvox.ChromeVox.navigationManager.updateSelToArbitraryNode(this.initialNode),cvox.ChromeVox.navigationManager.syncAll());else if(40==a.keyCode)this.next_(b,!1);else if(38==a.keyCode)this.next_(b,!0);else if(13==a.keyCode)this.hide(!0);else if(27==a.keyCode)this.hide(!1);else if(a.ctrlKey&&
67==a.keyCode)this.toggleCaseSensitivity_();else return cvox.SearchWidget.superClass_.onKeyDown.call(this,a);a.preventDefault();a.stopPropagation();return!0};cvox.SearchWidget.prototype.onKeyPress=function(a){if(!this.isActive())return!1;this.txtNode_.textContent+=String.fromCharCode(a.charCode);var b=this.txtNode_.textContent;this.beginSearch_(b);a.preventDefault();a.stopPropagation();return!0};cvox.SearchWidget.prototype.getPredicate=function(){return null};
cvox.SearchWidget.prototype.createContainerNode_=function(){var a=document.createElement("div");a.style.position="fixed";a.style.top="50%";a.style.left="50%";a.style["-webkit-transition"]="all 0.3s ease-in";a.style.opacity="0.0";a.style["z-index"]="2147483647";a.setAttribute("aria-hidden","true");return a};
cvox.SearchWidget.prototype.createOverlayNode_=function(){var a=document.createElement("div");a.style.position="relative";a.style.left="-50%";a.style.top="-40px";a.style["line-height"]="1.2em";a.style["font-size"]="20px";a.style.padding="30px";a.style["min-width"]="150px";a.style.color="#fff";a.style["background-color"]="rgba(0, 0, 0, 0.7)";a.style["border-radius"]="10px";return a};
cvox.SearchWidget.prototype.toggleCaseSensitivity_=function(){this.caseSensitive_?(cvox.SearchWidget.caseSensitive_=!1,cvox.ChromeVox.tts.speak("Ignoring case.",0,null)):(this.caseSensitive_=!0,cvox.ChromeVox.tts.speak("Case sensitive.",0,null))};
cvox.SearchWidget.prototype.getNextResult_=function(a){var b=cvox.ChromeVox.navigationManager.isReversed();this.caseSensitive_||(a=a.toLowerCase());cvox.ChromeVox.navigationManager.setGranularity(cvox.NavigationShifter.GRANULARITIES.OBJECT);do{if(this.getPredicate()){var c=this.getPredicate()(cvox.DomUtil.getAncestors(cvox.ChromeVox.navigationManager.getCurrentNode()));if(!c)continue}for(var c=cvox.ChromeVox.navigationManager.getDescription(),d=0;d<c.length;d++){var e=this.caseSensitive_?c[d].text:
c[d].text.toLowerCase(),f=e.indexOf(a);-1!=f&&e.length>a.length&&(c[d].text=cvox.DomUtil.collapseWhitespace(e.substring(0,f))+", "+a+", "+e.substring(f+a.length),c[d].text=cvox.DomUtil.collapseWhitespace(c[d].text));if(-1!=f)return c}cvox.ChromeVox.navigationManager.setReversed(b)}while(cvox.ChromeVox.navigationManager.navigate(!0,cvox.NavigationShifter.GRANULARITIES.OBJECT))};cvox.SearchWidget.prototype.beginSearch_=function(a){a=this.getNextResult_(a);this.outputSearchResult_(a)};
cvox.SearchWidget.prototype.next_=function(a,b){cvox.ChromeVox.navigationManager.setReversed(!!b);var c=!1;this.getPredicate()?(c=cvox.ChromeVox.navigationManager.findNext(this.getPredicate()),cvox.ChromeVox.navigationManager.setReversed(!!b),c||(cvox.ChromeVox.navigationManager.syncToPageBeginning(),cvox.ChromeVox.earcons.playEarcon(cvox.AbstractEarcons.WRAP),c=!0)):c=cvox.ChromeVox.navigationManager.navigate(!0);c=c?this.getNextResult_(a):null;this.outputSearchResult_(c);return c};
cvox.SearchWidget.prototype.outputSearchResult_=function(a){cvox.ChromeVox.tts.stop();a?(this.hasMatch_=!0,cvox.ChromeVoxEventSuspender.withSuspendedEvents(goog.bind(cvox.ChromeVox.navigationManager.syncAll,cvox.ChromeVox.navigationManager))(!0),cvox.ChromeVox.navigationManager.speakDescriptionArray(a,cvox.AbstractTts.QUEUE_MODE_FLUSH,null),cvox.ChromeVox.tts.speak(cvox.ChromeVox.msgs.getMsg("search_help_item"),cvox.AbstractTts.QUEUE_MODE_QUEUE,cvox.AbstractTts.PERSONALITY_ANNOTATION)):(cvox.ChromeVox.earcons.playEarcon(cvox.AbstractEarcons.WRAP),
this.hasMatch_=!1)};cvox.NodeSearchWidget=function(a,b){this.typeMsg_=a;this.predicate_=b;cvox.SearchWidget.call(this)};goog.inherits(cvox.NodeSearchWidget,cvox.SearchWidget);cvox.NodeSearchWidget.prototype.getNameMsg=function(){return["choice_widget_name",[cvox.ChromeVox.msgs.getMsg(this.typeMsg_)]]};cvox.NodeSearchWidget.prototype.getHelpMsg=function(){return"choice_widget_help"};cvox.NodeSearchWidget.prototype.getPredicate=function(){return this.predicate_};
cvox.NodeSearchWidget.create=function(a,b){return new cvox.NodeSearchWidget(a,b)};cvox.CssSpace={};cvox.CssSpace.currentGroup_=0;cvox.CssSpace.currentGroupItem_=0;cvox.CssSpace.groups=[];cvox.CssSpace.rgbPattern=/^rgb[a]?\((\d+),\s*(\d+),\s*(\d+),?\s?(\d+)?/;cvox.CssSpace.HEADER_TAG_LIST="H1 H2 H3 H4 H5 H6".split(" ");
cvox.CssSpace.initializeSpace=function(a){if(!(0<cvox.CssSpace.groups.length)){cvox.CssSpace.dimensions=a||[{name:"deltaX",threshold:50,distance:cvox.CssSpace.getDeltaX},{name:"deltaY",threshold:10,distance:cvox.CssSpace.getDeltaY},{name:"commonAncestry",threshold:0.5,distance:cvox.CssSpace.getCommonAncestry},{name:"breakingTags",threshold:1,distance:cvox.CssSpace.getBreakingTags}];a=[];cvox.CssSpace.getFlattenedSubtree(document.body,a);for(var b=0;b<a.length;++b){a[b]["cvox-runtime-id"]=b;var c=
a[b],d=a[b+1];d||(d=c,c=a[b-1]);if(-1==cvox.CssSpace.getDistance(c,d,!0)){if(!c["cvox-group"]){var e=[c];c["cvox-group"]=e;cvox.CssSpace.groups.push(e)}d["cvox-group"]||(e=[d],d["cvox-group"]=e,cvox.CssSpace.groups.push(e))}else if(!c["cvox-group"]||!d["cvox-group"])c["cvox-group"]?(c["cvox-group"].push(d),d["cvox-group"]=c["cvox-group"]):!c["cvox-group"]&&!d["cvox-group"]&&(e=[],e.push(c),e.push(d),c["cvox-group"]=e,d["cvox-group"]=e,cvox.CssSpace.groups.push(e))}if(!(10>=cvox.CssSpace.groups.length)){a=
[];for(b=0;b<cvox.CssSpace.groups.length;++b)a.push(cvox.CssSpace.groups[b].length);a.sort(function(a,b){return a-b});b=a.length;b=Math.floor(b/2);if(0==cvox.CssSpace.groups.length||1>=a[b]){cvox.CssSpace.uninitializeSpace();for(a=0;2>a;++a)cvox.CssSpace.dimensions[a].threshold+=4*cvox.CssSpace.dimensions[a].threshold;cvox.CssSpace.initializeSpace(cvox.CssSpace.dimensions)}}}};
cvox.CssSpace.uninitializeSpace=function(){for(var a=0;a<cvox.CssSpace.groups.length;++a)for(var b=0;b<cvox.CssSpace.groups[a].length;++b)delete cvox.CssSpace.groups[a][b]["cvox-group"];cvox.CssSpace.groups=[];cvox.CssSpace.currentGroup_=0;cvox.CssSpace.currentGroupItem_=0};
cvox.CssSpace.getFlattenedSubtree=function(a,b){if(!(0>a.getBoundingClientRect().left||0>a.getBoundingClientRect().top))if(("P"==a.tagName||cvox.GroupUtil.isLeafNode(a))&&cvox.DomUtil.hasContent(a))b.push(a);else if(0==a.childElementCount&&cvox.DomUtil.hasContent(a))b.push(a);else for(var c=0;c<a.children.length;++c)cvox.CssSpace.getFlattenedSubtree(a.children[c],b)};
cvox.CssSpace.getDistance=function(a,b,c){for(var d=[],e=0;e<cvox.CssSpace.dimensions.length;++e){var f=cvox.CssSpace.dimensions[e],g=f.distance(a,b);if((g>f.threshold||0>g)&&c)return-1;d.push(g)}for(b=a=0;b<d.length;++b)a+=d[b]*d[b];return a};cvox.CssSpace.getDeltaX=function(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e=Math.abs(c.right-d.left),f=Math.abs(d.right-c.left),g=Math.abs(c.left-d.left),c=Math.abs(c.right-d.right);return Math.min(e,f,g,c)};
cvox.CssSpace.getDeltaY=function(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e=Math.abs(c.bottom-d.top),f=Math.abs(d.bottom-c.top),g=Math.abs(c.top-d.top),c=Math.abs(c.bottom-d.bottom);-1!=cvox.CssSpace.HEADER_TAG_LIST.indexOf(a.tagName)&&(e/=5,f/=5,g/=5,c/=5);return Math.min(e,f,g,c)};
cvox.CssSpace.getCommonAncestry=function(a,b){for(var c=a,d=0;c!=document.documentElement;)c["cvox-mark"]=!0,++d,c=c.parentNode;for(var e=b,f=0,g=-1;e!=document.documentElement&&f<=d;){if(e["cvox-mark"]){g=f;break}++f;e=e.parentNode}for(;c;)c["cvox-mark"]=!1,c=c.parentNode;return g/d};
cvox.CssSpace.getBackgroundColorDelta=function(a,b){for(var c=null,d=null,e=cvox.CssSpace.rgbPattern,f=0;a;){f=cvox.CssSpace.getCachedComputedStyle(a);if(!f)break;c=e.exec(f.getPropertyValue("background-color"));f=5==c.length?c[4]:-1;if(0!=f)break;a=a.parentNode}for(;b;){f=cvox.CssSpace.getCachedComputedStyle(b);if(!f)break;d=e.exec(f.getPropertyValue("background-color"));f=5==d.length?d[4]:-1;if(0!=f)break;b=b.parentNode}if(c&&d&&4<=c.length&&4<=d.length){var g=f=e=0,e=Math.abs(parseInt(c[1],10)-
parseInt(d[1],10)),f=Math.abs(parseInt(c[2],10)-parseInt(d[2],10)),g=Math.abs(parseInt(c[3],10)-parseInt(d[3],10));return e+f+g}return-1};cvox.CssSpace.getBreakingTags=function(a,b){return cvox.CssSpace.isBreakingTag(b)&&!cvox.CssSpace.isBreakingTag(a)?-1:0};cvox.CssSpace.isBreakingTag=function(a){return-1!=cvox.CssSpace.HEADER_TAG_LIST.indexOf(a.tagName)||"TR"==a.tagName?!0:!1};
cvox.CssSpace.getFontSizeDelta=function(a,b){var c=cvox.CssSpace.getCachedComputedStyle(a),d=cvox.CssSpace.getCachedComputedStyle(b),c=c.getPropertyValue("font-size"),d=d.getPropertyValue("font-size");return null!=c&&null!=d?Math.abs(c.slice(0,-2)-d.slice(0,-2)):-1};cvox.CssSpace.getCachedComputedStyle=function(a){a["cvox-cache-style"]||(a["cvox-cached-style"]=window.getComputedStyle(a,""));return a["cvox-cached-style"]};
cvox.CssSpace.postProcessOrphans=function(a){for(var b=0,c=0;c<a.length;++c)if(a[c]["cvox-group"])b=cvox.CssSpace.groups.indexOf(a[c]["cvox-group"]);else{cvox.CssSpace.isBreakingTag(a[c])&&(b=b<cvox.CssSpace.groups.length-1?b+1:b);var d=b<cvox.CssSpace.groups.length-1?b+1:b,e=cvox.CssSpace.groups[b][0],f=cvox.CssSpace.groups[d][0];cvox.CssSpace.getDistance(a[c],e,!1)>cvox.CssSpace.getDistance(a[c],f,!1)&&(b=d);cvox.CssSpace.groups[b].push(a[c]);a[c]["cvox-group"]=cvox.CssSpace.groups[b]}};
cvox.CssSpace.postProcessUnpackGroups=function(){for(var a=0;a<cvox.CssSpace.groups.length;++a)cvox.CssSpace.unpackGroup_(cvox.CssSpace.groups[a])};cvox.CssSpace.unpackGroup_=function(a){for(var b=0;b<a.length;++b){var c=[];cvox.CssSpace.unpack_(a[b],c);0<c.length&&Array.prototype.splice.apply(a,[b,1].concat(c))}};
cvox.CssSpace.unpack_=function(a,b){if(cvox.DomUtil.isLeafNode(a)||"TH"==a.tagName||"TR"==a.tagName||"LI"==a.tagName||"A"==a.tagName||"P"==a.tagName)b.push(a);else for(var c=0;c<a.children.length;++c)cvox.CssSpace.unpack_(a.children[c],b)};cvox.CssSpace.enterExploration=function(){cvox.$m("enter_group_exploration").speakFlush();window.addEventListener("keydown",cvox.CssSpace.handleGroupExploration,!0)};
cvox.CssSpace.exitExploration=function(){window.removeEventListener("keydown",cvox.CssSpace.handleGroupExploration,!0)};
cvox.CssSpace.handleGroupExploration=function(a){var b=!1,c=!1,d=cvox.CssSpace.groups;if(0==d.length)return!0;switch(a.keyCode){case 38:b=!0;cvox.CssSpace.currentGroupItem_=0;cvox.CssSpace.currentGroup_=0<cvox.CssSpace.currentGroup_?cvox.CssSpace.currentGroup_-1:0;break;case 37:c=!0;cvox.CssSpace.currentGroupItem_=cvox.CssSpace.currentGroupItem_?cvox.CssSpace.currentGroupItem_-1:0;b=!1;break;case 40:b=!0;cvox.CssSpace.currentGroupItem_=0;cvox.CssSpace.currentGroup_=cvox.CssSpace.currentGroup_<d.length-
1?cvox.CssSpace.currentGroup_+1:d.length-1;break;case 39:c=!0;cvox.CssSpace.currentGroupItem_=cvox.CssSpace.currentGroupItem_==d[cvox.CssSpace.currentGroup_].length-1?cvox.CssSpace.currentGroupItem_:cvox.CssSpace.currentGroupItem_+1;b=!1;break;default:return cvox.CssSpace.exitExploration(),!0}cvox.ChromeVox.syncToNode(d[cvox.CssSpace.currentGroup_][cvox.CssSpace.currentGroupItem_],!1);if(b){cvox.ChromeVox.tts.stop();b=[];for(c=0;c<d[cvox.CssSpace.currentGroup_].length&&20>c;++c)b.push(d[cvox.CssSpace.currentGroup_][c]),
d[cvox.CssSpace.currentGroup_][c]&&cvox.DescriptionUtil.getControlDescription(d[cvox.CssSpace.currentGroup_][c]).speak(cvox.AbstractTts.QUEUE_MODE_QUEUE);cvox.ChromeVox.navigationManager.activeIndicator.syncToNodes(d[cvox.CssSpace.currentGroup_]);cvox.SpokenMessages.andIndexTotal(cvox.CssSpace.currentGroup_+1,cvox.CssSpace.groups.length).speakQueued();a.preventDefault();a.stopPropagation()}else c&&(a=d[cvox.CssSpace.currentGroup_][cvox.CssSpace.currentGroupItem_],cvox.ChromeVox.tts.stop(),cvox.DescriptionUtil.getControlDescription(a).speak(cvox.AbstractTts.QUEUE_MODE_FLUSH));
return!1};cvox.FocusUtil=function(){};cvox.FocusUtil.INPUT_TYPE_ACCEPTS_SELECTION_TABLE={hidden:!1,text:!0,search:!0,tel:!0,url:!0,email:!0,password:!0,datetime:!1,date:!1,month:!1,week:!1,time:!1,"datetime-local":!1,number:!1,range:!1,color:!1,checkbox:!1,radio:!1,file:!1,submit:!1,image:!1,reset:!1,button:!1};
cvox.FocusUtil.isFocusInTextInputField=function(){var a=document.activeElement;return!a?!1:a.isContentEditable||"textbox"==a.getAttribute("role")?!0:"true"==a.getAttribute("readOnly")?!1:"TEXTAREA"===a.tagName||"SELECT"===a.tagName?!0:"INPUT"===a.tagName?a.hasAttribute("type")?(a=a.getAttribute("type").toLowerCase(),cvox.FocusUtil.INPUT_TYPE_ACCEPTS_SELECTION_TABLE[a]):!0:!1};cvox.ConsoleTts=function(){this.enabled_=!1};goog.addSingletonGetter(cvox.ConsoleTts);cvox.ConsoleTts.prototype.speak=function(a,b,c){if(this.enabled_&&window.console){var d="Speak",d=b==cvox.AbstractTts.QUEUE_MODE_FLUSH?d+" (I)":d+" (Q)",d=d+(' "'+a+'"');window.console.log(d);c&&void 0!=c.startCallback&&window.console.log("  using startCallback");c&&void 0!=c.endCallback&&window.console.log("  using endCallback")}return this};cvox.ConsoleTts.prototype.isSpeaking=function(){return!1};
cvox.ConsoleTts.prototype.stop=function(){this.enabled_&&window.console.log("Stop")};cvox.ConsoleTts.prototype.increaseOrDecreaseProperty=function(){};cvox.ConsoleTts.prototype.setEnabled=function(a){this.enabled_=a};cvox.SpokenListBuilder=function(){this.list_=[]};cvox.SpokenListBuilder.prototype.flush=function(a){this.list_.push([a,cvox.AbstractTts.QUEUE_MODE_FLUSH]);return this};cvox.SpokenListBuilder.prototype.build=function(){return this.list_};cvox.RunnerInterface=function(){};cvox.RunnerInterface.prototype.assertTrue=function(){};cvox.RunnerInterface.prototype.assertEquals=function(){};cvox.RunnerInterface.prototype.assertSpoken=function(){};cvox.RunnerInterface.prototype.appendHtml=function(){};cvox.RunnerInterface.prototype.waitForCalm=function(){};cvox.RunnerInterface.prototype.setFocus=function(){};cvox.RunnerInterface.prototype.userCommand=function(){};cvox.AbstractTestCase=function(){};cvox.CompositeTts=function(){this.ttsEngines_=[]};cvox.CompositeTts.prototype.add=function(a){this.ttsEngines_.push(a);return this};cvox.CompositeTts.prototype.speak=function(a,b,c){this.ttsEngines_.forEach(function(d){d.speak(a,b,c)})};cvox.CompositeTts.prototype.isSpeaking=function(){return this.ttsEngines_.some(function(a){return a.isSpeaking()})};cvox.CompositeTts.prototype.stop=function(){this.ttsEngines_.forEach(function(a){a.stop()})};
cvox.CompositeTts.prototype.increaseOrDecreaseProperty=function(a,b){this.ttsEngines_.forEach(function(c){c.increaseOrDecreaseProperty(a,b)})};cvox.TestTts=function(){cvox.AbstractTts.call(this);this.utterances_=[]};goog.inherits(cvox.TestTts,cvox.AbstractTts);cvox.TestTts.prototype.sentinelText_="@@@STOP@@@";cvox.TestTts.prototype.speak=function(a,b,c){this.utterances_.push({text:a,queueMode:b});c&&void 0!=c.endCallback&&(a=this.utterances_.length,this.utterances_[a-1].text!=this.sentinelText_&&c.endCallback())};cvox.TestTts.prototype.clearUtterances=function(){this.utterances_.length=0};cvox.TestTts.prototype.getUtterancesAsString=function(){return cvox.DomUtil.collapseWhitespace(this.getUtteranceList().join(" "))};
cvox.TestTts.prototype.getUtteranceList=function(){for(var a=[],b=0;b<this.utterances_.length;b++)a.push(this.utterances_[b].text);return a};cvox.HostFactory.ttsConstructor=cvox.TestTts;cvox.AutoRunner=function(){this.actualCallbacks_=this.expectedCallbacks_=0;this.testTts_=new cvox.TestTts;this.oldTts_=cvox.ChromeVox.tts;this.testsQueue_=[];this.results_=[];this.currentTestSummary=null};cvox.AutoRunner.TestSummary=function(a,b,c,d){this.tag=a;this.func=b;this.status=c;this.scope=d};cvox.AutoRunner.PASS="pass";cvox.AutoRunner.FAIL="fail";
cvox.AutoRunner.prototype.maybeDone_=function(){this.actualCallbacks_==this.expectedCallbacks_&&(cvox.ChromeVox.tts=this.oldTts_,window.console.log(this.currentTestSummary.tag+" test ended with status: "+this.status),this.currentTestSummary.status=this.status,this.results_.push(this.currentTestSummary),this.currentTestSummary=null,this.runTests())};cvox.AutoRunner.prototype.assertTrue=function(a){if(!a)throw this.status=cvox.AutoRunner.FAIL,Error("assertTrue");};
cvox.AutoRunner.prototype.assertEquals=function(a,b){this.assertTrue(a==b)};cvox.AutoRunner.prototype.toHtml=function(a,b){var c=b.createDocumentFragment(),d=b.createElement("div");for(d.innerHTML=a;d.firstChild;)c.appendChild(d.firstChild);return 1<c.childNodes.length?c:c.firstChild};cvox.AutoRunner.prototype.appendHtml=function(a){a=this.toHtml(a,window.document);window.document.body.appendChild(a)};
cvox.AutoRunner.prototype.assertSpoken=function(a){var b=this.testTts_.getUtterancesAsString();window.console.log("assertSpoken: Expected: "+a+" Actual: "+b);this.assertEquals(a,b);this.testTts_.clearUtterances();return this};
cvox.AutoRunner.prototype.waitForCalm=function(a,b){if(!a)throw Error("waitForCalm needs a valid function");this.expectedCallbacks_++;var c=Array.prototype.slice.call(arguments,1);cvox.ChromeVoxEventWatcher.addReadyCallback(goog.bind(function(){var b=this.currentTestSummary?this.currentTestSummary.scope:this;try{a.apply(b,c)}catch(e){window.console.log(e,e.stack),this.status=cvox.AutoRunner.FAIL}finally{this.actualCallbacks_++,this.maybeDone_()}},this));return this};
cvox.AutoRunner.prototype.setFocus=function(a){document.getElementById(a).focus();return this};cvox.AutoRunner.prototype.userCommand=function(a){var b=cvox.History.getInstance();b.enterUserCommand(a);cvox.ChromeVoxUserCommands.commands[a]();b.exitUserCommand(a);return this};
cvox.AutoRunner.prototype.runTest_=function(a){this.status=cvox.AutoRunner.PASS;cvox.ChromeVox.tts=(new cvox.CompositeTts).add(this.oldTts_).add(this.testTts_);cvox.ChromeVox.navigationManager.reset();window.console.log("AutoRunner test start");var b=this.currentTestSummary?this.currentTestSummary.scope:this;try{a.apply(b)}catch(c){window.console.log(c,c.stack),this.status=cvox.AutoRunner.FAIL}finally{this.maybeDone_()}};
cvox.AutoRunner.prototype.runTests=function(){this.actualCallbacks_==this.expectedCallbacks_&&(1>this.testsQueue_.length?this.displayResults():(this.testTts_.clearUtterances(),document.body.innerHTML="",this.currentTestSummary=this.testsQueue_.shift(),this.runTest_(this.currentTestSummary.func)))};
cvox.AutoRunner.prototype.displayResults=function(){document.body.innerHTML="<h1>Tests Done</h1><br>";for(var a=0,b;b=this.results_[a];a++)document.body.innerHTML=document.body.innerHTML+b.tag+": "+b.status+"<br>"};cvox.AutoRunner.prototype.run=function(){(new cvox.ChoiceWidget(["runRadioButtonAnnouncements","runNextGranularity","runBackForwardTest"],[goog.bind(this.runTest_,this,runRadioButtonAnnouncements),goog.bind(this.runTest_,this,runNextGranularity),goog.bind(this.runTest_,this,runBackForwardTest)])).show()};
var runNextGranularity=function(){this.appendHtml("<div><a href='#' id='next-granularity-start'>First sentence.</a><a href='#' id='ng-second'>Second sentence.</a></div>");this.setFocus("next-granularity-start").waitForCalm(this.assertSpoken,"First sentence. Internal link");this.waitForCalm(this.userCommand,"nextGranularity").waitForCalm(this.assertSpoken,"Sentence First sentence. Internal link").waitForCalm(this.userCommand,"nextGranularity").waitForCalm(this.assertSpoken,"Word First Internal link")},
runRadioButtonAnnouncements=function(){function a(a){var c=document.createEvent("KeyboardEvent");c.initKeyboardEvent("keydown",!0,!0,window,a,0,!1,!1,!1,!1);document.activeElement.dispatchEvent(c)}this.appendHtml("<input id='radio1' type='radio' aria-label='green' tabindex=0><input id='radio2' type='radio' aria-label='blue' tabindex=0>");this.setFocus("radio1");this.waitForCalm(this.assertSpoken,"green Radio button unselected").waitForCalm(a,"Right").waitForCalm(this.assertSpoken,"blue Radio button selected").waitForCalm(a,
"Right").waitForCalm(this.assertSpoken,"");this.waitForCalm(a,"Left").waitForCalm(this.assertSpoken,"green Radio button selected").waitForCalm(a,"Left").waitForCalm(this.assertSpoken,"")},runBackForwardTest=function(){this.waitForCalm(this.userCommand,"forward");var a,b,c,d,e=function(){a=cvox.NodeBreadcrumb.getCurrentNodeTag();this.assertTrue(-1!=a);this.waitForCalm(this.userCommand,"forward").waitForCalm(function(){b=cvox.NodeBreadcrumb.getCurrentNodeTag();this.assertTrue(-1!=b)}).waitForCalm(this.userCommand,
"backward").waitForCalm(function(){c=cvox.NodeBreadcrumb.getCurrentNodeTag();this.assertTrue(-1!=c)}).waitForCalm(this.userCommand,"forward").waitForCalm(function(){d=cvox.NodeBreadcrumb.getCurrentNodeTag();this.assertTrue(-1!=d)}).waitForCalm(function(){window.console.log("A: "+a+" B: "+b+" C: "+c+" D: "+d);this.assertEquals(a,c);this.assertEquals(b,d);var f;for(f=cvox.ChromeVox.navigationManager.getCurrentNode();f&&!f.hasAttribute;)f=f.parentNode;f=f&&f.hasAttribute("class")?"cvoxHistoryEvent"==
f.getAttribute("class"):!1;f||e.apply(this)})};this.waitForCalm(e)};cvox.ChromeVoxUserCommands={};
cvox.ChromeVoxUserCommands.CMD_WHITELIST_={forward:{forward:!0,announce:!0},backward:{backward:!0,announce:!0},right:{forward:!0,announce:!0},left:{backward:!0,announce:!0},skipForward:{forward:!0,announce:!1},skipBackward:{backward:!0,announce:!1},previousGranularity:{announce:!0},nextGranularity:{announce:!0},previousCharacter:{backward:!0,announce:!0,skipInput:!0},nextCharacter:{forward:!0,announce:!0,skipInput:!0},previousWord:{backward:!0,announce:!0,skipInput:!0},nextWord:{forward:!0,announce:!0,
skipInput:!0},previousLine:{backward:!0,announce:!0},nextLine:{forward:!0,announce:!0},previousSentence:{backward:!0,announce:!0,skipInput:!0},nextSentence:{forward:!0,announce:!0,skipInput:!0},previousObject:{backward:!0,announce:!0},nextObject:{forward:!0,announce:!0},previousGroup:{backward:!0,announce:!0,skipInput:!0},nextGroup:{forward:!0,announce:!0,skipInput:!0},jumpToTop:{forward:!0,announce:!0},jumpToBottom:{backward:!0,announce:!0},moveToStartOfLine:{forward:!0,announce:!0},moveToEndOfLine:{backward:!0,
announce:!0},readFromHere:{forward:!0,announce:!1},stopSpeech:{announce:!1,doDefault:!0},toggleKeyboardHelp:{announce:!1},nextTtsEngine:{announce:!1},help:{announce:!1},showBookmarkManager:{announce:!1},showOptionsPage:{announce:!1},showKbExplorerPage:{announce:!1},readLinkURL:{announce:!1},readCurrentTitle:{announce:!1},readCurrentURL:{announce:!1},announceHeaders:{announce:!1},speakTableLocation:{announce:!1},actOnCurrentItem:{announce:!1},forceClickOnCurrentItem:{announce:!1},toggleChromeVox:{announce:!1,
platformFilter:cvox.PlatformFilter.WML},fullyDescribe:{announce:!1},toggleSelection:{announce:!0},filterLikeCurrentItem:{announce:!1},startHistoryRecording:{announce:!1},stopHistoryRecording:{announce:!1},enterCssSpace:{announce:!1},enableConsoleTts:{announce:!1},autorunner:{announce:!1},skipToBeginning:{announce:!0},skipToEnd:{announce:!0},skipToRowBeginning:{announce:!0},skipToRowEnd:{announce:!0},skipToColBeginning:{announce:!0},skipToColEnd:{announce:!0},cycleDomain:{announce:!0},cycleTraversalMode:{announce:!0},
toggleExplore:{announce:!0},decreaseTtsRate:{announce:!1},increaseTtsRate:{announce:!1},decreaseTtsPitch:{announce:!1},increaseTtsPitch:{announce:!1},decreaseTtsVolume:{announce:!1},increaseTtsVolume:{announce:!1},cyclePunctuationLevel:{announce:!1},toggleTable:{announce:!0},toggleStickyMode:{announce:!1},toggleKeyPrefix:{announce:!1},toggleSearchWidget:{announce:!1},toggleLens:{announce:!1},floatLens:{announce:!1},anchorLens:{announce:!1},showHeadingsList:{announce:!1,nodeList:"heading"},showLinksList:{announce:!1,
nodeList:"link"},showFormsList:{announce:!1,nodeList:"formField"},showTablesList:{announce:!1,nodeList:"table"},showLandmarksList:{announce:!1,nodeList:"landmark"},nextCheckbox:{forward:!0,findNext:"checkbox"},previousCheckbox:{backward:!0,findNext:"checkbox"},nextRadio:{forward:!0,findNext:"radio"},previousRadio:{backward:!0,findNext:"radio"},nextSlider:{forward:!0,findNext:"slider"},previousSlider:{backward:!0,findNext:"slider"},nextGraphic:{forward:!0,findNext:"graphic"},previousGraphic:{backward:!0,
findNext:"graphic"},nextButton:{forward:!0,findNext:"button"},previousButton:{backward:!0,findNext:"button"},nextComboBox:{forward:!0,findNext:"combobox"},previousComboBox:{backward:!0,findNext:"combobox"},nextEditText:{forward:!0,findNext:"editText"},previousEditText:{backward:!0,findNext:"editText"},nextHeading:{forward:!0,findNext:"heading"},previousHeading:{backward:!0,findNext:"heading"},nextHeading1:{forward:!0,findNext:"heading1"},previousHeading1:{backward:!0,findNext:"heading1"},nextHeading2:{forward:!0,
findNext:"heading2"},previousHeading2:{backward:!0,findNext:"heading2"},nextHeading3:{forward:!0,findNext:"heading3"},previousHeading3:{backward:!0,findNext:"heading3"},nextHeading4:{forward:!0,findNext:"heading4"},previousHeading4:{backward:!0,findNext:"heading4"},nextHeading5:{forward:!0,findNext:"heading5"},previousHeading5:{backward:!0,findNext:"heading5"},nextHeading6:{forward:!0,findNext:"heading6"},previousHeading6:{backward:!0,findNext:"heading6"},nextLink:{forward:!0,findNext:"link"},previousLink:{backward:!0,
findNext:"link"},nextTable:{forward:!0,findNext:"table"},previousTable:{backward:!0,findNext:"table"},nextList:{forward:!0,findNext:"list"},previousList:{backward:!0,findNext:"list"},nextListItem:{forward:!0,findNext:"listItem"},previousListItem:{backward:!0,findNext:"listItem"},nextFormField:{forward:!0,findNext:"formField"},previousFormField:{backward:!0,findNext:"formField"},nextLandmark:{forward:!0,findNext:"landmark"},previousLandmark:{backward:!0,findNext:"landmark"},debug:{announce:!1},nop:{announce:!1}};
cvox.ChromeVoxUserCommands.init_=function(){if(!cvox.ChromeVoxUserCommands.commands){cvox.ChromeVoxUserCommands.commands={};for(var a in cvox.ChromeVoxUserCommands.CMD_WHITELIST_)cvox.ChromeVoxUserCommands.commands[a]=cvox.ChromeVoxUserCommands.createCommand_(a);cvox.ChromeVoxUserCommands.commands.handleTab=function(){return cvox.ChromeVoxUserCommands.handleTabAction_()};cvox.ChromeVoxUserCommands.commands.handleTabPrev=function(){return cvox.ChromeVoxUserCommands.handleTabAction_()}}};
cvox.ChromeVoxUserCommands.wasMouseClicked=!1;cvox.ChromeVoxUserCommands.finishNavCommand=function(a){cvox.ChromeVox.navigationManager.finishNavCommand(a)};cvox.ChromeVoxUserCommands.findNextAndSpeak_=function(a,b){cvox.ChromeVox.entireDocumentIsHidden||(cvox.ChromeVox.navigationManager.findNext(a)?cvox.ChromeVoxUserCommands.finishNavCommand(""):cvox.ChromeVox.tts.speak(b,0,cvox.AbstractTts.PERSONALITY_ANNOTATION))};
cvox.ChromeVoxUserCommands.handleTabAction_=function(){cvox.ChromeVox.tts.stop();if(!cvox.ChromeVox.navigationManager.resolve(cvox.DomUtil.isFocusable))return cvox.ChromeVox.navigationManager.setFocus(),!1;var a=cvox.ChromeVoxUserCommands.isFocusedOnLinkControl_();if(a)return!0;var b=a=null,b=window.getSelection();cvox.ChromeVoxUserCommands.wasMouseClicked?cvox.ChromeVoxUserCommands.wasMouseClicked=!1:b=null;null==b||null==b.anchorNode||null==b.focusNode?(a=cvox.ChromeVox.navigationManager.getCurrentNode(),
b=cvox.ChromeVox.navigationManager.getCurrentNode()):(a=b.anchorNode,b=b.focusNode);if(null==a||null==b)return!0;if(cvox.DomUtil.isFocusable(a))return a.focus(),!0;if(cvox.DomUtil.isFocusable(b))return b.focus(),!0;if(cvox.DomUtil.isFocusable(a.parentNode))return a.parentNode.focus(),!0;if(cvox.DomUtil.isFocusable(b.parentNode))return b.parentNode.focus(),!0;b=cvox.ChromeVoxUserCommands.createTabDummySpan_();a.parentNode.insertBefore(b,a);b.focus();return!0};
cvox.ChromeVoxUserCommands.isFocusedOnLinkControl_=function(){var a="A";return document.activeElement.tagName==a||cvox.DomUtil.isControl(document.activeElement)?!0:!1};cvox.ChromeVoxUserCommands.removeTabDummySpan=function(){var a=document.getElementById("ChromeVoxTabDummySpan");a&&document.activeElement!=a&&a.parentNode.removeChild(a)};cvox.ChromeVoxUserCommands.createTabDummySpan_=function(){var a=document.createElement("span");a.id="ChromeVoxTabDummySpan";a.tabIndex=-1;return a};
cvox.ChromeVoxUserCommands.NODE_INFO_MAP_={checkbox:{predicate:"checkboxPredicate",forwardError:"no_next_checkbox",backwardError:"no_previous_checkbox",typeMsg:"aria_role_checkbox"},radio:{predicate:"radioPredicate",forwardError:"no_next_radio_button",backwardError:"no_previous_radio_button",typeMsg:"aria_role_radio"},slider:{predicate:"sliderPredicate",forwardError:"no_next_slider",backwardError:"no_previous_slider",typeMsg:"aria_role_slider"},graphic:{predicate:"graphicPredicate",forwardError:"no_next_graphic",
backwardError:"no_previous_graphic",typeMsg:"UNUSED"},button:{predicate:"buttonPredicate",forwardError:"no_next_button",backwardError:"no_previous_button",typeMsg:"aria_role_button"},combobox:{predicate:"comboBoxPredicate",forwardError:"no_next_combo_box",backwardError:"no_previous_combo_box",typeMsg:"aria_role_combobox"},editText:{predicate:"editTextPredicate",forwardError:"no_next_edit_text",backwardError:"no_previous_edit_text",typeMsg:"input_type_text"},heading:{predicate:"headingPredicate",forwardError:"no_next_heading",
backwardError:"no_previous_heading",typeMsg:"aria_role_heading"},heading1:{predicate:"heading1Predicate",forwardError:"no_next_heading_1",backwardError:"no_previous_heading_1"},heading2:{predicate:"heading2Predicate",forwardError:"no_next_heading_2",backwardError:"no_previous_heading_2"},heading3:{predicate:"heading3Predicate",forwardError:"no_next_heading_3",backwardError:"no_previous_heading_3"},heading4:{predicate:"heading4Predicate",forwardError:"no_next_heading_4",backwardError:"no_previous_heading_4"},
heading5:{predicate:"heading5Predicate",forwardError:"no_next_heading_5",backwardError:"no_previous_heading_5"},heading6:{predicate:"heading6Predicate",forwardError:"no_next_heading_6",backwardError:"no_previous_heading_6"},link:{predicate:"linkPredicate",forwardError:"no_next_link",backwardError:"no_previous_link",typeMsg:"aria_role_link"},table:{predicate:"tablePredicate",forwardError:"no_next_table",backwardError:"no_previous_table",typeMsg:"table_strategy"},list:{predicate:"listPredicate",forwardError:"no_next_list",
backwardError:"no_previous_list",typeMsg:"aria_role_list"},listItem:{predicate:"listItemPredicate",forwardError:"no_next_list_item",backwardError:"no_previous_list_item",typeMsg:"aria_role_listitem"},formField:{predicate:"formFieldPredicate",forwardError:"no_next_form_field",backwardError:"no_previous_form_field",typeMsg:"aria_role_form"},landmark:{predicate:"landmarkPredicate",forwardError:"no_next_landmark",backwardError:"no_previous_landmark",typeMsg:"role_landmark"},math:{predicate:"mathPredicate",
forwardError:"no_next_math",backwardError:"no_previous_math"}};cvox.ChromeVoxUserCommands.createCommand_=function(a){return goog.bind(function(){return cvox.ChromeVoxUserCommands.doCommand_(a)},cvox.ChromeVoxUserCommands)};
cvox.ChromeVoxUserCommands.doCommand_=cvox.ChromeVoxEventSuspender.withSuspendedEvents(function(a){if(cvox.Widget.isActive())return!0;var b=cvox.ChromeVoxUserCommands.CMD_WHITELIST_[a];if(!b)throw"Invalid command: "+a;if(!cvox.PlatformUtil.matchesPlatform(b.platformFilter)||b.skipInput&&cvox.FocusUtil.isFocusInTextInputField())return!0;b.forward?cvox.ChromeVox.navigationManager.setReversed(!1):b.backward&&cvox.ChromeVox.navigationManager.setReversed(!0);if(b.findNext){var c=cvox.ChromeVoxUserCommands.NODE_INFO_MAP_[b.findNext],
d=cvox.DomPredicates[c.predicate],e="";b.forward?e=cvox.ChromeVox.msgs.getMsg(c.forwardError):b.backward&&(e=cvox.ChromeVox.msgs.getMsg(c.backwardError));cvox.ChromeVoxUserCommands.findNextAndSpeak_(d,e);return!1}c=e="";d=!1;switch(a){case "forward":case "backward":cvox.ChromeVox.navigationManager.isTableMode()?cvox.ChromeVox.navigationManager.nextRow()||cvox.ChromeVox.navigationManager.tryExitTable():d=!cvox.ChromeVox.navigationManager.navigate();break;case "right":case "left":cvox.ChromeVox.navigationManager.isTableMode()?
cvox.ChromeVox.navigationManager.nextCol():cvox.ChromeVox.navigationManager.subnavigate();break;case "skipForward":case "skipBackward":d=!cvox.ChromeVox.navigationManager.skip();break;case "previousGranularity":cvox.ChromeVox.navigationManager.makeLessGranular();e=cvox.ChromeVox.navigationManager.getGranularityMsg();break;case "nextGranularity":cvox.ChromeVox.navigationManager.makeMoreGranular();e=cvox.ChromeVox.navigationManager.getGranularityMsg();break;case "previousCharacter":cvox.ChromeVox.navigationManager.navigate(!1,
cvox.NavigationShifter.GRANULARITIES.CHARACTER);break;case "nextCharacter":cvox.ChromeVox.navigationManager.navigate(!1,cvox.NavigationShifter.GRANULARITIES.CHARACTER);break;case "previousWord":cvox.ChromeVox.navigationManager.navigate(!1,cvox.NavigationShifter.GRANULARITIES.WORD);break;case "nextWord":cvox.ChromeVox.navigationManager.navigate(!1,cvox.NavigationShifter.GRANULARITIES.WORD);break;case "previousSentence":cvox.ChromeVox.navigationManager.navigate(!1,cvox.NavigationShifter.GRANULARITIES.SENTENCE);
break;case "nextSentence":cvox.ChromeVox.navigationManager.navigate(!1,cvox.NavigationShifter.GRANULARITIES.SENTENCE);break;case "previousLine":cvox.ChromeVox.navigationManager.navigate(!1,cvox.NavigationShifter.GRANULARITIES.LINE);break;case "nextLine":cvox.ChromeVox.navigationManager.navigate(!1,cvox.NavigationShifter.GRANULARITIES.LINE);break;case "previousObject":cvox.ChromeVox.navigationManager.navigate(!1,cvox.NavigationShifter.GRANULARITIES.OBJECT);break;case "nextObject":cvox.ChromeVox.navigationManager.navigate(!1,
cvox.NavigationShifter.GRANULARITIES.OBJECT);break;case "previousGroup":cvox.ChromeVox.navigationManager.navigate(!1,cvox.NavigationShifter.GRANULARITIES.GROUP);break;case "nextGroup":cvox.ChromeVox.navigationManager.navigate(!1,cvox.NavigationShifter.GRANULARITIES.GROUP);break;case "moveToStartOfLine":case "moveToEndOfLine":cvox.ChromeVox.navigationManager.setGranularity(cvox.NavigationShifter.GRANULARITIES.LINE);cvox.ChromeVox.navigationManager.sync();cvox.ChromeVox.navigationManager.collapseSelection();
break;case "readFromHere":cvox.ChromeVox.navigationManager.startReading(cvox.AbstractTts.QUEUE_MODE_FLUSH);break;case "jumpToTop":cvox.ChromeVox.navigationManager.syncToPageBeginning();break;case "jumpToBottom":cvox.ChromeVox.navigationManager.syncToPageBeginning();break;case "stopSpeech":cvox.ChromeVox.navigationManager.stopReading(!0);break;case "toggleKeyboardHelp":cvox.KeyboardHelpWidget.getInstance().toggle();break;case "nextTtsEngine":break;case "help":cvox.ChromeVox.tts.stop();cvox.ChromeVox.host.sendToBackgroundPage({target:"HelpDocs",
action:"open"});break;case "showBookmarkManager":cvox.ChromeVox.host.sendToBackgroundPage({target:"BookmarkManager",action:"open"});break;case "showOptionsPage":cvox.ChromeVox.tts.stop();cvox.ChromeVox.host.sendToBackgroundPage({target:"Options",action:"open"});break;case "showKbExplorerPage":cvox.ChromeVox.tts.stop();cvox.ChromeVox.host.sendToBackgroundPage({target:"KbExplorer",action:"open"});break;case "readLinkURL":a=document.activeElement;var f=window.getSelection().anchorNode,g="";"A"==a.tagName?
g=cvox.DomUtil.getLinkURL(a):f&&(g=cvox.DomUtil.getLinkURL(f.parentNode));""!=g?cvox.ChromeVox.tts.speak(g):cvox.ChromeVox.tts.speak(cvox.ChromeVox.msgs.getMsg("no_url_found"));break;case "readCurrentTitle":cvox.ChromeVox.tts.speak(document.title);break;case "readCurrentURL":cvox.ChromeVox.tts.speak(document.URL);break;case "announceHeaders":cvox.ChromeVox.tts.speak(cvox.ChromeVox.navigationManager.getHeaderText(),cvox.AbstractTts.QUEUE_MODE_FLUSH,null);break;case "speakTableLocation":a=cvox.ChromeVox.navigationManager.getLocationDescription();
null==a?c="not_inside_table":cvox.ChromeVox.navigationManager.speakDescriptionArray(a,cvox.AbstractTts.QUEUE_MODE_FLUSH,null);break;case "actOnCurrentItem":d=!cvox.ChromeVox.navigationManager.act();break;case "forceClickOnCurrentItem":cvox.ChromeVox.tts.speak(cvox.ChromeVox.msgs.getMsg("element_clicked"),0,cvox.AbstractTts.PERSONALITY_ANNOTATION);a=cvox.ChromeVox.navigationManager.getCurrentNode();(f=cvox.AriaUtil.getActiveDescendant(a))&&(a=f);cvox.DomUtil.clickElem(a,!1);break;case "toggleChromeVox":cvox.ChromeVox.host.sendToBackgroundPage({target:"Prefs",
action:"setPref",pref:"active",value:!cvox.ChromeVox.isActive});break;case "fullyDescribe":a=cvox.ChromeVox.navigationManager.getFullDescription();cvox.ChromeVox.navigationManager.speakDescriptionArray(a,cvox.AbstractTts.QUEUE_MODE_FLUSH,null);break;case "toggleSelection":e=cvox.ChromeVox.navigationManager.togglePageSel();e=cvox.ChromeVox.msgs.getMsg(e?"begin_selection":"end_selection");break;case "filterLikeCurrentItem":f=cvox.ChromeVox.navigationManager.getCurrentNode();a=cvox.WalkerDecorator.filterForNode(f);
if(!cvox.DomUtil.hasContent(f)||!a){c="unable_to_filter";break}f=cvox.ChromeVox.navigationManager.getFilteredWalker();f.addFilter(a);cvox.$m("added_filter").speakFlush();cvox.ChromeVox.navigationManager.navigate();break;case "startHistoryRecording":cvox.History.getInstance().startRecording();break;case "stopHistoryRecording":cvox.History.getInstance().stopRecording();break;case "enterCssSpace":cvox.CssSpace.initializeSpace();cvox.CssSpace.enterExploration();break;case "enableConsoleTts":cvox.ConsoleTts.getInstance().setEnabled(!0);
break;case "autorunner":a=new cvox.AutoRunner;a.run();break;case "skipToBeginning":cvox.ChromeVox.navigationManager.goToFirstCell()||(c="not_inside_table");break;case "skipToEnd":cvox.ChromeVox.navigationManager.goToLastCell()||(c="not_inside_table");break;case "skipToRowBeginning":cvox.ChromeVox.navigationManager.goToRowFirstCell()||(c="not_inside_table");break;case "skipToRowEnd":cvox.ChromeVox.navigationManager.goToRowLastCell()||(c="not_inside_table");break;case "skipToColBeginning":cvox.ChromeVox.navigationManager.goToColFirstCell()||
(c="not_inside_table");break;case "skipToColEnd":cvox.ChromeVox.navigationManager.goToColLastCell()||(c="not_inside_table");break;case "cycleDomain":cvox.ChromeVox.navigationManager.cycleDomain();e=cvox.ChromeVox.navigationManager.getDomainMsg();break;case "cycleTraversalMode":cvox.ChromeVox.navigationManager.cycleTraversalMode();e=cvox.ChromeVox.navigationManager.getTraversalModeMsg();break;case "toggleExplore":cvox.ChromeVox.navigationManager.toggleExplore()||(c="not_inside_math");break;case "decreaseTtsRate":cvox.ChromeVox.tts.increaseOrDecreaseProperty(cvox.AbstractTts.RATE,
!1);break;case "increaseTtsRate":cvox.ChromeVox.tts.increaseOrDecreaseProperty(cvox.AbstractTts.RATE,!0);break;case "decreaseTtsPitch":cvox.ChromeVox.tts.increaseOrDecreaseProperty(cvox.AbstractTts.PITCH,!1);break;case "increaseTtsPitch":cvox.ChromeVox.tts.increaseOrDecreaseProperty(cvox.AbstractTts.PITCH,!0);break;case "decreaseTtsVolume":cvox.ChromeVox.tts.increaseOrDecreaseProperty(cvox.AbstractTts.VOLUME,!1);break;case "increaseTtsVolume":cvox.ChromeVox.tts.increaseOrDecreaseProperty(cvox.AbstractTts.VOLUME,
!0);break;case "cyclePunctuationLevel":cvox.ChromeVox.host.sendToBackgroundPage({target:"TTS",action:"cyclePunctuationLevel"});break;case "toggleTable":cvox.ChromeVox.navigationManager.isTableMode()?(cvox.ChromeVox.navigationManager.tryExitTable(),e=cvox.ChromeVox.navigationManager.getGranularityMsg()):(cvox.ChromeVox.navigationManager.tryEnterTable({force:!0}),e=cvox.ChromeVox.navigationManager.isTableMode()?cvox.ChromeVox.navigationManager.getGranularityMsg():cvox.ChromeVox.msgs.getMsg("no_tables"));
break;case "toggleStickyMode":cvox.ChromeVox.host.sendToBackgroundPage({target:"Prefs",action:"setPref",pref:"sticky",value:!cvox.ChromeVox.isStickyOn,announce:!0});break;case "toggleKeyPrefix":cvox.ChromeVox.keyPrefixOn=!cvox.ChromeVox.keyPrefixOn;break;case "toggleSearchWidget":cvox.SearchWidget.getInstance().toggle();break;case "toggleLens":a=!cvox.ChromeVox.lens.isLensDisplayed();cvox.ChromeVox.lens.showLens(a);cvox.ChromeVox.host.sendToBackgroundPage({target:"Prefs",action:"setPref",pref:"lensVisible",
value:a});break;case "floatLens":try{cvox.ChromeVox.lens.setAnchoredLens(!1),cvox.ChromeVox.lens.showLens(!1),cvox.ChromeVox.lens.showLens(!0)}catch(h){}cvox.ChromeVox.host.sendToBackgroundPage({target:"Prefs",action:"setPref",pref:"lensAnchored",value:!1});break;case "anchorLens":try{cvox.ChromeVox.lens.setAnchoredLens(!0),cvox.ChromeVox.lens.showLens(!1),cvox.ChromeVox.lens.showLens(!0)}catch(i){}cvox.ChromeVox.host.sendToBackgroundPage({target:"Prefs",action:"setPref",pref:"lensAnchored",value:!0});
break;case "showHeadingsList":case "showLinksList":case "showFormsList":case "showTablesList":case "showLandmarksList":if(!b.nodeList)break;a=cvox.ChromeVoxUserCommands.NODE_INFO_MAP_[b.nodeList];cvox.NodeSearchWidget.create(a.typeMsg,cvox.DomPredicates[a.predicate]).show();break;case "debug":break;case "nop":break;default:throw"Command behavior not defined: "+a;}""!=c?cvox.ChromeVox.tts.speak(cvox.ChromeVox.msgs.getMsg(c),cvox.AbstractTts.QUEUE_MODE_FLUSH,cvox.AbstractTts.PERSONALITY_ANNOTATION):
b.announce&&cvox.ChromeVoxUserCommands.finishNavCommand(e);return!!b.doDefault||d});cvox.ChromeVoxUserCommands.init_();cvox.ChromeVoxKbHandler={};cvox.ChromeVoxKbHandler.loadKeyToFunctionsTable=function(a){window.JSON&&(cvox.ChromeVoxKbHandler.handlerKeyMap=cvox.KeyMap.fromJSON(a,!0))};cvox.ChromeVoxKbHandler.sortKeyToFunctionsTable_=function(a){function b(a,b){return a[0].length<b[0].length?-1:b[0].length<a[0].length?1:a[0].localeCompare(b[0])}var c=[],d;for(d in a)c.push([d,a[d]]);c.sort(b);return c};
cvox.ChromeVoxKbHandler.mustPassEnterKey=function(){var a=document.activeElement;return!a?!1:a.isContentEditable||"textbox"==a.getAttribute("role")||"INPUT"==a.tagName||"A"==a.tagName&&!cvox.DomUtil.isInternalLink(a)||"SELECT"==a.tagName||"BUTTON"==a.tagName||"TEXTAREA"==a.tagName};
cvox.ChromeVoxKbHandler.basicKeyDownActionsListener=function(a){if(13==a.keyCode&&cvox.ChromeVox.isActive){if("A"==document.activeElement.tagName&&cvox.DomUtil.isInternalLink(document.activeElement)){var b=document.activeElement.href.split("#")[1];a=document.getElementById(b);a||(b=document.getElementsByName(b),0<b.length&&(a=b[0]));if(a)return cvox.ChromeVox.navigationManager.updateSelToArbitraryNode(a),cvox.ChromeVoxUserCommands.finishNavCommand(""),!0}return cvox.ChromeVoxKbHandler.mustPassEnterKey()?
!0:cvox.ChromeVoxUserCommands.commands.actOnCurrentItem()}var c=cvox.KeyUtil.keyEventToKeySequence(a);a=void 0!=cvox.ChromeVoxKbHandler.handlerKeyMap?cvox.ChromeVoxKbHandler.handlerKeyMap.commandForKey(c):null;if(!a)return!cvox.KeyUtil.sequencing;if(!cvox.ChromeVox.isActive&&"toggleChromeVox"!=a)return!0;"skipForward"!=a&&"skipBackward"!=a&&cvox.ChromeVox.navigationManager.stopReading(!1);var b=!0,d=cvox.ChromeVoxUserCommands.commands[a];d?(c=cvox.History.getInstance(),c.enterUserCommand(a),b=d(),
c.exitUserCommand(a)):c.cvoxModifier&&(b=!1);cvox.ChromeVox.entireDocumentIsHidden&&(b=!0);return b};cvox.LiveRegions=function(){};cvox.LiveRegions.pageLoadTime=null;cvox.LiveRegions.INITIAL_SILENCE_MS=2E3;
cvox.LiveRegions.init=function(a,b,c){void 0==b&&(b=cvox.AbstractTts.QUEUE_MODE_FLUSH);cvox.LiveRegions.pageLoadTime=a;if(c||!document.hasFocus())return!1;var d=!1;a=cvox.AriaUtil.getLiveRegions(document.body);for(c=0;c<a.length;c++)cvox.LiveRegions.handleOneChangedNode(a[c],a[c],!1,!1,function(a,c){!a&&b==cvox.AbstractTts.QUEUE_MODE_FLUSH&&(b=cvox.AbstractTts.QUEUE_MODE_QUEUE);var g=new cvox.NavigationSpeaker;g.speakDescriptionArray(c,b,null);d=!0});return d};
cvox.LiveRegions.processMutations=function(a,b){a.forEach(function(a){if(!a.target.hasAttribute||!a.target.hasAttribute("cvoxIgnore")){if(a.addedNodes)for(var d=0;d<a.addedNodes.length;d++)(!a.addedNodes[d].hasAttribute||!a.addedNodes[d].hasAttribute("cvoxIgnore"))&&cvox.LiveRegions.handleOneChangedNode(a.addedNodes[d],a.target,!1,!0,b);if(a.removedNodes)for(d=0;d<a.removedNodes.length;d++)(!a.removedNodes[d].hasAttribute||!a.removedNodes[d].hasAttribute("cvoxIgnore"))&&cvox.LiveRegions.handleOneChangedNode(a.removedNodes[d],
a.target,!0,!1,b);"characterData"==a.type&&cvox.LiveRegions.handleOneChangedNode(a.target,a.target,!1,!1,b);if("class"==a.attributeName||"style"==a.attributeName||"hidden"==a.attributeName){var e=a.attributeName,d=a.target,f=document.defaultView.getComputedStyle(d,null),f=cvox.DomUtil.isInvisibleStyle(f,!1),g=document.createElement("div");g.setAttribute("cvoxIgnore","1");g.setAttribute("class",d.getAttribute("class"));g.setAttribute("style",d.getAttribute("style"));g.setAttribute("hidden",d.getAttribute("hidden"));
g.setAttribute(e,a.oldValue);e=!0;d.parentElement&&(d.parentElement.appendChild(g),e=document.defaultView.getComputedStyle(g,null),e=cvox.DomUtil.isInvisibleStyle(e,!1),d.parentElement.removeChild(g));!0===e&&!1===f?cvox.LiveRegions.handleOneChangedNode(a.target,a.target,!1,!0,b):!1===e&&!0===f&&cvox.LiveRegions.handleOneChangedNode(a.target,a.target,!0,!1,b)}}})};
cvox.LiveRegions.handleOneChangedNode=function(a,b,c,d,e){var f=c?b:a;f instanceof Element||(f=f.parentElement);for(;f&&!cvox.AriaUtil.getAriaLive(f);)f=f.parentElement;if(f){if(!cvox.AriaUtil.getAriaBusy(f)){if(c){if(!cvox.AriaUtil.getAriaRelevant(f,"removals"))return}else if(!cvox.AriaUtil.getAriaRelevant(f,"additions"))return;cvox.LiveRegions.announceChange(a,f,c,e)}}else if(d&&a!=document.body){a=cvox.AriaUtil.getLiveRegions(a);for(d=0;d<a.length;d++)cvox.LiveRegions.handleOneChangedNode(a[d],
b,c,!1,e)}};
cvox.LiveRegions.announceChange=function(a,b,c,d){var e=new Date-cvox.LiveRegions.pageLoadTime;if(!("alert"!=cvox.AriaUtil.getRoleAttribute(b)&&e<cvox.LiveRegions.INITIAL_SILENCE_MS)&&cvox.DomUtil.isVisible(b)){if(a!=b)for(var f=a.parentElement;f;){if((cvox.AriaUtil.getAriaAtomic(f)||cvox.AriaUtil.isLeafElement(f)||cvox.AriaUtil.isControlWidget(f))&&!cvox.AriaUtil.isCompositeControl(f))a=f;if(f==b)break;f=f.parentElement}a=cvox.LiveRegions.getNavDescriptionsRecursive(a);c&&(a=[new cvox.NavDescription({context:cvox.ChromeVox.msgs.getMsg("live_regions_removed")})].concat(a));if("alert"==
cvox.AriaUtil.getRoleAttribute(b)&&e<cvox.LiveRegions.INITIAL_SILENCE_MS){c="";for(e=0;e<a.length;e++)c+=a[e].text,c+=a[e].userValue;if(""==cvox.DomUtil.collapseWhitespace(c))return}b="assertive"==cvox.AriaUtil.getAriaLive(b);d(b,a)}};
cvox.LiveRegions.getNavDescriptionsRecursive=function(a){if(cvox.AriaUtil.getAriaAtomic(a)||cvox.DomUtil.isLeafNode(a)){var b=cvox.DescriptionUtil.getDescriptionFromAncestors([a],!0,cvox.ChromeVox.verbosity);return b.isEmpty()?[]:[b]}var c=[],b=cvox.DescriptionUtil.getDescriptionFromAncestors([a],!1,cvox.ChromeVox.verbosity);b.isEmpty()||c.push(b);for(b=0;b<a.childNodes.length;b++){var d=a.childNodes[b];cvox.DomUtil.isVisible(d,{checkAncestors:!1})&&!cvox.AriaUtil.isHidden(d)&&(d=cvox.LiveRegions.getNavDescriptionsRecursive(d),
c=c.concat(d))}return c};cvox.LiveRegionsDeprecated=function(){};cvox.LiveRegionsDeprecated.trackedRegions=[];cvox.LiveRegionsDeprecated.previousRegionValue=[];cvox.LiveRegionsDeprecated.pageLoadTime=null;cvox.LiveRegionsDeprecated.INITIAL_SILENCE_MS=2E3;
cvox.LiveRegionsDeprecated.init=function(a,b,c){void 0==b&&(b=cvox.AbstractTts.QUEUE_MODE_FLUSH);cvox.LiveRegionsDeprecated.pageLoadTime=a;a=!1;for(var d=cvox.AriaUtil.getLiveRegions(document.body),e=0;e<d.length;e++)cvox.LiveRegionsDeprecated.updateLiveRegion(d[e],b,c)&&(a=!0,b=cvox.AbstractTts.QUEUE_MODE_QUEUE);return a};
cvox.LiveRegionsDeprecated.updateLiveRegion=function(a,b,c){if(cvox.AriaUtil.getAriaBusy(a)||!cvox.DomUtil.isVisible(a))return!1;var d=cvox.LiveRegionsDeprecated.trackedRegions.indexOf(a),e;0<=d?e=cvox.LiveRegionsDeprecated.previousRegionValue[d]:(d=cvox.LiveRegionsDeprecated.trackedRegions.length,e=[],cvox.LiveRegionsDeprecated.trackedRegions.push(a),cvox.LiveRegionsDeprecated.previousRegionValue.push([]));var f=cvox.LiveRegionsDeprecated.buildCurrentLiveRegionValue(a),g=new Date-cvox.LiveRegionsDeprecated.pageLoadTime;
if("alert"!=cvox.AriaUtil.getRoleAttribute(a)&&g<cvox.LiveRegionsDeprecated.INITIAL_SILENCE_MS)return cvox.LiveRegionsDeprecated.previousRegionValue[d]=f,!1;if("alert"==cvox.AriaUtil.getRoleAttribute(a)&&g<cvox.LiveRegionsDeprecated.INITIAL_SILENCE_MS){for(var h="",g=0;g<f.length;g++)h+=f[g].text,h+=f[g].userValue;if(""==cvox.DomUtil.collapseWhitespace(h))return cvox.LiveRegionsDeprecated.previousRegionValue[d]=f,!1}for(var i={},g=0;g<e.length;g++)i[e[g].toString()]=!0;for(var j={},g=0;g<f.length;g++)j[f[g].toString()]=
!0;h=[];if(cvox.AriaUtil.getAriaRelevant(a,"additions"))for(g=0;g<f.length;g++)i[f[g].toString()]||h.push(f[g]);i=[];if(cvox.AriaUtil.getAriaRelevant(a,"removals"))for(g=0;g<e.length;g++)j[e[g].toString()]||i.push(e[g]);e=[];e=0==h.length&&0<i.length?[new cvox.NavDescription({context:cvox.ChromeVox.msgs.getMsg("live_regions_removed")})].concat(i):h;cvox.LiveRegionsDeprecated.previousRegionValue[d]=f;if(c||0==e.length)return!1;a=cvox.AriaUtil.getAriaLive(a);"polite"==a&&(b=cvox.AbstractTts.QUEUE_MODE_QUEUE);
for(g=0;g<e.length;g++)e[g].speak(b),b=cvox.AbstractTts.QUEUE_MODE_QUEUE;return!0};
cvox.LiveRegionsDeprecated.buildCurrentLiveRegionValue=function(a){if(cvox.AriaUtil.getAriaAtomic(a)||cvox.DomUtil.isLeafNode(a)){var b=cvox.DescriptionUtil.getDescriptionFromAncestors([a],!0,cvox.ChromeVox.verbosity);return b.isEmpty()?[]:[b]}var c=[],b=cvox.DescriptionUtil.getDescriptionFromAncestors([a],!1,cvox.ChromeVox.verbosity);b.isEmpty()||c.push(b);for(b=0;b<a.childNodes.length;b++){var d=a.childNodes[b];cvox.DomUtil.isVisible(d,{checkAncestors:!1})&&!cvox.AriaUtil.isHidden(d)&&(d=cvox.LiveRegionsDeprecated.buildCurrentLiveRegionValue(d),
c=c.concat(d))}return c};cvox.MacroWriter={};cvox.ChromeVoxUserCommands.commands.readMacroFromHtml=cvox.MacroWriter.readMacroFromHtml=function(){var a=document.getElementById("cvoxMacroWriterCode");if(!a)return window.console.log("Could not find the macro writer text box"),!1;for(var a=a.value.split("\n"),b="",c=0;c<a.length;c++)b+='queueToRun("'+a[c]+'");\n';window.console.log("Code: "+b);eval(b)};
cvox.ChromeVoxUserCommands.commands.addMacroWriter=function(){var a=document.createElement("textarea");a.id="cvoxMacroWriterCode";a.style.height="200px";a.style.width="200px";var b=document.createElement("p");b.innerHTML="Add user commands, one per line.";var c=document.createElement("a");c.style.display="block";c.href="#";c.onclick=cvox.MacroWriter.readMacroFromHtml;c.innerHTML="Run the macro (or press Cvox+B>F)";var d=document.createElement("div");d.style.position="fixed";d.style.bottom="0";d.style.zIndex=
"999";d.appendChild(b);d.appendChild(a);d.appendChild(c);document.body.appendChild(d)};cvox.ChromeVoxEventWatcherUtil={};cvox.ChromeVoxEventWatcher=function(){};cvox.ChromeVoxEventWatcher.MAX_WAIT_TIME_MS_=50;cvox.ChromeVoxEventWatcher.WAIT_TIME_MS_=10;cvox.ChromeVoxEventWatcher.SUBTREE_MODIFIED_BURST_DURATION_=1E3;cvox.ChromeVoxEventWatcher.SUBTREE_MODIFIED_BURST_COUNT_LIMIT_=3;cvox.ChromeVoxEventWatcher.MAX_LIVE_REGIONS_=5;cvox.ChromeVoxEventWatcher.shouldEchoKeys=!0;cvox.ChromeVoxEventWatcher.processing_=!1;
cvox.ChromeVoxEventWatcher.init=function(a){cvox.ChromeVoxEventWatcher.lastFocusedNode=null;cvox.ChromeVoxEventWatcher.announcedMouseOverNode=null;cvox.ChromeVoxEventWatcher.pendingMouseOverNode=null;cvox.ChromeVoxEventWatcher.mouseOverTimeoutId=null;cvox.ChromeVoxEventWatcher.lastFocusedNodeValue=null;cvox.ChromeVoxEventWatcher.eventToEat=null;cvox.ChromeVoxEventWatcher.currentTextControl=null;cvox.ChromeVoxEventWatcher.currentTextHandler=null;cvox.ChromeVoxEventWatcher.previousTextHandlerState=
null;cvox.ChromeVoxEventWatcher.lastKeypressTime=0;cvox.ChromeVoxEventWatcher.listeners_=[];cvox.ChromeVoxEventWatcher.mutationObserver_=null;cvox.ChromeVoxEventWatcher.focusFollowsMouse=!1;cvox.ChromeVoxEventWatcher.mouseoverDelayMs=500;cvox.ChromeVoxEventWatcher.events_=[];cvox.ChromeVoxEventWatcher.lastEventTime=0;cvox.ChromeVoxEventWatcher.firstUnprocessedEventTime=-1;cvox.ChromeVoxEventWatcher.queueProcessingScheduled_=!1;cvox.ChromeVoxEventWatcher.readyCallbacks_=[];cvox.ChromeVoxEventWatcher.searchKeyHeld_=
!1;cvox.ChromeVoxEventWatcher.textMutationObserver_=null;cvox.ChromeVoxEventWatcher.addEventListeners_(a);cvox.ChromeVoxEventWatcher.lastSubtreeModifiedEventBurstTime_=0;cvox.ChromeVoxEventWatcher.subtreeModifiedEventsCount_=0};cvox.ChromeVoxEventWatcher.storeOn=function(a){a.searchKeyHeld=cvox.ChromeVoxEventWatcher.searchKeyHeld_};cvox.ChromeVoxEventWatcher.readFrom=function(a){cvox.ChromeVoxEventWatcher.searchKeyHeld_=a.searchKeyHeld};
cvox.ChromeVoxEventWatcher.addEvent=function(a){if(!cvox.ChromeVox.isActive)return!1;cvox.ChromeVoxEventWatcher.events_.push(a);cvox.ChromeVoxEventWatcher.lastEventTime=(new Date).getTime();-1==cvox.ChromeVoxEventWatcher.firstUnprocessedEventTime&&(cvox.ChromeVoxEventWatcher.firstUnprocessedEventTime=(new Date).getTime());cvox.ChromeVoxEventWatcher.queueProcessingScheduled_||(cvox.ChromeVoxEventWatcher.queueProcessingScheduled_=!0,window.setTimeout(cvox.ChromeVoxEventWatcher.processQueue_,cvox.ChromeVoxEventWatcher.WAIT_TIME_MS_))};
cvox.ChromeVoxEventWatcher.addReadyCallback=function(a){cvox.ChromeVoxEventWatcher.readyCallbacks_.push(a);cvox.ChromeVoxEventWatcher.maybeCallReadyCallbacks_()};cvox.ChromeVoxEventWatcher.hasPendingEvents_=function(){return-1!=cvox.ChromeVoxEventWatcher.firstUnprocessedEventTime||cvox.ChromeVoxEventWatcher.queueProcessingScheduled_};cvox.ChromeVoxEventWatcher.readyCallbackRunning_=!1;
cvox.ChromeVoxEventWatcher.maybeCallReadyCallbacks_=function(){cvox.ChromeVoxEventWatcher.readyCallbackRunning_||(cvox.ChromeVoxEventWatcher.readyCallbackRunning_=!0,window.setTimeout(function(){cvox.ChromeVoxEventWatcher.readyCallbackRunning_=!1;!cvox.ChromeVoxEventWatcher.hasPendingEvents_()&&(!cvox.ChromeVoxEventWatcher.queueProcessingScheduled_&&0<cvox.ChromeVoxEventWatcher.readyCallbacks_.length)&&(cvox.ChromeVoxEventWatcher.readyCallbacks_.shift()(),cvox.ChromeVoxEventWatcher.maybeCallReadyCallbacks_())},
5))};
cvox.ChromeVoxEventWatcher.addEventListeners_=function(a){cvox.ChromeVoxEventWatcher.addEventListener_(a,"keypress",cvox.ChromeVoxEventWatcher.keyPressEventWatcher,!0);cvox.ChromeVoxEventWatcher.addEventListener_(a,"keydown",cvox.ChromeVoxEventWatcher.keyDownEventWatcher,!0);cvox.ChromeVoxEventWatcher.addEventListener_(a,"keyup",cvox.ChromeVoxEventWatcher.keyUpEventWatcher,!0);if(cvox.ChromeVox.isActive&&!cvox.ChromeVox.entireDocumentIsHidden)if(cvox.ChromeVoxEventWatcher.addEventListener_(a,"focus",
cvox.ChromeVoxEventWatcher.focusEventWatcher,!0),cvox.ChromeVoxEventWatcher.addEventListener_(a,"blur",cvox.ChromeVoxEventWatcher.blurEventWatcher,!0),cvox.ChromeVoxEventWatcher.addEventListener_(a,"change",cvox.ChromeVoxEventWatcher.changeEventWatcher,!0),cvox.ChromeVoxEventWatcher.addEventListener_(a,"copy",cvox.ChromeVoxEventWatcher.clipboardEventWatcher,!0),cvox.ChromeVoxEventWatcher.addEventListener_(a,"cut",cvox.ChromeVoxEventWatcher.clipboardEventWatcher,!0),cvox.ChromeVoxEventWatcher.addEventListener_(a,
"paste",cvox.ChromeVoxEventWatcher.clipboardEventWatcher,!0),cvox.ChromeVoxEventWatcher.addEventListener_(a,"select",cvox.ChromeVoxEventWatcher.selectEventWatcher,!0),cvox.ChromeVoxEventWatcher.addEventListener_(a,"webkitvisibilitychange",cvox.ChromeVoxEventWatcher.visibilityChangeWatcher,!0),cvox.ChromeVoxEventWatcher.events_=[],cvox.ChromeVoxEventWatcher.queueProcessingScheduled_=!1,cvox.ChromeVoxEventWatcher.addEventListener_(a,"mouseover",cvox.ChromeVoxEventWatcher.mouseOverEventWatcher,!0),cvox.ChromeVoxEventWatcher.addEventListener_(a,
"mouseout",cvox.ChromeVoxEventWatcher.mouseOutEventWatcher,!0),cvox.ChromeVoxEventWatcher.addEventListener_(a,"click",cvox.ChromeVoxEventWatcher.mouseClickEventWatcher,!0),"undefined"!=typeof WebKitMutationObserver){cvox.ChromeVoxEventWatcher.mutationObserver_=new WebKitMutationObserver(cvox.ChromeVoxEventWatcher.mutationHandler);var b=null;a.documentElement?b=a.documentElement:a.document&&a.document.documentElement&&(b=a.document.documentElement);b&&cvox.ChromeVoxEventWatcher.mutationObserver_.observe(b,
{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})}else cvox.ChromeVoxEventWatcher.addEventListener_(a,"DOMSubtreeModified",cvox.ChromeVoxEventWatcher.subtreeModifiedEventWatcher,!0)};
cvox.ChromeVoxEventWatcher.cleanup=function(a){for(var b=0;b<cvox.ChromeVoxEventWatcher.listeners_.length;b++){var c=cvox.ChromeVoxEventWatcher.listeners_[b];a.removeEventListener(c.type,c.listener,c.useCapture)}cvox.ChromeVoxEventWatcher.listeners_=[];cvox.ChromeVoxEventWatcher.currentTimeHandler&&cvox.ChromeVoxEventWatcher.currentTimeHandler.shutdown();cvox.ChromeVoxEventWatcher.currentMediaHandler&&cvox.ChromeVoxEventWatcher.currentMediaHandler.shutdown();cvox.ChromeVoxEventWatcher.mutationObserver_&&
cvox.ChromeVoxEventWatcher.mutationObserver_.disconnect();cvox.ChromeVoxEventWatcher.mutationObserver_=null};cvox.ChromeVoxEventWatcher.addEventListener_=function(a,b,c,d){cvox.ChromeVoxEventWatcher.listeners_.push({type:b,listener:c,useCapture:d});a.addEventListener(b,c,d)};cvox.ChromeVoxEventWatcher.getLastFocusedNode=function(){return cvox.ChromeVoxEventWatcher.lastFocusedNode};
cvox.ChromeVoxEventWatcher.setLastFocusedNode_=function(a){cvox.ChromeVoxEventWatcher.lastFocusedNode=a;cvox.ChromeVoxEventWatcher.lastFocusedNodeValue=!a?null:cvox.DomUtil.getControlValueAndStateString(a)};cvox.ChromeVoxEventWatcher.mutationHandler=function(a){if(cvox.ChromeVoxEventSuspender.areEventsSuspended())return!0;cvox.LiveRegions.processMutations(a,function(a,c){var d=new window.Event("LiveRegion");d.navDescriptions=c;d.assertive=a;cvox.ChromeVoxEventWatcher.addEvent(d);return!0})};
cvox.ChromeVoxEventWatcher.mouseClickEventWatcher=function(a){cvox.PlatformUtil.matchesPlatform(cvox.PlatformFilter.WML)&&!a.fromCvox&&cvox.ApiImplementation.syncToNode(a.target,!0);return cvox.ChromeVox.host.mustRedispatchClickEvent()&&!a.fromCvox?(cvox.ChromeVoxUserCommands.wasMouseClicked=!0,a.stopPropagation(),a.preventDefault(),cvox.Focuser.setFocus(cvox.ChromeVox.navigationManager.getCurrentNode()),cvox.ChromeVoxUserCommands.commands.forceClickOnCurrentItem(),!1):cvox.ChromeVoxUserCommands.wasMouseClicked=
!0};
cvox.ChromeVoxEventWatcher.mouseOverEventWatcher=function(a){if(!cvox.ChromeVoxEventWatcher.focusFollowsMouse||cvox.DomUtil.isDescendantOfNode(cvox.ChromeVoxEventWatcher.announcedMouseOverNode,a.target)||a.target==cvox.ChromeVoxEventWatcher.pendingMouseOverNode)return!0;cvox.ChromeVoxEventWatcher.pendingMouseOverNode=a.target;cvox.ChromeVoxEventWatcher.mouseOverTimeoutId&&(window.clearTimeout(cvox.ChromeVoxEventWatcher.mouseOverTimeoutId),cvox.ChromeVoxEventWatcher.mouseOverTimeoutId=null);if(a.target.tagName&&"BODY"==
a.target.tagName)return cvox.ChromeVoxEventWatcher.pendingMouseOverNode=null,cvox.ChromeVoxEventWatcher.announcedMouseOverNode=null,!0;cvox.ChromeVoxEventWatcher.mouseOverTimeoutId=window.setTimeout(function(){cvox.ChromeVoxEventWatcher.mouseOverTimeoutId=null;if(a.target==cvox.ChromeVoxEventWatcher.pendingMouseOverNode){cvox.ChromeVox.navigationManager.stopReading(!0);var b=a.target;cvox.Focuser.setFocus(b);cvox.ApiImplementation.syncToNode(b,!0,cvox.AbstractTts.QUEUE_MODE_FLUSH);cvox.ChromeVoxEventWatcher.announcedMouseOverNode=
b}},cvox.ChromeVoxEventWatcher.mouseoverDelayMs);return!0};cvox.ChromeVoxEventWatcher.mouseOutEventWatcher=function(a){a.target==cvox.ChromeVoxEventWatcher.pendingMouseOverNode&&(cvox.ChromeVoxEventWatcher.pendingMouseOverNode=null,cvox.ChromeVoxEventWatcher.mouseOverTimeoutId&&(window.clearTimeout(cvox.ChromeVoxEventWatcher.mouseOverTimeoutId),cvox.ChromeVoxEventWatcher.mouseOverTimeoutId=null));return!0};
cvox.ChromeVoxEventWatcher.focusEventWatcher=function(a){cvox.ChromeVoxUserCommands.removeTabDummySpan();cvox.ChromeVoxEventSuspender.areEventsSuspended()||cvox.ChromeVoxEventWatcher.addEvent(a);return!0};
cvox.ChromeVoxEventWatcher.focusHandler=function(a){if(a.target&&a.target.hasAttribute&&"true"==a.target.getAttribute("aria-hidden")&&"true"!=a.target.getAttribute("chromevoxignoreariahidden"))cvox.ChromeVoxEventWatcher.setLastFocusedNode_(null),cvox.ChromeVoxEventWatcher.setUpTextHandler_();else if(a.target&&a.target!=window){var b=a.target,c=cvox.DomUtil.getSurroundingControl(b);if(c&&c==cvox.ChromeVoxEventWatcher.lastFocusedNode)cvox.ChromeVoxEventWatcher.handleControlChanged(b);else{c?cvox.ChromeVoxEventWatcher.setLastFocusedNode_(c):
cvox.ChromeVoxEventWatcher.setLastFocusedNode_(b);c=cvox.ChromeVoxEventWatcher.queueMode_();if(cvox.ChromeVoxEventWatcher.getInitialVisibility()||cvox.ChromeVoxEventWatcher.handleDialogFocus(b))c=cvox.AbstractTts.QUEUE_MODE_QUEUE;cvox.ApiImplementation.syncToNode(b,!0,c);a.target.constructor==HTMLVideoElement||a.target.constructor==HTMLAudioElement?cvox.ChromeVoxEventWatcher.setUpMediaHandler_():a.target.hasAttribute&&"time"==a.target.getAttribute("type")?cvox.ChromeVoxEventWatcher.setUpTimeHandler_():
cvox.ChromeVoxEventWatcher.setUpTextHandler_()}}else cvox.ChromeVoxEventWatcher.setLastFocusedNode_(null)};cvox.ChromeVoxEventWatcher.blurEventWatcher=function(a){window.setTimeout(function(){document.activeElement||(cvox.ChromeVoxEventWatcher.setLastFocusedNode_(null),cvox.ChromeVoxEventWatcher.addEvent(a))},0);return!0};
cvox.ChromeVoxEventWatcher.keyDownEventWatcher=function(a){cvox.ChromeVoxEventWatcher.currentTextHandler&&(cvox.ChromeVoxEventWatcher.previousTextHandlerState=cvox.ChromeVoxEventWatcher.currentTextHandler.saveState());cvox.ChromeVoxEventWatcher.lastKeypressTime=(new Date).getTime();cvox.ChromeVox.isChromeOS&&91==a.keyCode&&(cvox.ChromeVoxEventWatcher.searchKeyHeld_=!0);a.searchKeyHeld=cvox.ChromeVoxEventWatcher.searchKeyHeld_;a.stickyMode=cvox.ChromeVox.isStickyOn;a.keyPrefix=cvox.ChromeVox.keyPrefixOn;
cvox.ChromeVox.keyPrefixOn=!1;cvox.ChromeVoxEventWatcher.eventToEat=null;if(!cvox.ChromeVoxKbHandler.basicKeyDownActionsListener(a)||cvox.ChromeVoxEventWatcher.handleControlAction(a))return a.preventDefault(),a.stopPropagation(),cvox.ChromeVoxEventWatcher.eventToEat=a,!1;cvox.ChromeVoxEventWatcher.addEvent(a);return!0};
cvox.ChromeVoxEventWatcher.keyUpEventWatcher=function(a){91==a.keyCode&&(cvox.ChromeVoxEventWatcher.searchKeyHeld_=!1);return cvox.ChromeVoxEventWatcher.eventToEat&&a.keyCode==cvox.ChromeVoxEventWatcher.eventToEat.keyCode?(a.stopPropagation(),a.preventDefault(),!1):!0};
cvox.ChromeVoxEventWatcher.keyPressEventWatcher=function(a){cvox.ChromeVoxEventWatcher.addEvent(a);return cvox.ChromeVoxEventWatcher.eventToEat&&a.keyCode==cvox.ChromeVoxEventWatcher.eventToEat.keyCode?(a.preventDefault(),a.stopPropagation(),!1):!0};cvox.ChromeVoxEventWatcher.changeEventWatcher=function(a){cvox.ChromeVoxEventWatcher.addEvent(a);return!0};
cvox.ChromeVoxEventWatcher.clipboardEventWatcher=function(a){cvox.ChromeVox.tts.speak(cvox.ChromeVox.msgs.getMsg(a.type).toLowerCase());var b="";switch(a.type){case "paste":b=a.clipboardData.getData("text");break;case "copy":case "cut":b=window.getSelection().toString()}cvox.ChromeVox.tts.speak(b,cvox.AbstractTts.QUEUE_MODE_QUEUE);cvox.ChromeVox.navigationManager.clearPageSel();return!0};
cvox.ChromeVoxEventWatcher.changeHandler=function(a){cvox.ChromeVoxEventWatcher.setUpTextHandler_()||document.activeElement==a.target&&cvox.ChromeVoxEventWatcher.handleControlChanged(document.activeElement)};cvox.ChromeVoxEventWatcher.selectEventWatcher=function(a){cvox.ChromeVoxEventWatcher.addEvent(a);return!0};cvox.ChromeVoxEventWatcher.subtreeModifiedEventWatcher=function(a){if(!a||!a.target)return!0;cvox.ChromeVoxEventWatcher.addEvent(a);return!0};
cvox.ChromeVoxEventWatcher.visibilityChangeWatcher=function(){cvox.ChromeVoxEventWatcher.initialVisibility=!document.webkitHidden};cvox.ChromeVoxEventWatcher.getInitialVisibility=function(){var a=cvox.ChromeVoxEventWatcher.initialVisibility;cvox.ChromeVoxEventWatcher.initialVisibility=!1;return a};
cvox.ChromeVoxEventWatcher.speakLiveRegion_=function(a,b){var c=cvox.ChromeVoxEventWatcher.queueMode_();!a&&c==cvox.AbstractTts.QUEUE_MODE_FLUSH&&(c=cvox.AbstractTts.QUEUE_MODE_QUEUE);var d=new cvox.NavigationSpeaker;d.speakDescriptionArray(b,c,null)};
cvox.ChromeVoxEventWatcher.subtreeModifiedHandler=function(a){var b=(new Date).getTime();if(cvox.ChromeVoxEventWatcher.lastSubtreeModifiedEventBurstTime_+cvox.ChromeVoxEventWatcher.SUBTREE_MODIFIED_BURST_DURATION_>b){if(cvox.ChromeVoxEventWatcher.subtreeModifiedEventsCount_++,cvox.ChromeVoxEventWatcher.subtreeModifiedEventsCount_>cvox.ChromeVoxEventWatcher.SUBTREE_MODIFIED_BURST_COUNT_LIMIT_)return}else cvox.ChromeVoxEventWatcher.lastSubtreeModifiedEventBurstTime_=b,cvox.ChromeVoxEventWatcher.subtreeModifiedEventsCount_=
1;if(a&&a.target){a=a.target;a=cvox.AriaUtil.getLiveRegions(a);for(b=0;b<a.length&&b<cvox.ChromeVoxEventWatcher.MAX_LIVE_REGIONS_;b++)cvox.LiveRegionsDeprecated.updateLiveRegion(a[b],cvox.ChromeVoxEventWatcher.queueMode_(),!1)}};
cvox.ChromeVoxEventWatcher.setUpTextHandler_=function(){var a=document.activeElement;a&&(a.hasAttribute&&"true"==a.getAttribute("aria-hidden")&&"true"!=a.getAttribute("chromevoxignoreariahidden"))&&(a=null);if(a!=cvox.ChromeVoxEventWatcher.currentTextControl){cvox.ChromeVoxEventWatcher.currentTextControl&&(cvox.ChromeVoxEventWatcher.currentTextControl.removeEventListener("input",cvox.ChromeVoxEventWatcher.changeEventWatcher,!1),cvox.ChromeVoxEventWatcher.currentTextControl.removeEventListener("click",
cvox.ChromeVoxEventWatcher.changeEventWatcher,!1),cvox.ChromeVoxEventWatcher.textMutationObserver_&&(cvox.ChromeVoxEventWatcher.textMutationObserver_.disconnect(),cvox.ChromeVoxEventWatcher.textMutationObserver_=null));cvox.ChromeVoxEventWatcher.currentTextControl=null;cvox.ChromeVoxEventWatcher.currentTextHandler=null;cvox.ChromeVoxEventWatcher.previousTextHandlerState=null;if(null==a)return!1;if(a.constructor==HTMLInputElement&&cvox.DomUtil.isInputTypeText(a)&&cvox.ChromeVoxEventWatcher.shouldEchoKeys)cvox.ChromeVoxEventWatcher.currentTextControl=
a,cvox.ChromeVoxEventWatcher.currentTextHandler=new cvox.ChromeVoxEditableHTMLInput(a,cvox.ChromeVox.tts);else if(a.constructor==HTMLTextAreaElement&&cvox.ChromeVoxEventWatcher.shouldEchoKeys)cvox.ChromeVoxEventWatcher.currentTextControl=a,cvox.ChromeVoxEventWatcher.currentTextHandler=new cvox.ChromeVoxEditableTextArea(a,cvox.ChromeVox.tts);else if(a.isContentEditable||"textbox"==a.getAttribute("role"))cvox.ChromeVoxEventWatcher.currentTextControl=a,cvox.ChromeVoxEventWatcher.currentTextHandler=new cvox.ChromeVoxEditableContentEditable(a,
cvox.ChromeVox.tts);cvox.ChromeVoxEventWatcher.currentTextControl&&(cvox.ChromeVoxEventWatcher.currentTextControl.addEventListener("input",cvox.ChromeVoxEventWatcher.changeEventWatcher,!1),cvox.ChromeVoxEventWatcher.currentTextControl.addEventListener("click",cvox.ChromeVoxEventWatcher.changeEventWatcher,!1),window.WebKitMutationObserver&&(cvox.ChromeVoxEventWatcher.textMutationObserver_=new WebKitMutationObserver(cvox.ChromeVoxEventWatcher.onTextMutation),cvox.ChromeVoxEventWatcher.textMutationObserver_.observe(cvox.ChromeVoxEventWatcher.currentTextControl,
{childList:!0,attributes:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1})),cvox.ChromeVoxEventSuspender.areEventsSuspended()||cvox.ChromeVox.navigationManager.updateSel(cvox.CursorSelection.fromNode(cvox.ChromeVoxEventWatcher.currentTextControl)));return null!=cvox.ChromeVoxEventWatcher.currentTextHandler}};cvox.ChromeVoxEventWatcher.handleTextChanged_=function(a){if(cvox.ChromeVoxEventWatcher.currentTextHandler){var b=cvox.ChromeVoxEventWatcher.currentTextHandler;b.update(a);return!0}return!1};
cvox.ChromeVoxEventWatcher.onTextMutation=function(){cvox.ChromeVoxEventWatcher.currentTextHandler&&window.setTimeout(function(){cvox.ChromeVoxEventWatcher.handleTextChanged_(!1)},cvox.ChromeVoxEventWatcher.MAX_WAIT_TIME_MS_)};
cvox.ChromeVoxEventWatcher.handleControlChanged=function(a){var b=cvox.DomUtil.getControlValueAndStateString(a),c=cvox.DomUtil.getSurroundingControl(a),d=!1;if(a!=cvox.ChromeVoxEventWatcher.lastFocusedNode&&(null==c||c!=cvox.ChromeVoxEventWatcher.lastFocusedNode))cvox.ChromeVoxEventWatcher.setLastFocusedNode_(a);else if(b==cvox.ChromeVoxEventWatcher.lastFocusedNodeValue)return;cvox.ChromeVoxEventWatcher.lastFocusedNodeValue=b;if("checkbox"==a.type||"radio"==a.type)d=!0,a.checked?cvox.ChromeVox.earcons.playEarcon(cvox.AbstractEarcons.CHECK_ON):
cvox.ChromeVox.earcons.playEarcon(cvox.AbstractEarcons.CHECK_OFF);"SELECT"==a.tagName&&(d=!0);if("INPUT"==a.tagName)switch(a.type){case "color":case "datetime":case "datetime-local":case "date":case "month":case "range":case "week":d=!0}a.hasAttribute&&a.hasAttribute("role")&&(d=!0);null!=c&&(c!=a&&document.activeElement==a)&&(cvox.ApiImplementation.syncToNode(a,!0,cvox.AbstractTts.QUEUE_MODE_FLUSH),d=!1);d&&!cvox.ChromeVoxEventSuspender.areEventsSuspended()&&(cvox.ChromeVox.tts.speak(b,cvox.ChromeVoxEventWatcher.queueMode_(),
null),cvox.ChromeVox.navigationManager.getBraille().write())};
cvox.ChromeVoxEventWatcher.handleControlAction=function(a){if(!cvox.ChromeVox.isActive)return!1;var b=a.target;if("SELECT"==b.tagName&&1>=b.size&&(13==a.keyCode||32==a.keyCode))return a.preventDefault(),a.stopPropagation(),!0;if("INPUT"==b.tagName&&"range"==b.type){var c=parseFloat(b.value),d;b.step&&0<b.step?d=b.step:b.min&&b.max?(d=b.max-b.min,d=2<d&&31>d?1:(b.max-b.min)/10):d=1;if(37==a.keyCode||38==a.keyCode)c-=d;else if(39==a.keyCode||40==a.keyCode)c+=d;b.max&&c>b.max&&(c=b.max);b.min&&c<b.min&&
(c=b.min);b.value=c}return!1};
cvox.ChromeVoxEventWatcher.handleDialogFocus=function(a){for(;a;){if(a.hasAttribute){var b=a.getAttribute("role");if("dialog"==b||"alertdialog"==b)break}a=a.parentElement}if(a==cvox.ChromeVox.navigationManager.currentDialog)return!1;if(cvox.ChromeVox.navigationManager.currentDialog&&!a){if(!cvox.DomUtil.isDescendantOfNode(document.activeElement,cvox.ChromeVox.navigationManager.currentDialog))return cvox.ChromeVox.navigationManager.currentDialog=null,cvox.ChromeVox.tts.speak(cvox.ChromeVox.msgs.getMsg("exiting_dialog"),cvox.AbstractTts.QUEUE_MODE_FLUSH,
cvox.AbstractTts.PERSONALITY_ANNOTATION),!0}else if(a)return cvox.ChromeVox.navigationManager.currentDialog=a,cvox.ChromeVox.tts.speak(cvox.ChromeVox.msgs.getMsg("entering_dialog"),cvox.AbstractTts.QUEUE_MODE_FLUSH,cvox.AbstractTts.PERSONALITY_ANNOTATION),a=cvox.DescriptionUtil.getFullDescriptionsFromChildren(null,a),b=new cvox.NavigationSpeaker,b.speakDescriptionArray(a,cvox.AbstractTts.QUEUE_MODE_QUEUE,null),!0;return!1};
cvox.ChromeVoxEventWatcherUtil.shouldWaitToProcess=function(a,b,c){a=c-a;b=c-b;return a<cvox.ChromeVoxEventWatcher.WAIT_TIME_MS_&&b<cvox.ChromeVoxEventWatcher.MAX_WAIT_TIME_MS_};cvox.ChromeVoxEventWatcher.queueMode_=function(){return cvox.ChromeVoxEventWatcher.processing_?cvox.AbstractTts.QUEUE_MODE_QUEUE:cvox.AbstractTts.QUEUE_MODE_FLUSH};
cvox.ChromeVoxEventWatcher.processQueue_=function(){if(0!=cvox.ChromeVoxEventWatcher.events_.length){var a=cvox.ChromeVoxEventWatcher.events_,b=-1,c=0,d,e;for(e=0;d=a[e];e++)"focus"==d.type&&(b=e,c=d.timeStamp);cvox.ChromeVoxEventWatcher.events_=[];for(e=0;d=a[e];e++){var f=a[e-1]||{};(e>=b||"LiveRegion"==d.type||"DOMSubtreeModified"==d.type)&&("focus"!=f.type||"change"!=d.type)&&cvox.ChromeVoxEventWatcher.events_.push(d)}cvox.ChromeVoxEventWatcher.events_.sort(function(a,b){return"LiveRegion"!=b.type&&
"LiveRegion"==a.type||"DOMSubtreeModified"!=b.type&&"DOMSubtreeModified"==a.type?1:-1});a=(new Date).getTime();if(0<=b&&cvox.ChromeVoxEventWatcherUtil.shouldWaitToProcess(c,cvox.ChromeVoxEventWatcher.firstUnprocessedEventTime,a))window.setTimeout(cvox.ChromeVoxEventWatcher.processQueue_,cvox.ChromeVoxEventWatcher.WAIT_TIME_MS_);else{for(e=0;d=cvox.ChromeVoxEventWatcher.events_[e];e++)cvox.ChromeVoxEventWatcher.handleEvent_(d),cvox.ChromeVoxEventWatcher.processing_=!0;cvox.ChromeVoxEventWatcher.processing_=
!1;cvox.ChromeVoxEventWatcher.events_=[];cvox.ChromeVoxEventWatcher.firstUnprocessedEventTime=-1;cvox.ChromeVoxEventWatcher.queueProcessingScheduled_=!1;cvox.ChromeVoxEventWatcher.maybeCallReadyCallbacks_()}}};
cvox.ChromeVoxEventWatcher.handleEvent_=function(a){switch(a.type){case "keydown":cvox.ChromeVoxEventWatcher.setUpTextHandler_();if(cvox.ChromeVoxEventWatcher.currentTextControl&&(cvox.ChromeVoxEventWatcher.handleTextChanged_(!0),cvox.ChromeVoxEventWatcher.currentTextHandler&&cvox.ChromeVoxEventWatcher.currentTextHandler.lastChangeDescribed))break;cvox.ChromeVoxEventWatcher.handleControlChanged(document.activeElement);break;case "keypress":cvox.ChromeVoxEventWatcher.setUpTextHandler_();break;case "focus":cvox.ChromeVoxEventWatcher.focusHandler(a);
break;case "blur":cvox.ChromeVoxEventWatcher.setUpTextHandler_();break;case "change":cvox.ChromeVoxEventWatcher.changeHandler(a);break;case "select":cvox.ChromeVoxEventWatcher.setUpTextHandler_();break;case "LiveRegion":cvox.ChromeVoxEventWatcher.speakLiveRegion_(a.assertive,a.navDescriptions);break;case "DOMSubtreeModified":cvox.ChromeVoxEventWatcher.subtreeModifiedHandler(a)}};
cvox.ChromeVoxEventWatcher.setUpTimeHandler_=function(){var a=document.activeElement;a&&(a.hasAttribute&&"true"==a.getAttribute("aria-hidden")&&"true"!=a.getAttribute("chromevoxignoreariahidden"))&&(a=null);cvox.ChromeVoxEventWatcher.currentTimeHandler=a.constructor==HTMLInputElement&&a.type&&"time"==a.type?new cvox.ChromeVoxHTMLTimeWidget(a,cvox.ChromeVox.tts):null;return null!=cvox.ChromeVoxEventWatcher.currentTimeHandler};
cvox.ChromeVoxEventWatcher.setUpMediaHandler_=function(){var a=document.activeElement;a&&(a.hasAttribute&&"true"==a.getAttribute("aria-hidden")&&"true"!=a.getAttribute("chromevoxignoreariahidden"))&&(a=null);cvox.ChromeVoxEventWatcher.currentMediaHandler=a.constructor==HTMLVideoElement||a.constructor==HTMLAudioElement?new cvox.ChromeVoxHTMLMediaWidget(a,cvox.ChromeVox.tts):null;return null!=cvox.ChromeVoxEventWatcher.currentMediaHandler};cvox.InitialSpeech={};window.INJECTED_AFTER_LOAD||(window.INJECTED_AFTER_LOAD=!1);
cvox.InitialSpeech.speak=function(){var a=window.INJECTED_AFTER_LOAD;cvox.ChromeVox.isActive||(a=!0);var b=cvox.AbstractTts.QUEUE_MODE_FLUSH;window.top==window?document.title&&!a&&(cvox.ChromeVox.tts.speak(document.title,0),b=cvox.AbstractTts.QUEUE_MODE_QUEUE):b=cvox.AbstractTts.QUEUE_MODE_QUEUE;cvox.LiveRegions.init(new Date,b,a)&&(b=cvox.AbstractTts.QUEUE_MODE_QUEUE);if(document.hasFocus()){var c=document.activeElement;cvox.DomUtil.isControl(c)&&(cvox.ChromeVox.navigationManager.updateSel(cvox.CursorSelection.fromNode(c)),
cvox.ChromeVox.navigationManager.setFocus(),a||(a=cvox.DescriptionUtil.getControlDescription(c),a.speak(b)))}};cvox.PdfProcessor={};
cvox.PdfProcessor.processEmbeddedPdfs=function(){if("#original"!=window.location.hash)for(var a=document.querySelectorAll('embed[type="application/pdf"]'),b=0;b<a.length;b++){var c=a[b];if("function"===typeof c.accessibility){var d=c.accessibility(),e=cvox.ChromeVoxJSON.parse(d);if(e.loaded)if(e.copyable){var f=document.createElement("DIV"),d=document.createElement("DIV");d.style.position="relative";d.style.background="white";d.style.margin="20pt";d.style.padding="20pt";d.style.border="1px solid #000";
var g=c.src.substr(c.src.lastIndexOf("/")+1);document.title=g;g=cvox.ChromeVox.msgs.getMsg("pdf_header",[g,c.src+"#original"]);d.innerHTML=g;g=d.getElementsByTagName("a")[0];g.addEventListener("click",function(){window.location.href=c.src+"#original";window.location.reload()},!0);f.appendChild(d);f.style.position="relative";f.style.background="#CCC";f.style.paddingTop="1pt";f.style.paddingBottom="1pt";f.style.width="100%";f.style.minHeight="100%";var h=function(a){var b=c.accessibility(a),d=cvox.ChromeVoxJSON.parse(b),
b=document.createElement("DIV"),g=document.createElement("A");g.name="page"+a;b.style.position="relative";b.style.background="white";b.style.margin="auto";b.style.marginTop="20pt";b.style.marginBottom="20pt";b.style.height=d.height+"pt";b.style.width=d.width+"pt";b.style.boxShadow="0pt 0pt 10pt #333";for(var d=d.textBox,m=0;m<d.length;m++){var k=d[m],q=document.createElement("Span");q.style.position="absolute";q.style.left=k.left+"pt";q.style.top=k.top+"pt";q.style.fontSize=0.8*k.height+"pt";for(var s=
0;s<k.textNodes.length;s++){var r=k.textNodes[s];if("text"==r.type)q.appendChild(document.createTextNode(r.text));else if("url"==r.type){var p=document.createElement("A");p.href=r.url;p.appendChild(document.createTextNode(r.text));q.appendChild(p)}}b.appendChild(q)}f.appendChild(g);f.appendChild(b);a<e.numberOfPages-1?window.setTimeout(function(){h(a+1)},0):(c.style.display="none",c.parentNode.appendChild(f),cvox.ChromeVox.navigationManager.reset())};window.setTimeout(function(){h(0)},0)}else cvox.ChromeVox.tts.speak("Unable to access copy-protected PDF. Skipping.");
else window.setTimeout(cvox.PdfProcessor.processEmbeddedPdfs,100)}}};cvox.ChromeHost=function(){this.gotPrefsAtLeastOnce_=!1};goog.inherits(cvox.ChromeHost,cvox.AbstractHost);
cvox.ChromeHost.prototype.init=function(){var a=this,b=function(b){b.keyBindings&&cvox.ChromeVoxKbHandler.loadKeyToFunctionsTable(b.keyBindings);if(b.prefs){b=b.prefs;cvox.ChromeVoxEditableTextBase.useIBeamCursor="true"==b.useIBeamCursor;cvox.ChromeVoxEventWatcher.focusFollowsMouse="true"==b.focusFollowsMouse;cvox.ChromeVox.version=b.version;a.activateOrDeactivateChromeVox("true"==b.active);a.activateOrDeactivateStickyMode("true"==b.sticky);a.gotPrefsAtLeastOnce_||cvox.InitialSpeech.speak();a.gotPrefsAtLeastOnce_=
!0;cvox.ChromeVox.lens&&("true"==b.lensVisible&&!cvox.ChromeVox.lens.isLensDisplayed()&&cvox.ChromeVox.lens.showLens(!0),"false"==b.lensVisible&&cvox.ChromeVox.lens.isLensDisplayed()&&cvox.ChromeVox.lens.showLens(!1),cvox.ChromeVox.lens.setAnchoredLens("true"==b.lensAnchored));cvox.ChromeVox.verbosity="false"==b.useVerboseMode?cvox.VERBOSITY_BRIEF:cvox.VERBOSITY_VERBOSE;b.cvoxKey&&(cvox.ChromeVox.modKeyStr=b.cvoxKey);var d=b.siteSpecificScriptLoader!=cvox.ApiImplementation.siteSpecificScriptLoader||
b.siteSpecificScriptBase!=cvox.ApiImplementation.siteSpecificScriptBase;cvox.ApiImplementation.siteSpecificScriptLoader=b.siteSpecificScriptLoader;cvox.ApiImplementation.siteSpecificScriptBase=b.siteSpecificScriptBase;d&&cvox.ApiImplementation.init();b.filterMap&&cvox.ChromeVox.navigationManager.getFilteredWalker().reinitialize(b.filterMap)}};cvox.ExtensionBridge.addMessageListener(b);cvox.ExtensionBridge.addMessageListener(function(a){var b=a.message;"USER_COMMAND"==b&&(a=a.command,cvox.ChromeVoxUserCommands.commands[a]())});
cvox.ExtensionBridge.send({target:"Prefs",action:"getPrefs"});this.hidePageFromNativeScreenReaders()};cvox.ChromeHost.prototype.reinit=function(){cvox.ExtensionBridge.init()};
cvox.ChromeHost.prototype.hidePageFromNativeScreenReaders=function(){var a=document.body.getAttribute("aria-hidden");"true"==a&&(cvox.ChromeVox.entireDocumentIsHidden=!0);if(0==navigator.platform.indexOf("Win")||0==navigator.platform.indexOf("Mac"))cvox.ChromeVox.entireDocumentIsHidden||(document.body.setAttribute("aria-hidden",!0),document.body.setAttribute("chromevoxignoreariahidden",!0)),a=document.body.getAttribute("role"),document.body.setAttribute("role","application"),document.body.setAttribute("chromevoxoriginalrole",
a)};cvox.ChromeHost.prototype.unhidePageFromNativeScreenReaders=function(){if(0==navigator.platform.indexOf("Win")||0==navigator.platform.indexOf("Mac"))""!=document.body.getAttribute("chromevoxoriginalrole")?document.body.setAttribute("role",document.body.getAttribute("chromevoxoriginalrole")):document.body.removeAttribute("role"),cvox.ChromeVox.entireDocumentIsHidden||(document.body.removeAttribute("aria-hidden"),document.body.removeAttribute("chromevoxignoreariahidden")),document.body.removeAttribute("chromevoxoriginalrole")};
cvox.ChromeHost.prototype.onPageLoad=function(){cvox.PdfProcessor.processEmbeddedPdfs();var a=document.getElementsByTagName("VIDEO")[0];a&&a.currentSrc==document.location&&(document.location=window.chrome.extension.getURL("chromevox/background/mediaplayer.html#"+a.currentSrc));cvox.ExtensionBridge.addDisconnectListener(goog.bind(function(){cvox.ChromeVox.isActive=!1;cvox.ChromeVoxEventWatcher.cleanup(window);cvox.ChromeVox.navigationManager.reset();this.unhidePageFromNativeScreenReaders()},this))};
cvox.ChromeHost.prototype.sendToBackgroundPage=function(a){cvox.ExtensionBridge.send(a)};cvox.ChromeHost.prototype.getApiSrc=function(){return this.getFileSrc("chromevox/injected/api.js")};cvox.ChromeHost.prototype.getFileSrc=function(a){return window.chrome.extension.getURL(a)};
cvox.ChromeHost.prototype.activateOrDeactivateChromeVox=function(a){if(a!=cvox.ChromeVox.isActive){cvox.ChromeVox.isActive=a;cvox.ChromeVox.navigationManager.showOrHideIndicator(a);cvox.ChromeVoxEventWatcher.cleanup(window);cvox.ChromeVoxEventWatcher.init(window);if(document.activeElement){var b=document.hasFocus();cvox.ApiImplementation.syncToNode(document.activeElement,b)}else cvox.ChromeVox.navigationManager.updateIndicator();a?this.hidePageFromNativeScreenReaders():this.unhidePageFromNativeScreenReaders()}};
cvox.ChromeHost.prototype.activateOrDeactivateStickyMode=function(a){cvox.ChromeVox.isStickyOn=a};cvox.ChromeHost.prototype.canShowLens=function(){return window.top==window};cvox.HostFactory.hostConstructor=cvox.ChromeHost;cvox.ChromeMsgs=function(){};goog.inherits(cvox.ChromeMsgs,cvox.AbstractMsgs);cvox.ChromeMsgs.NAMESPACE_="chromevox_";cvox.ChromeMsgs.prototype.getLocale=function(){return chrome.i18n.getMessage("locale")};cvox.ChromeMsgs.prototype.getMsg=function(a,b){var c=chrome.i18n.getMessage(cvox.ChromeMsgs.NAMESPACE_+a,b);if(void 0==c||""==c)throw Error("Invalid ChromeVox message id: "+a);return c};cvox.ChromeMsgs.prototype.getNumber=function(a){return""+a};cvox.HostFactory.msgsConstructor=cvox.ChromeMsgs;cvox.ChromeTts=function(){cvox.AbstractTts.call(this);this.addBridgeListener()};goog.inherits(cvox.ChromeTts,cvox.AbstractTts);cvox.ChromeTts.callId=1;cvox.ChromeTts.functionMap={};
cvox.ChromeTts.prototype.speak=function(a,b,c){c||(c={});c.lang=cvox.ChromeVox.msgs.getLocale();switch(c.lang){case "de":c.lang="de-DE";break;case "es":c.lang="es-ES";break;case "fr":c.lang="fr-FR";break;case "it":c.lang="it-IT";break;case "en":c.lang="en-US"}cvox.ChromeTts.superClass_.speak.call(this,a,b,c);cvox.ExtensionBridge.send(this.createMessageForProperties_(a,b,c))};cvox.ChromeTts.prototype.isSpeaking=function(){cvox.ChromeTts.superClass_.isSpeaking.call(this);return!1};
cvox.ChromeTts.prototype.stop=function(){cvox.ChromeTts.superClass_.stop.call(this);cvox.ExtensionBridge.send({target:"TTS",action:"stop"})};cvox.ChromeTts.prototype.increaseOrDecreaseProperty=function(a,b){cvox.ExtensionBridge.send({target:"TTS",action:"increaseOrDecrease",property:a,increase:b})};cvox.ChromeTts.prototype.addBridgeListener=function(){cvox.ExtensionBridge.addMessageListener(function(a){var b=a.message;"TTS_CALLBACK"==b&&(a=a.id,b=cvox.ChromeTts.functionMap[a],void 0!=b&&(b(),delete cvox.ChromeTts.functionMap[a]))})};
cvox.ChromeTts.prototype.createMessageForProperties_=function(a,b,c){a={target:"TTS",action:"speak",text:a,queueMode:b,properties:c};void 0!=c.startCallback&&(cvox.ChromeTts.functionMap[cvox.ChromeTts.callId]=c.startCallback,a.startCallbackId=cvox.ChromeTts.callId++);void 0!=c.endCallback&&(cvox.ChromeTts.functionMap[cvox.ChromeTts.callId]=c.endCallback,a.endCallbackId=cvox.ChromeTts.callId++);return a};cvox.HostFactory.ttsConstructor=cvox.ChromeTts;cvox.AbstractLens=function(){};cvox.AbstractLens.prototype.showLens=function(){};cvox.AbstractLens.prototype.isLensDisplayed=function(){};cvox.AbstractLens.prototype.setAnchoredLens=function(){};cvox.AbstractLens.prototype.setMultiplier=function(){};cvox.Lens=function(){this.padding_=5;this.maxBubbleWidth_=700;this.isLensDisplayed_=!1;this.isCentered=!0;this.multiplier=1.5;this.textColor="#FFFFFF";this.bgColor="#000000";this.isAnchored=!0;this.isAtBottom=!1;this.maxHistory=20;this.lens=cvox.Lens.activeDoc.createElement("span");this.lensContent_=document.createElement("div");this.initializeLens_()};goog.inherits(cvox.Lens,cvox.AbstractLens);cvox.Lens.EL_ID="chromeVisBackground2LensDiv";cvox.Lens.CENTER_ATTRB="data-isCentered";
cvox.Lens.MULT_ATTRB="data-textMag";cvox.Lens.TXT_COLOR_ATTRB="data-textColor";cvox.Lens.BG_COLOR_ATTRB="data-bgColor";cvox.Lens.ANCHOR_ATTRB="data-isAnchored";cvox.Lens.DOWN_ARROW_IMG="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sIFxETCtVNA2AAAADfSURBVEjH7dYhbsMwFAbgzwNFRSO9wu4xEtIbjPQUJYW95NDAwEBASVHBPPIiRWuWJqvVSpWf9EAc25/0lF9Kyjm7Rz25U1X48WE557PGCosC1y+wGjT+gOEN+yvQfdxhLgwNPrCdAW7jTDM61QswPKPFAZsRcBN72jjjWhiW+ELGJ9a9d+tYy7FnOek7mgh3eBtAxnt099wOoSXgbuzHHtb18fd4/wuPxekFpx56irWbxOkV39HNreO0i65xqnEqAs+NU1F4apxG4TQEpZSm4LteXi/CZ0b9va1whUvVD/4KNUmuLLOGAAAAAElFTkSuQmCC)";
cvox.Lens.UP_ARROW_IMG="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sIFxETL55J1ycAAADYSURBVEjH7ZY9CoNAEEbfhmBlZeMVco80Nt4gjaewsfSSqVKkSGGRxsoik2YE8S+r7CKE/WAQZ2f3ofJAIyIckRMHJYAD2FvOc01jjM3eSq/1r8FZZUVkUha5Ah+tzAY8YewAX4AOEK1Oe17BCdAOoH21uuYFHAPNAHbX6u8bnXEKjoGXAp5APljLtSc6E7sCJ/o0b6BY+QyFzjTj174HnAEPoFzQqZrpl7on2wu+rThqo1OtZ2wCp0DkQKcISINOQaetOi3Fq042ca7TlizqZMJ/dQD/HfgLITIyT/EcAMMAAAAASUVORK5CYII=)";
cvox.Lens.PLUS_IMG="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sIFxEULqYPcXYAAABdSURBVEjHY/z//z/DQAAmhgECoxYPf4tZcEkwMjIS0lsOpTvxKcKVaxhxShC2GKaRkRyLRxPXqMUjy2IXaJbBhZGzFS7sMuh8PFqAjFo8avHQt5hxtF09avGwsxgA9Zcmqe0ELNkAAAAASUVORK5CYII=)";cvox.Lens.MINUS_IMG="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sIFxEVDGp0AdMAAAA9SURBVEjH7dWxCQAwDANBK2T/lT8bBFzZxasWHKoUoCZyaijCwsLCwvvh2ykn+V4ZkPWL4x8LCwsLC6+DHwVvCjekahO+AAAAAElFTkSuQmCC)";
cvox.Lens.CROSS_IMG="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sIFxEVKrh5hC4AAADDSURBVEjH7ZbRDcMgDETvugErsAKzdIWswApdgVm6QlfIClnB/TGSG6UqoKB81CdZCCF4PoMlKCK4QjdcJAc72MF/AiaZSQrJjWQkiV18rDeRReRnqJ4AREerCGDTtXvzmR3gYADZgGtCjy4zHWCoI9EEoiYgAF6a2DQw1FmF1Qqk7usbAAcAqwL3ZW8Gn9FOcWhXp+OgJa5O1yPXM0pdX3DReTL3vMwCly99vJiXns4Gl6O2McoW3nIm/bPnYAc7eFRvJmkZLrREq8AAAAAASUVORK5CYII=)";
cvox.Lens.activeDoc=window.document;cvox.Lens.prototype.initializeLens_=function(){cvox.Lens.activeDoc&&cvox.Lens.activeDoc.body&&(this.initializeLensCSS_(),this.lens.style.display="none",cvox.Lens.activeDoc.body.appendChild(this.lens),cvox.Lens.activeDoc.addEventListener("scroll",goog.bind(function(){this&&this.updateAnchorLens()},this),!0),this.updateAnchorLens())};cvox.Lens.prototype.setMultiplier=function(a){this.multiplier=a};
cvox.Lens.prototype.showLens=function(a){a?this.lens.style.display="block":this.lens.style.display="none";(this.isLensDisplayed_=a)?this.updateText():document.body.style.marginTop=0};cvox.Lens.prototype.isLensDisplayed=function(){return this.isLensDisplayed_};
cvox.Lens.prototype.initializeLensCSS_=function(){this.lens.style.backgroundColor=this.bgColor;this.lens.style.borderColor="#000000";this.lens.style.borderWidth="medium";this.lens.style.borderStyle="groove";this.lens.style.position="absolute";this.lens.style.zIndex=1E11;this.lens.style.minHeight="5px";this.lens.style.maxHeight=Math.round(window.innerHeight/4)+55+"px";this.lens.style.boxShadow="1px 1px 2px #808080";this.lens.setAttribute("aria-hidden","true")};
cvox.Lens.prototype.setAnchoredLens=function(a){this.isAnchored=a;this.isLensDisplayed_&&!this.isAnchored&&(document.body.style.marginTop=0)};
cvox.Lens.prototype.updateAnchorLens=function(){this.isAtBottom?(this.lens.style.top="",this.lens.style.bottom=5-window.scrollY+"px"):(this.lens.style.bottom="",this.lens.style.top=window.scrollY+"px");this.lens.style.minWidth=window.innerWidth-50+"px";this.lens.style.maxWidth=window.innerWidth-50+"px";this.lens.style.left="10px";this.lens.style.right="100px";var a=document.body,b=window.getComputedStyle(this.lens,null).height,b=parseInt(b.substr(0,b.length-2),10)+20;this.isAtBottom?(a.style.marginBottom=
b+"px",a.style.marginTop="0px"):(a.style.marginTop=b+"px",a.style.marginBottom="0px")};
cvox.Lens.prototype.updateBubbleLens=function(){var a=window.getSelection(),b=cvox.SelectionUtil.findSelPosition(a),c;c=b[0];b=b[1];this.lens.style.minWidth=0;var d;if(this.isCentered){for(d=a.getRangeAt(0).commonAncestorContainer;!d.offsetWidth;)d=d.parentNode;a=Math.min(this.maxBubbleWidth_,d.offsetWidth)}else a=Math.min(this.maxBubbleWidth_,document.body.clientWidth-b-16);this.lens.style.maxWidth=a+"px";if(this.lens.firstChild.scrollWidth>a)d=this.lens.firstChild.scrollWidth-a,this.lens.style.maxWidth=
this.lens.firstChild.scrollWidth+"px",this.lens.style.left=d<b?b-d+"px":"30px";else if(this.isCentered){b=0;a=d;if(a.offsetParent){b=a.offsetLeft;for(a=a.offsetParent;null!==a;)b+=a.offsetLeft,a=a.offsetParent}this.lens.style.left=Math.ceil(b+d.offsetWidth/2-this.lens.firstChild.scrollWidth/2)+"px"}else this.lens.style.left=b+"px";this.lens.style.right="auto";d=window.getComputedStyle(this.lens,null).height;d=parseInt(d.substr(0,d.length-2),10)+20;c-=d;this.lens.style.top=0>c?"5px":c+"px"};
cvox.Lens.prototype.setLensContent=function(a){if(this.isLensDisplayed_){cvox.Lens.activeDoc=window.document;cvox.Lens.activeDoc.body.removeChild(this.lens);this.lens=cvox.Lens.activeDoc.createElement("span");this.initializeLensCSS_();for(cvox.Lens.activeDoc.body.appendChild(this.lens);this.lens.firstChild;)this.lens.removeChild(this.lens.firstChild);a.style.fontFamily="Verdana, Arial, Helvetica, sans-serif";a.style.fontWeight="normal";a.style.fontStyle="normal";a.style.color=this.textColor;a.style.textDecoration=
"none";a.style.textAlign="left";a.style.lineHeight=1.25;a.style.maxHeight=Math.round(window.innerHeight/4)+"px";a.style.overflowY="scroll";this.lens.appendChild(a);a.scrollTop=a.scrollHeight;a=document.createElement("hr");this.lens.appendChild(a);a=document.createElement("button");a.onclick=goog.bind(function(){this.changeLocation();this.style.backgroundImage==cvox.Lens.DOWN_ARROW_IMG?this.style.backgroundImage=cvox.Lens.UP_ARROW_IMG:this.style.backgroundImage=cvox.Lens.DOWN_ARROW_IMG;this.style.backgroundColor=
"#888"},this);a.style.backgroundImage=this.isAtBottom?cvox.Lens.UP_ARROW_IMG:cvox.Lens.DOWN_ARROW_IMG;this.setButtonStyle(a);this.lens.appendChild(a);a=document.createElement("button");a.onclick=goog.bind(function(){this.increaseFontSize()},this);a.style.backgroundImage=cvox.Lens.PLUS_IMG;this.setButtonStyle(a);this.lens.appendChild(a);a=document.createElement("button");a.onclick=goog.bind(function(){this.decreaseFontSize()},this);a.style.backgroundImage=cvox.Lens.MINUS_IMG;this.setButtonStyle(a);
this.lens.appendChild(a);a=document.createElement("button");a.onclick=function(){this.parentNode.style.display="none";document.body.style.marginTop="0px";document.body.style.marginBottom="0px"};a.style.backgroundImage=cvox.Lens.CROSS_IMG;this.setButtonStyle(a);this.lens.appendChild(a);this.magnifyText_();this.padText_();this.isAnchored?this.updateAnchorLens():this.updateBubbleLens()}};
cvox.Lens.prototype.setButtonStyle=function(a){a.onmouseover=function(){this.style.backgroundColor="#ccc"};a.onmouseout=function(){this.style.backgroundColor="#888"};a.style.backgroundColor="#888";a.style.backgroundPosition="center";a.style.border="0px";a.style.width="30px";a.style.height="30px";a.style.cursor="pointer";a.style.marginRight="5px"};cvox.Lens.prototype.decreaseFontSize=function(){1<this.multiplier&&(this.multiplier/=1.1);this.magnifyText_();this.updateAnchorLens()};
cvox.Lens.prototype.increaseFontSize=function(){5>this.multiplier&&(this.multiplier*=1.1);this.magnifyText_();this.updateAnchorLens()};cvox.Lens.prototype.changeLocation=function(){this.isAtBottom=!this.isAtBottom;this.updateAnchorLens()};
cvox.Lens.prototype.updateText=function(){if(this.isLensDisplayed_){var a=window.getSelection(),a=a.toString();null==a&&(a="");for(var b=document.createElement("div"),c="",d=document.createElement("div"),e=0;e<a.length;e++)10==a.charCodeAt(e)?(d.textContent=c,b.appendChild(d),d=document.createElement("div"),c=""):c+=a.charAt(e);d.textContent=c;b.appendChild(d);this.setLensContent(b)}};
cvox.Lens.prototype.magnifyText_=function(){var a=100*this.multiplier+"%";if(this.lens.firstChild&&this.lens.firstChild.hasChildNodes())for(var b=this.lens.firstChild.childNodes,c=0;c<b.length;c++)b[c].style.fontSize=a};cvox.Lens.prototype.padText_=function(){0>this.padding_||(this.lens.style.padding_=this.padding_+"px")};
cvox.Lens.prototype.speak=function(a,b,c){c||(c={});c.lang=cvox.ChromeVox.msgs.getLocale();b==cvox.AbstractTts.QUEUE_MODE_FLUSH&&(b=document.createElement("hr"),this.lensContent_.appendChild(b));for(;this.lensContent_.childNodes.length>2*this.maxHistory;)b=this.lensContent_.childNodes[0],this.lensContent_.removeChild(b);b=document.createElement("span");b.innerText=a;b.style.marginLeft="0.5em !important";c&&c[cvox.AbstractTts.COLOR]&&(b.style.color=c[cvox.AbstractTts.COLOR]+" !important");c&&c[cvox.AbstractTts.FONT_WEIGHT]&&
(b.style.fontWeight=c[cvox.AbstractTts.FONT_WEIGHT]+" !important");this.lensContent_.appendChild(b);this.setLensContent(this.lensContent_)};cvox.Lens.prototype.isSpeaking=function(){return!1};cvox.Lens.prototype.stop=function(){};cvox.Lens.prototype.increaseOrDecreaseProperty=function(){};cvox.Serializer=function(){};cvox.Serializer.prototype.storeOn=function(a){cvox.ChromeVox.storeOn(a);cvox.ChromeVoxEventWatcher.storeOn(a)};cvox.Serializer.prototype.readFrom=function(a){cvox.ChromeVox.readFrom(a);cvox.ChromeVoxEventWatcher.readFrom(a)};cvox.TtsHistory=function(){};cvox.TtsHistory.prototype.speak=function(a,b,c){cvox.History.getInstance().speak(a,b,c)};cvox.TtsHistory.prototype.isSpeaking=function(){return!1};cvox.TtsHistory.prototype.stop=function(){};cvox.TtsHistory.prototype.increaseOrDecreaseProperty=function(){};cvox.InitGlobals=function(){};
cvox.InitGlobals.initGlobals=function(){cvox.ChromeVox.host||(cvox.ChromeVox.host=cvox.HostFactory.getHost());cvox.ChromeVox.tts=(new cvox.CompositeTts).add(cvox.HostFactory.getTts()).add(new cvox.TtsHistory).add(cvox.ConsoleTts.getInstance());cvox.ChromeVox.braille=cvox.HostFactory.getBraille();if(cvox.ChromeVox.host.canShowLens()){var a=new cvox.Lens;a.setMultiplier(2.25);cvox.ChromeVox.tts.add(a);cvox.ChromeVox.lens=a}cvox.ChromeVox.earcons=cvox.HostFactory.getEarcons();cvox.ChromeVox.msgs=cvox.HostFactory.getMsgs();
cvox.ChromeVox.isActive=!0;cvox.ChromeVox.navigationManager=new cvox.NavigationManager;cvox.ChromeVox.navigationManager.updateIndicator();cvox.ChromeVox.syncToNode=cvox.ApiImplementation.syncToNode;cvox.ChromeVox.serializer=new cvox.Serializer;cvox.ChromeVox.host.init();cvox.ChromeVoxEventWatcher.init(window);cvox.ChromeVox.executeUserCommand=function(a){cvox.ChromeVoxUserCommands.commands[a]()};cvox.ChromeVox.host.onPageLoad()};cvox.ChromeVoxInit={};cvox.ChromeVox.initTimeout_=100;cvox.ChromeVox.recallInit_=function(a){window.console.log(a+" Will try again in "+cvox.ChromeVox.initTimeout_+"ms");window.setTimeout(cvox.ChromeVox.initDocument,cvox.ChromeVox.initTimeout_);cvox.ChromeVox.initTimeout_*=2};
cvox.ChromeVox.initDocument=function(){"complete"!=document.readyState?cvox.ChromeVox.recallInit_("ChromeVox not starting on unloaded page: "+document.location.href+"."):(cvox.ChromeVox.host=cvox.HostFactory.getHost(),cvox.ChromeVox.host.ttsLoaded()?(window.console.log("Starting ChromeVox."),cvox.InitGlobals.initGlobals(),window.disableChromeVox=function(){cvox.ChromeVox.host.activateOrDeactivateChromeVox(!1)}):cvox.ChromeVox.recallInit_("ChromeVox not starting; waiting for TTS. "+document.location.href+
"."))};cvox.ChromeVox.reinit=function(){cvox.ChromeVox.host.reinit();cvox.ChromeVox.initDocument()};window.CLOSURE_USE_EXT_MESSAGES=!0;cvox.ChromeVox.initDocument();
